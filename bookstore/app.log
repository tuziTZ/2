INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 63, in register
    token = jwt_encode(user_id, terminal)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 26, in jwt_encode
    return encoded.decode("utf-8")
AttributeError: 'str' object has no attribute 'decode'
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 10:41:48] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 10:45:54] "POST /auth/register HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 10:47:45] "POST /auth/register HTTP/1.1" 200 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:04:36] "[35m[1mPOST /seller/create_store HTTP/1.1[0m" 530 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:13:04] "POST /auth/register HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:13:04] "POST /auth/login HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:13:04] "[35m[1mPOST /seller/create_store HTTP/1.1[0m" 514 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.ForeignKeyViolation) é”™è¯¯:  æ’å…¥æˆ–æ›´æ–°è¡¨ "user_store" è¿åå¤–é”®çº¦æŸ "user_store_store_id_fkey"
DETAIL:  é”®å€¼å¯¹(store_id)=(test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0)æ²¡æœ‰åœ¨è¡¨"store"ä¸­å‡ºç°.

[SQL: INSERT INTO user_store (user_id, store_id) VALUES (%(user_id)s, %(store_id)s)]
[parameters: {'user_id': 'test_add_books_seller_id_86890cb3-9e1c-11ee-a5d1-44e5172dc7a0', 'store_id': 'test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:13:05] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.ForeignKeyViolation) é”™è¯¯:  æ’å…¥æˆ–æ›´æ–°è¡¨ "user_store" è¿åå¤–é”®çº¦æŸ "user_store_store_id_fkey"
DETAIL:  é”®å€¼å¯¹(store_id)=(test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0)æ²¡æœ‰åœ¨è¡¨"store"ä¸­å‡ºç°.

[SQL: INSERT INTO user_store (user_id, store_id) VALUES (%(user_id)s, %(store_id)s)]
[parameters: {'user_id': 'test_add_books_seller_id_86890cb3-9e1c-11ee-a5d1-44e5172dc7a0', 'store_id': 'test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:13:05] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.ForeignKeyViolation) é”™è¯¯:  æ’å…¥æˆ–æ›´æ–°è¡¨ "user_store" è¿åå¤–é”®çº¦æŸ "user_store_store_id_fkey"
DETAIL:  é”®å€¼å¯¹(store_id)=(test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0)æ²¡æœ‰åœ¨è¡¨"store"ä¸­å‡ºç°.

[SQL: INSERT INTO user_store (user_id, store_id) VALUES (%(user_id)s, %(store_id)s)]
[parameters: {'user_id': 'test_add_books_seller_id_86890cb3-9e1c-11ee-a5d1-44e5172dc7a0', 'store_id': 'test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:13:05] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.ForeignKeyViolation) é”™è¯¯:  æ’å…¥æˆ–æ›´æ–°è¡¨ "user_store" è¿åå¤–é”®çº¦æŸ "user_store_store_id_fkey"
DETAIL:  é”®å€¼å¯¹(store_id)=(test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0)æ²¡æœ‰åœ¨è¡¨"store"ä¸­å‡ºç°.

[SQL: INSERT INTO user_store (user_id, store_id) VALUES (%(user_id)s, %(store_id)s)]
[parameters: {'user_id': 'test_add_books_seller_id_86890cb3-9e1c-11ee-a5d1-44e5172dc7a0', 'store_id': 'test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:13:05] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.ForeignKeyViolation) é”™è¯¯:  æ’å…¥æˆ–æ›´æ–°è¡¨ "user_store" è¿åå¤–é”®çº¦æŸ "user_store_store_id_fkey"
DETAIL:  é”®å€¼å¯¹(store_id)=(test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0)æ²¡æœ‰åœ¨è¡¨"store"ä¸­å‡ºç°.

[SQL: INSERT INTO user_store (user_id, store_id) VALUES (%(user_id)s, %(store_id)s)]
[parameters: {'user_id': 'test_add_books_seller_id_86890cb3-9e1c-11ee-a5d1-44e5172dc7a0', 'store_id': 'test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:13:05] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.ForeignKeyViolation) é”™è¯¯:  æ’å…¥æˆ–æ›´æ–°è¡¨ "user_store" è¿åå¤–é”®çº¦æŸ "user_store_store_id_fkey"
DETAIL:  é”®å€¼å¯¹(store_id)=(test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0)æ²¡æœ‰åœ¨è¡¨"store"ä¸­å‡ºç°.

[SQL: INSERT INTO user_store (user_id, store_id) VALUES (%(user_id)s, %(store_id)s)]
[parameters: {'user_id': 'test_add_books_seller_id_86890cb3-9e1c-11ee-a5d1-44e5172dc7a0', 'store_id': 'test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:13:05] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.ForeignKeyViolation) é”™è¯¯:  æ’å…¥æˆ–æ›´æ–°è¡¨ "user_store" è¿åå¤–é”®çº¦æŸ "user_store_store_id_fkey"
DETAIL:  é”®å€¼å¯¹(store_id)=(test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0)æ²¡æœ‰åœ¨è¡¨"store"ä¸­å‡ºç°.

[SQL: INSERT INTO user_store (user_id, store_id) VALUES (%(user_id)s, %(store_id)s)]
[parameters: {'user_id': 'test_add_books_seller_id_86890cb3-9e1c-11ee-a5d1-44e5172dc7a0', 'store_id': 'test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:13:05] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.ForeignKeyViolation) é”™è¯¯:  æ’å…¥æˆ–æ›´æ–°è¡¨ "user_store" è¿åå¤–é”®çº¦æŸ "user_store_store_id_fkey"
DETAIL:  é”®å€¼å¯¹(store_id)=(test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0)æ²¡æœ‰åœ¨è¡¨"store"ä¸­å‡ºç°.

[SQL: INSERT INTO user_store (user_id, store_id) VALUES (%(user_id)s, %(store_id)s)]
[parameters: {'user_id': 'test_add_books_seller_id_86890cb3-9e1c-11ee-a5d1-44e5172dc7a0', 'store_id': 'test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:13:05] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.ForeignKeyViolation) é”™è¯¯:  æ’å…¥æˆ–æ›´æ–°è¡¨ "user_store" è¿åå¤–é”®çº¦æŸ "user_store_store_id_fkey"
DETAIL:  é”®å€¼å¯¹(store_id)=(test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0)æ²¡æœ‰åœ¨è¡¨"store"ä¸­å‡ºç°.

[SQL: INSERT INTO user_store (user_id, store_id) VALUES (%(user_id)s, %(store_id)s)]
[parameters: {'user_id': 'test_add_books_seller_id_86890cb3-9e1c-11ee-a5d1-44e5172dc7a0', 'store_id': 'test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:13:05] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.ForeignKeyViolation) é”™è¯¯:  æ’å…¥æˆ–æ›´æ–°è¡¨ "user_store" è¿åå¤–é”®çº¦æŸ "user_store_store_id_fkey"
DETAIL:  é”®å€¼å¯¹(store_id)=(test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0)æ²¡æœ‰åœ¨è¡¨"store"ä¸­å‡ºç°.

[SQL: INSERT INTO user_store (user_id, store_id) VALUES (%(user_id)s, %(store_id)s)]
[parameters: {'user_id': 'test_add_books_seller_id_86890cb3-9e1c-11ee-a5d1-44e5172dc7a0', 'store_id': 'test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:13:05] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.ForeignKeyViolation) é”™è¯¯:  æ’å…¥æˆ–æ›´æ–°è¡¨ "user_store" è¿åå¤–é”®çº¦æŸ "user_store_store_id_fkey"
DETAIL:  é”®å€¼å¯¹(store_id)=(test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0)æ²¡æœ‰åœ¨è¡¨"store"ä¸­å‡ºç°.

[SQL: INSERT INTO user_store (user_id, store_id) VALUES (%(user_id)s, %(store_id)s)]
[parameters: {'user_id': 'test_add_books_seller_id_86890cb3-9e1c-11ee-a5d1-44e5172dc7a0', 'store_id': 'test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:13:05] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.ForeignKeyViolation) é”™è¯¯:  æ’å…¥æˆ–æ›´æ–°è¡¨ "user_store" è¿åå¤–é”®çº¦æŸ "user_store_store_id_fkey"
DETAIL:  é”®å€¼å¯¹(store_id)=(test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0)æ²¡æœ‰åœ¨è¡¨"store"ä¸­å‡ºç°.

[SQL: INSERT INTO user_store (user_id, store_id) VALUES (%(user_id)s, %(store_id)s)]
[parameters: {'user_id': 'test_add_books_seller_id_86890cb3-9e1c-11ee-a5d1-44e5172dc7a0', 'store_id': 'test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:13:05] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.ForeignKeyViolation) é”™è¯¯:  æ’å…¥æˆ–æ›´æ–°è¡¨ "user_store" è¿åå¤–é”®çº¦æŸ "user_store_store_id_fkey"
DETAIL:  é”®å€¼å¯¹(store_id)=(test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0)æ²¡æœ‰åœ¨è¡¨"store"ä¸­å‡ºç°.

[SQL: INSERT INTO user_store (user_id, store_id) VALUES (%(user_id)s, %(store_id)s)]
[parameters: {'user_id': 'test_add_books_seller_id_86890cb3-9e1c-11ee-a5d1-44e5172dc7a0', 'store_id': 'test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:13:05] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.ForeignKeyViolation) é”™è¯¯:  æ’å…¥æˆ–æ›´æ–°è¡¨ "user_store" è¿åå¤–é”®çº¦æŸ "user_store_store_id_fkey"
DETAIL:  é”®å€¼å¯¹(store_id)=(test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0)æ²¡æœ‰åœ¨è¡¨"store"ä¸­å‡ºç°.

[SQL: INSERT INTO user_store (user_id, store_id) VALUES (%(user_id)s, %(store_id)s)]
[parameters: {'user_id': 'test_add_books_seller_id_86890cb3-9e1c-11ee-a5d1-44e5172dc7a0', 'store_id': 'test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:13:05] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.ForeignKeyViolation) é”™è¯¯:  æ’å…¥æˆ–æ›´æ–°è¡¨ "user_store" è¿åå¤–é”®çº¦æŸ "user_store_store_id_fkey"
DETAIL:  é”®å€¼å¯¹(store_id)=(test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0)æ²¡æœ‰åœ¨è¡¨"store"ä¸­å‡ºç°.

[SQL: INSERT INTO user_store (user_id, store_id) VALUES (%(user_id)s, %(store_id)s)]
[parameters: {'user_id': 'test_add_books_seller_id_86890cb3-9e1c-11ee-a5d1-44e5172dc7a0', 'store_id': 'test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:13:05] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.ForeignKeyViolation) é”™è¯¯:  æ’å…¥æˆ–æ›´æ–°è¡¨ "user_store" è¿åå¤–é”®çº¦æŸ "user_store_store_id_fkey"
DETAIL:  é”®å€¼å¯¹(store_id)=(test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0)æ²¡æœ‰åœ¨è¡¨"store"ä¸­å‡ºç°.

[SQL: INSERT INTO user_store (user_id, store_id) VALUES (%(user_id)s, %(store_id)s)]
[parameters: {'user_id': 'test_add_books_seller_id_86890cb3-9e1c-11ee-a5d1-44e5172dc7a0', 'store_id': 'test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:13:05] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.ForeignKeyViolation) é”™è¯¯:  æ’å…¥æˆ–æ›´æ–°è¡¨ "user_store" è¿åå¤–é”®çº¦æŸ "user_store_store_id_fkey"
DETAIL:  é”®å€¼å¯¹(store_id)=(test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0)æ²¡æœ‰åœ¨è¡¨"store"ä¸­å‡ºç°.

[SQL: INSERT INTO user_store (user_id, store_id) VALUES (%(user_id)s, %(store_id)s)]
[parameters: {'user_id': 'test_add_books_seller_id_86890cb3-9e1c-11ee-a5d1-44e5172dc7a0', 'store_id': 'test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:13:05] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.ForeignKeyViolation) é”™è¯¯:  æ’å…¥æˆ–æ›´æ–°è¡¨ "user_store" è¿åå¤–é”®çº¦æŸ "user_store_store_id_fkey"
DETAIL:  é”®å€¼å¯¹(store_id)=(test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0)æ²¡æœ‰åœ¨è¡¨"store"ä¸­å‡ºç°.

[SQL: INSERT INTO user_store (user_id, store_id) VALUES (%(user_id)s, %(store_id)s)]
[parameters: {'user_id': 'test_add_books_seller_id_86890cb3-9e1c-11ee-a5d1-44e5172dc7a0', 'store_id': 'test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:13:05] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.ForeignKeyViolation) é”™è¯¯:  æ’å…¥æˆ–æ›´æ–°è¡¨ "user_store" è¿åå¤–é”®çº¦æŸ "user_store_store_id_fkey"
DETAIL:  é”®å€¼å¯¹(store_id)=(test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0)æ²¡æœ‰åœ¨è¡¨"store"ä¸­å‡ºç°.

[SQL: INSERT INTO user_store (user_id, store_id) VALUES (%(user_id)s, %(store_id)s)]
[parameters: {'user_id': 'test_add_books_seller_id_86890cb3-9e1c-11ee-a5d1-44e5172dc7a0', 'store_id': 'test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:13:05] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.ForeignKeyViolation) é”™è¯¯:  æ’å…¥æˆ–æ›´æ–°è¡¨ "user_store" è¿åå¤–é”®çº¦æŸ "user_store_store_id_fkey"
DETAIL:  é”®å€¼å¯¹(store_id)=(test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0)æ²¡æœ‰åœ¨è¡¨"store"ä¸­å‡ºç°.

[SQL: INSERT INTO user_store (user_id, store_id) VALUES (%(user_id)s, %(store_id)s)]
[parameters: {'user_id': 'test_add_books_seller_id_86890cb3-9e1c-11ee-a5d1-44e5172dc7a0', 'store_id': 'test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:13:05] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.ForeignKeyViolation) é”™è¯¯:  æ’å…¥æˆ–æ›´æ–°è¡¨ "user_store" è¿åå¤–é”®çº¦æŸ "user_store_store_id_fkey"
DETAIL:  é”®å€¼å¯¹(store_id)=(test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0)æ²¡æœ‰åœ¨è¡¨"store"ä¸­å‡ºç°.

[SQL: INSERT INTO user_store (user_id, store_id) VALUES (%(user_id)s, %(store_id)s)]
[parameters: {'user_id': 'test_add_books_seller_id_86890cb3-9e1c-11ee-a5d1-44e5172dc7a0', 'store_id': 'test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:13:05] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.ForeignKeyViolation) é”™è¯¯:  æ’å…¥æˆ–æ›´æ–°è¡¨ "user_store" è¿åå¤–é”®çº¦æŸ "user_store_store_id_fkey"
DETAIL:  é”®å€¼å¯¹(store_id)=(test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0)æ²¡æœ‰åœ¨è¡¨"store"ä¸­å‡ºç°.

[SQL: INSERT INTO user_store (user_id, store_id) VALUES (%(user_id)s, %(store_id)s)]
[parameters: {'user_id': 'test_add_books_seller_id_86890cb3-9e1c-11ee-a5d1-44e5172dc7a0', 'store_id': 'test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:13:05] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.ForeignKeyViolation) é”™è¯¯:  æ’å…¥æˆ–æ›´æ–°è¡¨ "user_store" è¿åå¤–é”®çº¦æŸ "user_store_store_id_fkey"
DETAIL:  é”®å€¼å¯¹(store_id)=(test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0)æ²¡æœ‰åœ¨è¡¨"store"ä¸­å‡ºç°.

[SQL: INSERT INTO user_store (user_id, store_id) VALUES (%(user_id)s, %(store_id)s)]
[parameters: {'user_id': 'test_add_books_seller_id_86890cb3-9e1c-11ee-a5d1-44e5172dc7a0', 'store_id': 'test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:13:05] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.ForeignKeyViolation) é”™è¯¯:  æ’å…¥æˆ–æ›´æ–°è¡¨ "user_store" è¿åå¤–é”®çº¦æŸ "user_store_store_id_fkey"
DETAIL:  é”®å€¼å¯¹(store_id)=(test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0)æ²¡æœ‰åœ¨è¡¨"store"ä¸­å‡ºç°.

[SQL: INSERT INTO user_store (user_id, store_id) VALUES (%(user_id)s, %(store_id)s)]
[parameters: {'user_id': 'test_add_books_seller_id_86890cb3-9e1c-11ee-a5d1-44e5172dc7a0', 'store_id': 'test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:13:05] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.ForeignKeyViolation) é”™è¯¯:  æ’å…¥æˆ–æ›´æ–°è¡¨ "user_store" è¿åå¤–é”®çº¦æŸ "user_store_store_id_fkey"
DETAIL:  é”®å€¼å¯¹(store_id)=(test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0)æ²¡æœ‰åœ¨è¡¨"store"ä¸­å‡ºç°.

[SQL: INSERT INTO user_store (user_id, store_id) VALUES (%(user_id)s, %(store_id)s)]
[parameters: {'user_id': 'test_add_books_seller_id_86890cb3-9e1c-11ee-a5d1-44e5172dc7a0', 'store_id': 'test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:13:05] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.ForeignKeyViolation) é”™è¯¯:  æ’å…¥æˆ–æ›´æ–°è¡¨ "user_store" è¿åå¤–é”®çº¦æŸ "user_store_store_id_fkey"
DETAIL:  é”®å€¼å¯¹(store_id)=(test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0)æ²¡æœ‰åœ¨è¡¨"store"ä¸­å‡ºç°.

[SQL: INSERT INTO user_store (user_id, store_id) VALUES (%(user_id)s, %(store_id)s)]
[parameters: {'user_id': 'test_add_books_seller_id_86890cb3-9e1c-11ee-a5d1-44e5172dc7a0', 'store_id': 'test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:13:05] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.ForeignKeyViolation) é”™è¯¯:  æ’å…¥æˆ–æ›´æ–°è¡¨ "user_store" è¿åå¤–é”®çº¦æŸ "user_store_store_id_fkey"
DETAIL:  é”®å€¼å¯¹(store_id)=(test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0)æ²¡æœ‰åœ¨è¡¨"store"ä¸­å‡ºç°.

[SQL: INSERT INTO user_store (user_id, store_id) VALUES (%(user_id)s, %(store_id)s)]
[parameters: {'user_id': 'test_add_books_seller_id_86890cb3-9e1c-11ee-a5d1-44e5172dc7a0', 'store_id': 'test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:13:05] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.ForeignKeyViolation) é”™è¯¯:  æ’å…¥æˆ–æ›´æ–°è¡¨ "user_store" è¿åå¤–é”®çº¦æŸ "user_store_store_id_fkey"
DETAIL:  é”®å€¼å¯¹(store_id)=(test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0)æ²¡æœ‰åœ¨è¡¨"store"ä¸­å‡ºç°.

[SQL: INSERT INTO user_store (user_id, store_id) VALUES (%(user_id)s, %(store_id)s)]
[parameters: {'user_id': 'test_add_books_seller_id_86890cb3-9e1c-11ee-a5d1-44e5172dc7a0', 'store_id': 'test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:13:05] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.ForeignKeyViolation) é”™è¯¯:  æ’å…¥æˆ–æ›´æ–°è¡¨ "user_store" è¿åå¤–é”®çº¦æŸ "user_store_store_id_fkey"
DETAIL:  é”®å€¼å¯¹(store_id)=(test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0)æ²¡æœ‰åœ¨è¡¨"store"ä¸­å‡ºç°.

[SQL: INSERT INTO user_store (user_id, store_id) VALUES (%(user_id)s, %(store_id)s)]
[parameters: {'user_id': 'test_add_books_seller_id_86890cb3-9e1c-11ee-a5d1-44e5172dc7a0', 'store_id': 'test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:13:05] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.ForeignKeyViolation) é”™è¯¯:  æ’å…¥æˆ–æ›´æ–°è¡¨ "user_store" è¿åå¤–é”®çº¦æŸ "user_store_store_id_fkey"
DETAIL:  é”®å€¼å¯¹(store_id)=(test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0)æ²¡æœ‰åœ¨è¡¨"store"ä¸­å‡ºç°.

[SQL: INSERT INTO user_store (user_id, store_id) VALUES (%(user_id)s, %(store_id)s)]
[parameters: {'user_id': 'test_add_books_seller_id_86890cb3-9e1c-11ee-a5d1-44e5172dc7a0', 'store_id': 'test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:13:05] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.ForeignKeyViolation) é”™è¯¯:  æ’å…¥æˆ–æ›´æ–°è¡¨ "user_store" è¿åå¤–é”®çº¦æŸ "user_store_store_id_fkey"
DETAIL:  é”®å€¼å¯¹(store_id)=(test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0)æ²¡æœ‰åœ¨è¡¨"store"ä¸­å‡ºç°.

[SQL: INSERT INTO user_store (user_id, store_id) VALUES (%(user_id)s, %(store_id)s)]
[parameters: {'user_id': 'test_add_books_seller_id_86890cb3-9e1c-11ee-a5d1-44e5172dc7a0', 'store_id': 'test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:13:05] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.ForeignKeyViolation) é”™è¯¯:  æ’å…¥æˆ–æ›´æ–°è¡¨ "user_store" è¿åå¤–é”®çº¦æŸ "user_store_store_id_fkey"
DETAIL:  é”®å€¼å¯¹(store_id)=(test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0)æ²¡æœ‰åœ¨è¡¨"store"ä¸­å‡ºç°.

[SQL: INSERT INTO user_store (user_id, store_id) VALUES (%(user_id)s, %(store_id)s)]
[parameters: {'user_id': 'test_add_books_seller_id_86890cb3-9e1c-11ee-a5d1-44e5172dc7a0', 'store_id': 'test_add_books_store_id_86890cb4-9e1c-11ee-84d1-44e5172dc7a0'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:13:05] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:13:06] "GET /shutdown HTTP/1.1" 200 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:14:55] "POST /auth/register HTTP/1.1" 200 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 32, in register
    user_id = request.json.get("user_id", "")
AttributeError: 'NoneType' object has no attribute 'get'
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:15:04] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:15:52] "POST /auth/register HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:16:25] "[35m[1mPOST /seller/create_store HTTP/1.1[0m" 514 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:17:57] "[35m[1mPOST /seller/create_store HTTP/1.1[0m" 514 -
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:17:59] "[35m[1mPOST /seller/create_store HTTP/1.1[0m" 530 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:22:30] "[35m[1mPOST /seller/create_store HTTP/1.1[0m" 514 -
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:22:51] "[35m[1mPOST /seller/create_store HTTP/1.1[0m" 530 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:23:01] "[35m[1mPOST /seller/create_store HTTP/1.1[0m" 514 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:24:27] "[35m[1mPOST /seller/create_store HTTP/1.1[0m" 514 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:25:26] "[35m[1mPOST /seller/create_store HTTP/1.1[0m" 514 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:31:04] "POST /auth/register HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:31:08] "POST /auth/register HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:31:13] "POST /seller/create_store HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:32:08] "POST /seller/add_book HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:32:22] "POST /seller/add_stock_level HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:32:30] "POST /auth/register HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:32:30] "POST /auth/login HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:32:30] "POST /seller/create_store HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:32:30] "[35m[1mPOST /seller/add_book HTTP/1.1[0m" 516 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) é”™è¯¯:  é‡å¤é”®è¿åå”¯ä¸€çº¦æŸ"book_pkey"
DETAIL:  é”®å€¼"(id)=(1000134)" å·²ç»å­˜åœ¨

[SQL: INSERT INTO book (id, title, author, publisher, original_title, translator, pub_year, pages, price, currency_unit, binding, isbn, author_intro, book_intro, content, tags, picture) VALUES (%(id)s, %(title)s, %(author)s, %(publisher)s, %(original_title)s, %(translator)s, %(pub_year)s, %(pages)s, %(price)s, %(currency_unit)s, %(binding)s, %(isbn)s, %(author_intro)s, %(book_intro)s, %(content)s, %(tags)s, %(picture)s)]
[parameters: {'id': '1000134', 'title': 'ä¸‰æ¯›æµæµªè®°å…¨é›†', 'author': 'å¼ ä¹å¹³', 'publisher': 'å°‘å¹´å„¿ç«¥å‡ºç‰ˆç¤¾', 'original_title': None, 'translator': None, 'pub_year': '2001-8-1', 'pages': 261, 'price': 3000, 'currency_unit': 'å…ƒ', 'binding': 'å¹³è£…(æ— ç›˜)', 'isbn': '9787532446674', 'author_intro': 'å¼ ä¹å¹³ï¼Œæ˜¯ä¸­å›½å½“ä»£æœ€æ°å‡ºçš„æ¼«ç”»å®¶ä¹‹ä¸€ã€‚1910å¹´11æœˆ10æ—¥å‡ºç”Ÿäºæµ™æ±Ÿçœæµ·ç›å¿æµ·å¡˜ä¹¡é»„åºµå¤´æ‘ã€‚çˆ¶äº²æ˜¯ä½ä¹¡æ‘æ•™å¸ˆã€‚æ¯äº²æ“…é•¿åˆºç»£ã€å‰ªçº¸ï¼Œæ˜¯å¼ ä¹å¹³æœ€æ—©çš„ç¾æœ¯å¯è’™è€…ã€‚\n1923å¹´ï¼Œåœ¨å°å­¦è€å¸ˆçš„æŒ‡å¯¼ä¸‹ï¼Œå°‘å¹´å¼ ä¹å¹³åˆ›ä½œäº†å¹³ç”Ÿç¬¬ä¸€å¼ æ¼«ç”»ã€Šä¸€è±•è´Ÿäº”åƒå…ƒã€‹ï¼Œè®½åˆºå†›é˜€æ›¹é”Ÿè´¿é€‰ï¼Œåœ¨å½“åœ°åå™ªä¸€æ—¶ã€‚\n1927å¹´åœ¨å®¶ä¹¡å ... (1770 characters truncated) ... æƒ…â€å¾æ–‡ç‰¹ç­‰å¥–ã€‚\n1991å¹´4æœˆ4æ—¥ï¼Œåœ¨ã€Šè§£æ”¾æ—¥æŠ¥ã€‹ä¸Šå‘è¡¨æœ€åä¸€å¹…æ¼«ç”»ä½œå“ï¼šâ€œçŒ«å“ºé¼ â€ã€‚\n1991å¹´å†¬ï¼Œå¼ ä¹å¹³å†³å®šå°†ã€Šä¸‰æ¯›ä»å†›è®°ã€‹åŸç¨¿æçŒ®ç»™ä¸Šæµ·ç¾æœ¯é¦†ã€‚\n1992å¹´1æœˆ23æ—¥ï¼Œåœ¨ä¸Šæµ·åä¸œåŒ»é™¢å› å¸å…¥æ€§è‚ºç‚ç—…æƒ…æ¶åŒ–ã€‚\n1992å¹´9æœˆ27æ—¥ä¸‹åˆ6æ—¶ï¼Œå¼ ä¹å¹³åœ¨ä¸Šæµ·åä¸œåŒ»é™¢ä¸ä¸–é•¿è¾ï¼Œäº«å¹´82å²ã€‚\n', 'book_intro': 'ã€Šä¸‰æ¯›æµæµªè®°ã€‹æ‰€æè¿°çš„ä¸‰æ¯›æ‰€ç”Ÿæ´»çš„é‚£ä¸ªæ—¶ä»£ï¼Œå·²ç»æˆä¸ºäº†è¿‡å»ï¼Œä½†æ˜¯äº†è§£è¿‡å»ï¼Œäº†è§£å†å²ï¼Œå´æ˜¯æ¯ä¸ªäººéƒ½å¿…é¡»å®Œæˆçš„ä¸€ä»½ç­”å·ã€‚å› ä¸ºäº†è§£è¿‡å»ï¼Œäº†è§£å†å²å¯ä»¥è®©æˆé•¿çš„è„šæ­¥æ›´æ²‰ç€ã€æ›´åšå®ï¼Œå¯ä»¥è®©è§†é‡æ›´å®½å¹¿ï¼Œå¿ƒèƒ¸æ›´åšå¤§ã€‚åœ¨ä¸€ä¸ªäººæˆé•¿çš„è¿‡ç¨‹ä¸­ï¼Œé™¤äº†æ–°é²œçš„ç©ºæ°”ï¼Œç¿çƒ‚çš„é˜³å…‰ä»¥å¤–ï¼Œæ›´éœ€è¦çš„å†·é™çš„æ€è€ƒï¼Œä»¥åŠå¿ƒçµçš„æ„ŸåŠ¨å’Œéœ‡æ’¼ï¼Œè€Œ ... (90 characters truncated) ... å’Œççˆ±ã€‚\nã€Šä¸‰æ¯›æµæµªè®°ã€‹ä¸ºä»€ä¹ˆç»ä¹…ä¸è¡°ï¼Ÿå› ä¸ºå®ƒæœ‰ç›Šäºäººä»¬çš„å¿ƒçµã€‚æŸ¯çµå…ˆç”Ÿåœ¨é¦™æ¸¯ç‰ˆåºè¨€ä¸­å†™é“ï¼šâ€œã€Šä¸‰æ¯›æµæµªè®°ã€‹æ˜¯ä¸€éƒ¨å¾ˆæœ‰è¶£å‘³çš„å°äººä¹¦ï¼Œä¹Ÿæ˜¯ä¸€éƒ¨ç»™æˆäººçœ‹çš„è­¦ä¸–ä¹¦ã€‚ä¸‰æ¯›èº«ä¸Šï¼ŒèƒŒè´Ÿç€æ²‰é‡çš„å†å²é˜´å½±ï¼Œä¹Ÿå¸¦äº†æ·±åˆ»çš„å†å²å¯ç¤ºï¼Œå‘ä¸–ç•Œå‘¼å”¤å’Œå¹³ï¼Œå‘¼å”¤å…¬æ­£ï¼Œå‘¼å”¤ä»æ…ˆï¼Œå‘¼å”¤åŒæƒ…ï¼Œå‘¼å”¤äººé“ï¼Œå‘¼å”¤æ–‡æ˜ï¼â€\næ‰€...\n', 'content': '', 'tags': ['æ¼«ç”»', 'ä¸‰æ¯›', 'å¼ ä¹å¹³', 'ç«¥å¹´', 'ä¸­å›½æ¼«ç”»', 'ç»å…¸', 'ç»˜æœ¬', 'ä¸­å›½'], 'picture': None}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:32:31] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) é”™è¯¯:  é‡å¤é”®è¿åå”¯ä¸€çº¦æŸ"book_pkey"
DETAIL:  é”®å€¼"(id)=(1000134)" å·²ç»å­˜åœ¨

[SQL: INSERT INTO book (id, title, author, publisher, original_title, translator, pub_year, pages, price, currency_unit, binding, isbn, author_intro, book_intro, content, tags, picture) VALUES (%(id)s, %(title)s, %(author)s, %(publisher)s, %(original_title)s, %(translator)s, %(pub_year)s, %(pages)s, %(price)s, %(currency_unit)s, %(binding)s, %(isbn)s, %(author_intro)s, %(book_intro)s, %(content)s, %(tags)s, %(picture)s)]
[parameters: {'id': '1000134', 'title': 'ä¸‰æ¯›æµæµªè®°å…¨é›†', 'author': 'å¼ ä¹å¹³', 'publisher': 'å°‘å¹´å„¿ç«¥å‡ºç‰ˆç¤¾', 'original_title': None, 'translator': None, 'pub_year': '2001-8-1', 'pages': 261, 'price': 3000, 'currency_unit': 'å…ƒ', 'binding': 'å¹³è£…(æ— ç›˜)', 'isbn': '9787532446674', 'author_intro': 'å¼ ä¹å¹³ï¼Œæ˜¯ä¸­å›½å½“ä»£æœ€æ°å‡ºçš„æ¼«ç”»å®¶ä¹‹ä¸€ã€‚1910å¹´11æœˆ10æ—¥å‡ºç”Ÿäºæµ™æ±Ÿçœæµ·ç›å¿æµ·å¡˜ä¹¡é»„åºµå¤´æ‘ã€‚çˆ¶äº²æ˜¯ä½ä¹¡æ‘æ•™å¸ˆã€‚æ¯äº²æ“…é•¿åˆºç»£ã€å‰ªçº¸ï¼Œæ˜¯å¼ ä¹å¹³æœ€æ—©çš„ç¾æœ¯å¯è’™è€…ã€‚\n1923å¹´ï¼Œåœ¨å°å­¦è€å¸ˆçš„æŒ‡å¯¼ä¸‹ï¼Œå°‘å¹´å¼ ä¹å¹³åˆ›ä½œäº†å¹³ç”Ÿç¬¬ä¸€å¼ æ¼«ç”»ã€Šä¸€è±•è´Ÿäº”åƒå…ƒã€‹ï¼Œè®½åˆºå†›é˜€æ›¹é”Ÿè´¿é€‰ï¼Œåœ¨å½“åœ°åå™ªä¸€æ—¶ã€‚\n1927å¹´åœ¨å®¶ä¹¡å ... (1770 characters truncated) ... æƒ…â€å¾æ–‡ç‰¹ç­‰å¥–ã€‚\n1991å¹´4æœˆ4æ—¥ï¼Œåœ¨ã€Šè§£æ”¾æ—¥æŠ¥ã€‹ä¸Šå‘è¡¨æœ€åä¸€å¹…æ¼«ç”»ä½œå“ï¼šâ€œçŒ«å“ºé¼ â€ã€‚\n1991å¹´å†¬ï¼Œå¼ ä¹å¹³å†³å®šå°†ã€Šä¸‰æ¯›ä»å†›è®°ã€‹åŸç¨¿æçŒ®ç»™ä¸Šæµ·ç¾æœ¯é¦†ã€‚\n1992å¹´1æœˆ23æ—¥ï¼Œåœ¨ä¸Šæµ·åä¸œåŒ»é™¢å› å¸å…¥æ€§è‚ºç‚ç—…æƒ…æ¶åŒ–ã€‚\n1992å¹´9æœˆ27æ—¥ä¸‹åˆ6æ—¶ï¼Œå¼ ä¹å¹³åœ¨ä¸Šæµ·åä¸œåŒ»é™¢ä¸ä¸–é•¿è¾ï¼Œäº«å¹´82å²ã€‚\n', 'book_intro': 'ã€Šä¸‰æ¯›æµæµªè®°ã€‹æ‰€æè¿°çš„ä¸‰æ¯›æ‰€ç”Ÿæ´»çš„é‚£ä¸ªæ—¶ä»£ï¼Œå·²ç»æˆä¸ºäº†è¿‡å»ï¼Œä½†æ˜¯äº†è§£è¿‡å»ï¼Œäº†è§£å†å²ï¼Œå´æ˜¯æ¯ä¸ªäººéƒ½å¿…é¡»å®Œæˆçš„ä¸€ä»½ç­”å·ã€‚å› ä¸ºäº†è§£è¿‡å»ï¼Œäº†è§£å†å²å¯ä»¥è®©æˆé•¿çš„è„šæ­¥æ›´æ²‰ç€ã€æ›´åšå®ï¼Œå¯ä»¥è®©è§†é‡æ›´å®½å¹¿ï¼Œå¿ƒèƒ¸æ›´åšå¤§ã€‚åœ¨ä¸€ä¸ªäººæˆé•¿çš„è¿‡ç¨‹ä¸­ï¼Œé™¤äº†æ–°é²œçš„ç©ºæ°”ï¼Œç¿çƒ‚çš„é˜³å…‰ä»¥å¤–ï¼Œæ›´éœ€è¦çš„å†·é™çš„æ€è€ƒï¼Œä»¥åŠå¿ƒçµçš„æ„ŸåŠ¨å’Œéœ‡æ’¼ï¼Œè€Œ ... (90 characters truncated) ... å’Œççˆ±ã€‚\nã€Šä¸‰æ¯›æµæµªè®°ã€‹ä¸ºä»€ä¹ˆç»ä¹…ä¸è¡°ï¼Ÿå› ä¸ºå®ƒæœ‰ç›Šäºäººä»¬çš„å¿ƒçµã€‚æŸ¯çµå…ˆç”Ÿåœ¨é¦™æ¸¯ç‰ˆåºè¨€ä¸­å†™é“ï¼šâ€œã€Šä¸‰æ¯›æµæµªè®°ã€‹æ˜¯ä¸€éƒ¨å¾ˆæœ‰è¶£å‘³çš„å°äººä¹¦ï¼Œä¹Ÿæ˜¯ä¸€éƒ¨ç»™æˆäººçœ‹çš„è­¦ä¸–ä¹¦ã€‚ä¸‰æ¯›èº«ä¸Šï¼ŒèƒŒè´Ÿç€æ²‰é‡çš„å†å²é˜´å½±ï¼Œä¹Ÿå¸¦äº†æ·±åˆ»çš„å†å²å¯ç¤ºï¼Œå‘ä¸–ç•Œå‘¼å”¤å’Œå¹³ï¼Œå‘¼å”¤å…¬æ­£ï¼Œå‘¼å”¤ä»æ…ˆï¼Œå‘¼å”¤åŒæƒ…ï¼Œå‘¼å”¤äººé“ï¼Œå‘¼å”¤æ–‡æ˜ï¼â€\næ‰€...\n', 'content': '', 'tags': ['æ¼«ç”»', 'ä¸‰æ¯›', 'å¼ ä¹å¹³', 'ç«¥å¹´', 'ä¸­å›½æ¼«ç”»', 'ç»å…¸', 'ç»˜æœ¬', 'ä¸­å›½'], 'picture': None}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:32:31] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) é”™è¯¯:  é‡å¤é”®è¿åå”¯ä¸€çº¦æŸ"book_pkey"
DETAIL:  é”®å€¼"(id)=(1000134)" å·²ç»å­˜åœ¨

[SQL: INSERT INTO book (id, title, author, publisher, original_title, translator, pub_year, pages, price, currency_unit, binding, isbn, author_intro, book_intro, content, tags, picture) VALUES (%(id)s, %(title)s, %(author)s, %(publisher)s, %(original_title)s, %(translator)s, %(pub_year)s, %(pages)s, %(price)s, %(currency_unit)s, %(binding)s, %(isbn)s, %(author_intro)s, %(book_intro)s, %(content)s, %(tags)s, %(picture)s)]
[parameters: {'id': '1000134', 'title': 'ä¸‰æ¯›æµæµªè®°å…¨é›†', 'author': 'å¼ ä¹å¹³', 'publisher': 'å°‘å¹´å„¿ç«¥å‡ºç‰ˆç¤¾', 'original_title': None, 'translator': None, 'pub_year': '2001-8-1', 'pages': 261, 'price': 3000, 'currency_unit': 'å…ƒ', 'binding': 'å¹³è£…(æ— ç›˜)', 'isbn': '9787532446674', 'author_intro': 'å¼ ä¹å¹³ï¼Œæ˜¯ä¸­å›½å½“ä»£æœ€æ°å‡ºçš„æ¼«ç”»å®¶ä¹‹ä¸€ã€‚1910å¹´11æœˆ10æ—¥å‡ºç”Ÿäºæµ™æ±Ÿçœæµ·ç›å¿æµ·å¡˜ä¹¡é»„åºµå¤´æ‘ã€‚çˆ¶äº²æ˜¯ä½ä¹¡æ‘æ•™å¸ˆã€‚æ¯äº²æ“…é•¿åˆºç»£ã€å‰ªçº¸ï¼Œæ˜¯å¼ ä¹å¹³æœ€æ—©çš„ç¾æœ¯å¯è’™è€…ã€‚\n1923å¹´ï¼Œåœ¨å°å­¦è€å¸ˆçš„æŒ‡å¯¼ä¸‹ï¼Œå°‘å¹´å¼ ä¹å¹³åˆ›ä½œäº†å¹³ç”Ÿç¬¬ä¸€å¼ æ¼«ç”»ã€Šä¸€è±•è´Ÿäº”åƒå…ƒã€‹ï¼Œè®½åˆºå†›é˜€æ›¹é”Ÿè´¿é€‰ï¼Œåœ¨å½“åœ°åå™ªä¸€æ—¶ã€‚\n1927å¹´åœ¨å®¶ä¹¡å ... (1770 characters truncated) ... æƒ…â€å¾æ–‡ç‰¹ç­‰å¥–ã€‚\n1991å¹´4æœˆ4æ—¥ï¼Œåœ¨ã€Šè§£æ”¾æ—¥æŠ¥ã€‹ä¸Šå‘è¡¨æœ€åä¸€å¹…æ¼«ç”»ä½œå“ï¼šâ€œçŒ«å“ºé¼ â€ã€‚\n1991å¹´å†¬ï¼Œå¼ ä¹å¹³å†³å®šå°†ã€Šä¸‰æ¯›ä»å†›è®°ã€‹åŸç¨¿æçŒ®ç»™ä¸Šæµ·ç¾æœ¯é¦†ã€‚\n1992å¹´1æœˆ23æ—¥ï¼Œåœ¨ä¸Šæµ·åä¸œåŒ»é™¢å› å¸å…¥æ€§è‚ºç‚ç—…æƒ…æ¶åŒ–ã€‚\n1992å¹´9æœˆ27æ—¥ä¸‹åˆ6æ—¶ï¼Œå¼ ä¹å¹³åœ¨ä¸Šæµ·åä¸œåŒ»é™¢ä¸ä¸–é•¿è¾ï¼Œäº«å¹´82å²ã€‚\n', 'book_intro': 'ã€Šä¸‰æ¯›æµæµªè®°ã€‹æ‰€æè¿°çš„ä¸‰æ¯›æ‰€ç”Ÿæ´»çš„é‚£ä¸ªæ—¶ä»£ï¼Œå·²ç»æˆä¸ºäº†è¿‡å»ï¼Œä½†æ˜¯äº†è§£è¿‡å»ï¼Œäº†è§£å†å²ï¼Œå´æ˜¯æ¯ä¸ªäººéƒ½å¿…é¡»å®Œæˆçš„ä¸€ä»½ç­”å·ã€‚å› ä¸ºäº†è§£è¿‡å»ï¼Œäº†è§£å†å²å¯ä»¥è®©æˆé•¿çš„è„šæ­¥æ›´æ²‰ç€ã€æ›´åšå®ï¼Œå¯ä»¥è®©è§†é‡æ›´å®½å¹¿ï¼Œå¿ƒèƒ¸æ›´åšå¤§ã€‚åœ¨ä¸€ä¸ªäººæˆé•¿çš„è¿‡ç¨‹ä¸­ï¼Œé™¤äº†æ–°é²œçš„ç©ºæ°”ï¼Œç¿çƒ‚çš„é˜³å…‰ä»¥å¤–ï¼Œæ›´éœ€è¦çš„å†·é™çš„æ€è€ƒï¼Œä»¥åŠå¿ƒçµçš„æ„ŸåŠ¨å’Œéœ‡æ’¼ï¼Œè€Œ ... (90 characters truncated) ... å’Œççˆ±ã€‚\nã€Šä¸‰æ¯›æµæµªè®°ã€‹ä¸ºä»€ä¹ˆç»ä¹…ä¸è¡°ï¼Ÿå› ä¸ºå®ƒæœ‰ç›Šäºäººä»¬çš„å¿ƒçµã€‚æŸ¯çµå…ˆç”Ÿåœ¨é¦™æ¸¯ç‰ˆåºè¨€ä¸­å†™é“ï¼šâ€œã€Šä¸‰æ¯›æµæµªè®°ã€‹æ˜¯ä¸€éƒ¨å¾ˆæœ‰è¶£å‘³çš„å°äººä¹¦ï¼Œä¹Ÿæ˜¯ä¸€éƒ¨ç»™æˆäººçœ‹çš„è­¦ä¸–ä¹¦ã€‚ä¸‰æ¯›èº«ä¸Šï¼ŒèƒŒè´Ÿç€æ²‰é‡çš„å†å²é˜´å½±ï¼Œä¹Ÿå¸¦äº†æ·±åˆ»çš„å†å²å¯ç¤ºï¼Œå‘ä¸–ç•Œå‘¼å”¤å’Œå¹³ï¼Œå‘¼å”¤å…¬æ­£ï¼Œå‘¼å”¤ä»æ…ˆï¼Œå‘¼å”¤åŒæƒ…ï¼Œå‘¼å”¤äººé“ï¼Œå‘¼å”¤æ–‡æ˜ï¼â€\næ‰€...\n', 'content': '', 'tags': ['æ¼«ç”»', 'ä¸‰æ¯›', 'å¼ ä¹å¹³', 'ç«¥å¹´', 'ä¸­å›½æ¼«ç”»', 'ç»å…¸', 'ç»˜æœ¬', 'ä¸­å›½'], 'picture': None}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:32:31] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) é”™è¯¯:  é‡å¤é”®è¿åå”¯ä¸€çº¦æŸ"book_pkey"
DETAIL:  é”®å€¼"(id)=(1000134)" å·²ç»å­˜åœ¨

[SQL: INSERT INTO book (id, title, author, publisher, original_title, translator, pub_year, pages, price, currency_unit, binding, isbn, author_intro, book_intro, content, tags, picture) VALUES (%(id)s, %(title)s, %(author)s, %(publisher)s, %(original_title)s, %(translator)s, %(pub_year)s, %(pages)s, %(price)s, %(currency_unit)s, %(binding)s, %(isbn)s, %(author_intro)s, %(book_intro)s, %(content)s, %(tags)s, %(picture)s)]
[parameters: {'id': '1000134', 'title': 'ä¸‰æ¯›æµæµªè®°å…¨é›†', 'author': 'å¼ ä¹å¹³', 'publisher': 'å°‘å¹´å„¿ç«¥å‡ºç‰ˆç¤¾', 'original_title': None, 'translator': None, 'pub_year': '2001-8-1', 'pages': 261, 'price': 3000, 'currency_unit': 'å…ƒ', 'binding': 'å¹³è£…(æ— ç›˜)', 'isbn': '9787532446674', 'author_intro': 'å¼ ä¹å¹³ï¼Œæ˜¯ä¸­å›½å½“ä»£æœ€æ°å‡ºçš„æ¼«ç”»å®¶ä¹‹ä¸€ã€‚1910å¹´11æœˆ10æ—¥å‡ºç”Ÿäºæµ™æ±Ÿçœæµ·ç›å¿æµ·å¡˜ä¹¡é»„åºµå¤´æ‘ã€‚çˆ¶äº²æ˜¯ä½ä¹¡æ‘æ•™å¸ˆã€‚æ¯äº²æ“…é•¿åˆºç»£ã€å‰ªçº¸ï¼Œæ˜¯å¼ ä¹å¹³æœ€æ—©çš„ç¾æœ¯å¯è’™è€…ã€‚\n1923å¹´ï¼Œåœ¨å°å­¦è€å¸ˆçš„æŒ‡å¯¼ä¸‹ï¼Œå°‘å¹´å¼ ä¹å¹³åˆ›ä½œäº†å¹³ç”Ÿç¬¬ä¸€å¼ æ¼«ç”»ã€Šä¸€è±•è´Ÿäº”åƒå…ƒã€‹ï¼Œè®½åˆºå†›é˜€æ›¹é”Ÿè´¿é€‰ï¼Œåœ¨å½“åœ°åå™ªä¸€æ—¶ã€‚\n1927å¹´åœ¨å®¶ä¹¡å ... (1770 characters truncated) ... æƒ…â€å¾æ–‡ç‰¹ç­‰å¥–ã€‚\n1991å¹´4æœˆ4æ—¥ï¼Œåœ¨ã€Šè§£æ”¾æ—¥æŠ¥ã€‹ä¸Šå‘è¡¨æœ€åä¸€å¹…æ¼«ç”»ä½œå“ï¼šâ€œçŒ«å“ºé¼ â€ã€‚\n1991å¹´å†¬ï¼Œå¼ ä¹å¹³å†³å®šå°†ã€Šä¸‰æ¯›ä»å†›è®°ã€‹åŸç¨¿æçŒ®ç»™ä¸Šæµ·ç¾æœ¯é¦†ã€‚\n1992å¹´1æœˆ23æ—¥ï¼Œåœ¨ä¸Šæµ·åä¸œåŒ»é™¢å› å¸å…¥æ€§è‚ºç‚ç—…æƒ…æ¶åŒ–ã€‚\n1992å¹´9æœˆ27æ—¥ä¸‹åˆ6æ—¶ï¼Œå¼ ä¹å¹³åœ¨ä¸Šæµ·åä¸œåŒ»é™¢ä¸ä¸–é•¿è¾ï¼Œäº«å¹´82å²ã€‚\n', 'book_intro': 'ã€Šä¸‰æ¯›æµæµªè®°ã€‹æ‰€æè¿°çš„ä¸‰æ¯›æ‰€ç”Ÿæ´»çš„é‚£ä¸ªæ—¶ä»£ï¼Œå·²ç»æˆä¸ºäº†è¿‡å»ï¼Œä½†æ˜¯äº†è§£è¿‡å»ï¼Œäº†è§£å†å²ï¼Œå´æ˜¯æ¯ä¸ªäººéƒ½å¿…é¡»å®Œæˆçš„ä¸€ä»½ç­”å·ã€‚å› ä¸ºäº†è§£è¿‡å»ï¼Œäº†è§£å†å²å¯ä»¥è®©æˆé•¿çš„è„šæ­¥æ›´æ²‰ç€ã€æ›´åšå®ï¼Œå¯ä»¥è®©è§†é‡æ›´å®½å¹¿ï¼Œå¿ƒèƒ¸æ›´åšå¤§ã€‚åœ¨ä¸€ä¸ªäººæˆé•¿çš„è¿‡ç¨‹ä¸­ï¼Œé™¤äº†æ–°é²œçš„ç©ºæ°”ï¼Œç¿çƒ‚çš„é˜³å…‰ä»¥å¤–ï¼Œæ›´éœ€è¦çš„å†·é™çš„æ€è€ƒï¼Œä»¥åŠå¿ƒçµçš„æ„ŸåŠ¨å’Œéœ‡æ’¼ï¼Œè€Œ ... (90 characters truncated) ... å’Œççˆ±ã€‚\nã€Šä¸‰æ¯›æµæµªè®°ã€‹ä¸ºä»€ä¹ˆç»ä¹…ä¸è¡°ï¼Ÿå› ä¸ºå®ƒæœ‰ç›Šäºäººä»¬çš„å¿ƒçµã€‚æŸ¯çµå…ˆç”Ÿåœ¨é¦™æ¸¯ç‰ˆåºè¨€ä¸­å†™é“ï¼šâ€œã€Šä¸‰æ¯›æµæµªè®°ã€‹æ˜¯ä¸€éƒ¨å¾ˆæœ‰è¶£å‘³çš„å°äººä¹¦ï¼Œä¹Ÿæ˜¯ä¸€éƒ¨ç»™æˆäººçœ‹çš„è­¦ä¸–ä¹¦ã€‚ä¸‰æ¯›èº«ä¸Šï¼ŒèƒŒè´Ÿç€æ²‰é‡çš„å†å²é˜´å½±ï¼Œä¹Ÿå¸¦äº†æ·±åˆ»çš„å†å²å¯ç¤ºï¼Œå‘ä¸–ç•Œå‘¼å”¤å’Œå¹³ï¼Œå‘¼å”¤å…¬æ­£ï¼Œå‘¼å”¤ä»æ…ˆï¼Œå‘¼å”¤åŒæƒ…ï¼Œå‘¼å”¤äººé“ï¼Œå‘¼å”¤æ–‡æ˜ï¼â€\næ‰€...\n', 'content': '', 'tags': ['æ¼«ç”»', 'ä¸‰æ¯›', 'å¼ ä¹å¹³', 'ç«¥å¹´', 'ä¸­å›½æ¼«ç”»', 'ç»å…¸', 'ç»˜æœ¬', 'ä¸­å›½'], 'picture': None}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:32:31] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) é”™è¯¯:  é‡å¤é”®è¿åå”¯ä¸€çº¦æŸ"book_pkey"
DETAIL:  é”®å€¼"(id)=(1000134)" å·²ç»å­˜åœ¨

[SQL: INSERT INTO book (id, title, author, publisher, original_title, translator, pub_year, pages, price, currency_unit, binding, isbn, author_intro, book_intro, content, tags, picture) VALUES (%(id)s, %(title)s, %(author)s, %(publisher)s, %(original_title)s, %(translator)s, %(pub_year)s, %(pages)s, %(price)s, %(currency_unit)s, %(binding)s, %(isbn)s, %(author_intro)s, %(book_intro)s, %(content)s, %(tags)s, %(picture)s)]
[parameters: {'id': '1000134', 'title': 'ä¸‰æ¯›æµæµªè®°å…¨é›†', 'author': 'å¼ ä¹å¹³', 'publisher': 'å°‘å¹´å„¿ç«¥å‡ºç‰ˆç¤¾', 'original_title': None, 'translator': None, 'pub_year': '2001-8-1', 'pages': 261, 'price': 3000, 'currency_unit': 'å…ƒ', 'binding': 'å¹³è£…(æ— ç›˜)', 'isbn': '9787532446674', 'author_intro': 'å¼ ä¹å¹³ï¼Œæ˜¯ä¸­å›½å½“ä»£æœ€æ°å‡ºçš„æ¼«ç”»å®¶ä¹‹ä¸€ã€‚1910å¹´11æœˆ10æ—¥å‡ºç”Ÿäºæµ™æ±Ÿçœæµ·ç›å¿æµ·å¡˜ä¹¡é»„åºµå¤´æ‘ã€‚çˆ¶äº²æ˜¯ä½ä¹¡æ‘æ•™å¸ˆã€‚æ¯äº²æ“…é•¿åˆºç»£ã€å‰ªçº¸ï¼Œæ˜¯å¼ ä¹å¹³æœ€æ—©çš„ç¾æœ¯å¯è’™è€…ã€‚\n1923å¹´ï¼Œåœ¨å°å­¦è€å¸ˆçš„æŒ‡å¯¼ä¸‹ï¼Œå°‘å¹´å¼ ä¹å¹³åˆ›ä½œäº†å¹³ç”Ÿç¬¬ä¸€å¼ æ¼«ç”»ã€Šä¸€è±•è´Ÿäº”åƒå…ƒã€‹ï¼Œè®½åˆºå†›é˜€æ›¹é”Ÿè´¿é€‰ï¼Œåœ¨å½“åœ°åå™ªä¸€æ—¶ã€‚\n1927å¹´åœ¨å®¶ä¹¡å ... (1770 characters truncated) ... æƒ…â€å¾æ–‡ç‰¹ç­‰å¥–ã€‚\n1991å¹´4æœˆ4æ—¥ï¼Œåœ¨ã€Šè§£æ”¾æ—¥æŠ¥ã€‹ä¸Šå‘è¡¨æœ€åä¸€å¹…æ¼«ç”»ä½œå“ï¼šâ€œçŒ«å“ºé¼ â€ã€‚\n1991å¹´å†¬ï¼Œå¼ ä¹å¹³å†³å®šå°†ã€Šä¸‰æ¯›ä»å†›è®°ã€‹åŸç¨¿æçŒ®ç»™ä¸Šæµ·ç¾æœ¯é¦†ã€‚\n1992å¹´1æœˆ23æ—¥ï¼Œåœ¨ä¸Šæµ·åä¸œåŒ»é™¢å› å¸å…¥æ€§è‚ºç‚ç—…æƒ…æ¶åŒ–ã€‚\n1992å¹´9æœˆ27æ—¥ä¸‹åˆ6æ—¶ï¼Œå¼ ä¹å¹³åœ¨ä¸Šæµ·åä¸œåŒ»é™¢ä¸ä¸–é•¿è¾ï¼Œäº«å¹´82å²ã€‚\n', 'book_intro': 'ã€Šä¸‰æ¯›æµæµªè®°ã€‹æ‰€æè¿°çš„ä¸‰æ¯›æ‰€ç”Ÿæ´»çš„é‚£ä¸ªæ—¶ä»£ï¼Œå·²ç»æˆä¸ºäº†è¿‡å»ï¼Œä½†æ˜¯äº†è§£è¿‡å»ï¼Œäº†è§£å†å²ï¼Œå´æ˜¯æ¯ä¸ªäººéƒ½å¿…é¡»å®Œæˆçš„ä¸€ä»½ç­”å·ã€‚å› ä¸ºäº†è§£è¿‡å»ï¼Œäº†è§£å†å²å¯ä»¥è®©æˆé•¿çš„è„šæ­¥æ›´æ²‰ç€ã€æ›´åšå®ï¼Œå¯ä»¥è®©è§†é‡æ›´å®½å¹¿ï¼Œå¿ƒèƒ¸æ›´åšå¤§ã€‚åœ¨ä¸€ä¸ªäººæˆé•¿çš„è¿‡ç¨‹ä¸­ï¼Œé™¤äº†æ–°é²œçš„ç©ºæ°”ï¼Œç¿çƒ‚çš„é˜³å…‰ä»¥å¤–ï¼Œæ›´éœ€è¦çš„å†·é™çš„æ€è€ƒï¼Œä»¥åŠå¿ƒçµçš„æ„ŸåŠ¨å’Œéœ‡æ’¼ï¼Œè€Œ ... (90 characters truncated) ... å’Œççˆ±ã€‚\nã€Šä¸‰æ¯›æµæµªè®°ã€‹ä¸ºä»€ä¹ˆç»ä¹…ä¸è¡°ï¼Ÿå› ä¸ºå®ƒæœ‰ç›Šäºäººä»¬çš„å¿ƒçµã€‚æŸ¯çµå…ˆç”Ÿåœ¨é¦™æ¸¯ç‰ˆåºè¨€ä¸­å†™é“ï¼šâ€œã€Šä¸‰æ¯›æµæµªè®°ã€‹æ˜¯ä¸€éƒ¨å¾ˆæœ‰è¶£å‘³çš„å°äººä¹¦ï¼Œä¹Ÿæ˜¯ä¸€éƒ¨ç»™æˆäººçœ‹çš„è­¦ä¸–ä¹¦ã€‚ä¸‰æ¯›èº«ä¸Šï¼ŒèƒŒè´Ÿç€æ²‰é‡çš„å†å²é˜´å½±ï¼Œä¹Ÿå¸¦äº†æ·±åˆ»çš„å†å²å¯ç¤ºï¼Œå‘ä¸–ç•Œå‘¼å”¤å’Œå¹³ï¼Œå‘¼å”¤å…¬æ­£ï¼Œå‘¼å”¤ä»æ…ˆï¼Œå‘¼å”¤åŒæƒ…ï¼Œå‘¼å”¤äººé“ï¼Œå‘¼å”¤æ–‡æ˜ï¼â€\næ‰€...\n', 'content': '', 'tags': ['æ¼«ç”»', 'ä¸‰æ¯›', 'å¼ ä¹å¹³', 'ç«¥å¹´', 'ä¸­å›½æ¼«ç”»', 'ç»å…¸', 'ç»˜æœ¬', 'ä¸­å›½'], 'picture': None}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:32:31] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) é”™è¯¯:  é‡å¤é”®è¿åå”¯ä¸€çº¦æŸ"book_pkey"
DETAIL:  é”®å€¼"(id)=(1000134)" å·²ç»å­˜åœ¨

[SQL: INSERT INTO book (id, title, author, publisher, original_title, translator, pub_year, pages, price, currency_unit, binding, isbn, author_intro, book_intro, content, tags, picture) VALUES (%(id)s, %(title)s, %(author)s, %(publisher)s, %(original_title)s, %(translator)s, %(pub_year)s, %(pages)s, %(price)s, %(currency_unit)s, %(binding)s, %(isbn)s, %(author_intro)s, %(book_intro)s, %(content)s, %(tags)s, %(picture)s)]
[parameters: {'id': '1000134', 'title': 'ä¸‰æ¯›æµæµªè®°å…¨é›†', 'author': 'å¼ ä¹å¹³', 'publisher': 'å°‘å¹´å„¿ç«¥å‡ºç‰ˆç¤¾', 'original_title': None, 'translator': None, 'pub_year': '2001-8-1', 'pages': 261, 'price': 3000, 'currency_unit': 'å…ƒ', 'binding': 'å¹³è£…(æ— ç›˜)', 'isbn': '9787532446674', 'author_intro': 'å¼ ä¹å¹³ï¼Œæ˜¯ä¸­å›½å½“ä»£æœ€æ°å‡ºçš„æ¼«ç”»å®¶ä¹‹ä¸€ã€‚1910å¹´11æœˆ10æ—¥å‡ºç”Ÿäºæµ™æ±Ÿçœæµ·ç›å¿æµ·å¡˜ä¹¡é»„åºµå¤´æ‘ã€‚çˆ¶äº²æ˜¯ä½ä¹¡æ‘æ•™å¸ˆã€‚æ¯äº²æ“…é•¿åˆºç»£ã€å‰ªçº¸ï¼Œæ˜¯å¼ ä¹å¹³æœ€æ—©çš„ç¾æœ¯å¯è’™è€…ã€‚\n1923å¹´ï¼Œåœ¨å°å­¦è€å¸ˆçš„æŒ‡å¯¼ä¸‹ï¼Œå°‘å¹´å¼ ä¹å¹³åˆ›ä½œäº†å¹³ç”Ÿç¬¬ä¸€å¼ æ¼«ç”»ã€Šä¸€è±•è´Ÿäº”åƒå…ƒã€‹ï¼Œè®½åˆºå†›é˜€æ›¹é”Ÿè´¿é€‰ï¼Œåœ¨å½“åœ°åå™ªä¸€æ—¶ã€‚\n1927å¹´åœ¨å®¶ä¹¡å ... (1770 characters truncated) ... æƒ…â€å¾æ–‡ç‰¹ç­‰å¥–ã€‚\n1991å¹´4æœˆ4æ—¥ï¼Œåœ¨ã€Šè§£æ”¾æ—¥æŠ¥ã€‹ä¸Šå‘è¡¨æœ€åä¸€å¹…æ¼«ç”»ä½œå“ï¼šâ€œçŒ«å“ºé¼ â€ã€‚\n1991å¹´å†¬ï¼Œå¼ ä¹å¹³å†³å®šå°†ã€Šä¸‰æ¯›ä»å†›è®°ã€‹åŸç¨¿æçŒ®ç»™ä¸Šæµ·ç¾æœ¯é¦†ã€‚\n1992å¹´1æœˆ23æ—¥ï¼Œåœ¨ä¸Šæµ·åä¸œåŒ»é™¢å› å¸å…¥æ€§è‚ºç‚ç—…æƒ…æ¶åŒ–ã€‚\n1992å¹´9æœˆ27æ—¥ä¸‹åˆ6æ—¶ï¼Œå¼ ä¹å¹³åœ¨ä¸Šæµ·åä¸œåŒ»é™¢ä¸ä¸–é•¿è¾ï¼Œäº«å¹´82å²ã€‚\n', 'book_intro': 'ã€Šä¸‰æ¯›æµæµªè®°ã€‹æ‰€æè¿°çš„ä¸‰æ¯›æ‰€ç”Ÿæ´»çš„é‚£ä¸ªæ—¶ä»£ï¼Œå·²ç»æˆä¸ºäº†è¿‡å»ï¼Œä½†æ˜¯äº†è§£è¿‡å»ï¼Œäº†è§£å†å²ï¼Œå´æ˜¯æ¯ä¸ªäººéƒ½å¿…é¡»å®Œæˆçš„ä¸€ä»½ç­”å·ã€‚å› ä¸ºäº†è§£è¿‡å»ï¼Œäº†è§£å†å²å¯ä»¥è®©æˆé•¿çš„è„šæ­¥æ›´æ²‰ç€ã€æ›´åšå®ï¼Œå¯ä»¥è®©è§†é‡æ›´å®½å¹¿ï¼Œå¿ƒèƒ¸æ›´åšå¤§ã€‚åœ¨ä¸€ä¸ªäººæˆé•¿çš„è¿‡ç¨‹ä¸­ï¼Œé™¤äº†æ–°é²œçš„ç©ºæ°”ï¼Œç¿çƒ‚çš„é˜³å…‰ä»¥å¤–ï¼Œæ›´éœ€è¦çš„å†·é™çš„æ€è€ƒï¼Œä»¥åŠå¿ƒçµçš„æ„ŸåŠ¨å’Œéœ‡æ’¼ï¼Œè€Œ ... (90 characters truncated) ... å’Œççˆ±ã€‚\nã€Šä¸‰æ¯›æµæµªè®°ã€‹ä¸ºä»€ä¹ˆç»ä¹…ä¸è¡°ï¼Ÿå› ä¸ºå®ƒæœ‰ç›Šäºäººä»¬çš„å¿ƒçµã€‚æŸ¯çµå…ˆç”Ÿåœ¨é¦™æ¸¯ç‰ˆåºè¨€ä¸­å†™é“ï¼šâ€œã€Šä¸‰æ¯›æµæµªè®°ã€‹æ˜¯ä¸€éƒ¨å¾ˆæœ‰è¶£å‘³çš„å°äººä¹¦ï¼Œä¹Ÿæ˜¯ä¸€éƒ¨ç»™æˆäººçœ‹çš„è­¦ä¸–ä¹¦ã€‚ä¸‰æ¯›èº«ä¸Šï¼ŒèƒŒè´Ÿç€æ²‰é‡çš„å†å²é˜´å½±ï¼Œä¹Ÿå¸¦äº†æ·±åˆ»çš„å†å²å¯ç¤ºï¼Œå‘ä¸–ç•Œå‘¼å”¤å’Œå¹³ï¼Œå‘¼å”¤å…¬æ­£ï¼Œå‘¼å”¤ä»æ…ˆï¼Œå‘¼å”¤åŒæƒ…ï¼Œå‘¼å”¤äººé“ï¼Œå‘¼å”¤æ–‡æ˜ï¼â€\næ‰€...\n', 'content': '', 'tags': ['æ¼«ç”»', 'ä¸‰æ¯›', 'å¼ ä¹å¹³', 'ç«¥å¹´', 'ä¸­å›½æ¼«ç”»', 'ç»å…¸', 'ç»˜æœ¬', 'ä¸­å›½'], 'picture': None}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:32:31] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) é”™è¯¯:  é‡å¤é”®è¿åå”¯ä¸€çº¦æŸ"book_pkey"
DETAIL:  é”®å€¼"(id)=(1000134)" å·²ç»å­˜åœ¨

[SQL: INSERT INTO book (id, title, author, publisher, original_title, translator, pub_year, pages, price, currency_unit, binding, isbn, author_intro, book_intro, content, tags, picture) VALUES (%(id)s, %(title)s, %(author)s, %(publisher)s, %(original_title)s, %(translator)s, %(pub_year)s, %(pages)s, %(price)s, %(currency_unit)s, %(binding)s, %(isbn)s, %(author_intro)s, %(book_intro)s, %(content)s, %(tags)s, %(picture)s)]
[parameters: {'id': '1000134', 'title': 'ä¸‰æ¯›æµæµªè®°å…¨é›†', 'author': 'å¼ ä¹å¹³', 'publisher': 'å°‘å¹´å„¿ç«¥å‡ºç‰ˆç¤¾', 'original_title': None, 'translator': None, 'pub_year': '2001-8-1', 'pages': 261, 'price': 3000, 'currency_unit': 'å…ƒ', 'binding': 'å¹³è£…(æ— ç›˜)', 'isbn': '9787532446674', 'author_intro': 'å¼ ä¹å¹³ï¼Œæ˜¯ä¸­å›½å½“ä»£æœ€æ°å‡ºçš„æ¼«ç”»å®¶ä¹‹ä¸€ã€‚1910å¹´11æœˆ10æ—¥å‡ºç”Ÿäºæµ™æ±Ÿçœæµ·ç›å¿æµ·å¡˜ä¹¡é»„åºµå¤´æ‘ã€‚çˆ¶äº²æ˜¯ä½ä¹¡æ‘æ•™å¸ˆã€‚æ¯äº²æ“…é•¿åˆºç»£ã€å‰ªçº¸ï¼Œæ˜¯å¼ ä¹å¹³æœ€æ—©çš„ç¾æœ¯å¯è’™è€…ã€‚\n1923å¹´ï¼Œåœ¨å°å­¦è€å¸ˆçš„æŒ‡å¯¼ä¸‹ï¼Œå°‘å¹´å¼ ä¹å¹³åˆ›ä½œäº†å¹³ç”Ÿç¬¬ä¸€å¼ æ¼«ç”»ã€Šä¸€è±•è´Ÿäº”åƒå…ƒã€‹ï¼Œè®½åˆºå†›é˜€æ›¹é”Ÿè´¿é€‰ï¼Œåœ¨å½“åœ°åå™ªä¸€æ—¶ã€‚\n1927å¹´åœ¨å®¶ä¹¡å ... (1770 characters truncated) ... æƒ…â€å¾æ–‡ç‰¹ç­‰å¥–ã€‚\n1991å¹´4æœˆ4æ—¥ï¼Œåœ¨ã€Šè§£æ”¾æ—¥æŠ¥ã€‹ä¸Šå‘è¡¨æœ€åä¸€å¹…æ¼«ç”»ä½œå“ï¼šâ€œçŒ«å“ºé¼ â€ã€‚\n1991å¹´å†¬ï¼Œå¼ ä¹å¹³å†³å®šå°†ã€Šä¸‰æ¯›ä»å†›è®°ã€‹åŸç¨¿æçŒ®ç»™ä¸Šæµ·ç¾æœ¯é¦†ã€‚\n1992å¹´1æœˆ23æ—¥ï¼Œåœ¨ä¸Šæµ·åä¸œåŒ»é™¢å› å¸å…¥æ€§è‚ºç‚ç—…æƒ…æ¶åŒ–ã€‚\n1992å¹´9æœˆ27æ—¥ä¸‹åˆ6æ—¶ï¼Œå¼ ä¹å¹³åœ¨ä¸Šæµ·åä¸œåŒ»é™¢ä¸ä¸–é•¿è¾ï¼Œäº«å¹´82å²ã€‚\n', 'book_intro': 'ã€Šä¸‰æ¯›æµæµªè®°ã€‹æ‰€æè¿°çš„ä¸‰æ¯›æ‰€ç”Ÿæ´»çš„é‚£ä¸ªæ—¶ä»£ï¼Œå·²ç»æˆä¸ºäº†è¿‡å»ï¼Œä½†æ˜¯äº†è§£è¿‡å»ï¼Œäº†è§£å†å²ï¼Œå´æ˜¯æ¯ä¸ªäººéƒ½å¿…é¡»å®Œæˆçš„ä¸€ä»½ç­”å·ã€‚å› ä¸ºäº†è§£è¿‡å»ï¼Œäº†è§£å†å²å¯ä»¥è®©æˆé•¿çš„è„šæ­¥æ›´æ²‰ç€ã€æ›´åšå®ï¼Œå¯ä»¥è®©è§†é‡æ›´å®½å¹¿ï¼Œå¿ƒèƒ¸æ›´åšå¤§ã€‚åœ¨ä¸€ä¸ªäººæˆé•¿çš„è¿‡ç¨‹ä¸­ï¼Œé™¤äº†æ–°é²œçš„ç©ºæ°”ï¼Œç¿çƒ‚çš„é˜³å…‰ä»¥å¤–ï¼Œæ›´éœ€è¦çš„å†·é™çš„æ€è€ƒï¼Œä»¥åŠå¿ƒçµçš„æ„ŸåŠ¨å’Œéœ‡æ’¼ï¼Œè€Œ ... (90 characters truncated) ... å’Œççˆ±ã€‚\nã€Šä¸‰æ¯›æµæµªè®°ã€‹ä¸ºä»€ä¹ˆç»ä¹…ä¸è¡°ï¼Ÿå› ä¸ºå®ƒæœ‰ç›Šäºäººä»¬çš„å¿ƒçµã€‚æŸ¯çµå…ˆç”Ÿåœ¨é¦™æ¸¯ç‰ˆåºè¨€ä¸­å†™é“ï¼šâ€œã€Šä¸‰æ¯›æµæµªè®°ã€‹æ˜¯ä¸€éƒ¨å¾ˆæœ‰è¶£å‘³çš„å°äººä¹¦ï¼Œä¹Ÿæ˜¯ä¸€éƒ¨ç»™æˆäººçœ‹çš„è­¦ä¸–ä¹¦ã€‚ä¸‰æ¯›èº«ä¸Šï¼ŒèƒŒè´Ÿç€æ²‰é‡çš„å†å²é˜´å½±ï¼Œä¹Ÿå¸¦äº†æ·±åˆ»çš„å†å²å¯ç¤ºï¼Œå‘ä¸–ç•Œå‘¼å”¤å’Œå¹³ï¼Œå‘¼å”¤å…¬æ­£ï¼Œå‘¼å”¤ä»æ…ˆï¼Œå‘¼å”¤åŒæƒ…ï¼Œå‘¼å”¤äººé“ï¼Œå‘¼å”¤æ–‡æ˜ï¼â€\næ‰€...\n', 'content': '', 'tags': ['æ¼«ç”»', 'ä¸‰æ¯›', 'å¼ ä¹å¹³', 'ç«¥å¹´', 'ä¸­å›½æ¼«ç”»', 'ç»å…¸', 'ç»˜æœ¬', 'ä¸­å›½'], 'picture': None}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:32:31] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) é”™è¯¯:  é‡å¤é”®è¿åå”¯ä¸€çº¦æŸ"book_pkey"
DETAIL:  é”®å€¼"(id)=(1000134)" å·²ç»å­˜åœ¨

[SQL: INSERT INTO book (id, title, author, publisher, original_title, translator, pub_year, pages, price, currency_unit, binding, isbn, author_intro, book_intro, content, tags, picture) VALUES (%(id)s, %(title)s, %(author)s, %(publisher)s, %(original_title)s, %(translator)s, %(pub_year)s, %(pages)s, %(price)s, %(currency_unit)s, %(binding)s, %(isbn)s, %(author_intro)s, %(book_intro)s, %(content)s, %(tags)s, %(picture)s)]
[parameters: {'id': '1000134', 'title': 'ä¸‰æ¯›æµæµªè®°å…¨é›†', 'author': 'å¼ ä¹å¹³', 'publisher': 'å°‘å¹´å„¿ç«¥å‡ºç‰ˆç¤¾', 'original_title': None, 'translator': None, 'pub_year': '2001-8-1', 'pages': 261, 'price': 3000, 'currency_unit': 'å…ƒ', 'binding': 'å¹³è£…(æ— ç›˜)', 'isbn': '9787532446674', 'author_intro': 'å¼ ä¹å¹³ï¼Œæ˜¯ä¸­å›½å½“ä»£æœ€æ°å‡ºçš„æ¼«ç”»å®¶ä¹‹ä¸€ã€‚1910å¹´11æœˆ10æ—¥å‡ºç”Ÿäºæµ™æ±Ÿçœæµ·ç›å¿æµ·å¡˜ä¹¡é»„åºµå¤´æ‘ã€‚çˆ¶äº²æ˜¯ä½ä¹¡æ‘æ•™å¸ˆã€‚æ¯äº²æ“…é•¿åˆºç»£ã€å‰ªçº¸ï¼Œæ˜¯å¼ ä¹å¹³æœ€æ—©çš„ç¾æœ¯å¯è’™è€…ã€‚\n1923å¹´ï¼Œåœ¨å°å­¦è€å¸ˆçš„æŒ‡å¯¼ä¸‹ï¼Œå°‘å¹´å¼ ä¹å¹³åˆ›ä½œäº†å¹³ç”Ÿç¬¬ä¸€å¼ æ¼«ç”»ã€Šä¸€è±•è´Ÿäº”åƒå…ƒã€‹ï¼Œè®½åˆºå†›é˜€æ›¹é”Ÿè´¿é€‰ï¼Œåœ¨å½“åœ°åå™ªä¸€æ—¶ã€‚\n1927å¹´åœ¨å®¶ä¹¡å ... (1770 characters truncated) ... æƒ…â€å¾æ–‡ç‰¹ç­‰å¥–ã€‚\n1991å¹´4æœˆ4æ—¥ï¼Œåœ¨ã€Šè§£æ”¾æ—¥æŠ¥ã€‹ä¸Šå‘è¡¨æœ€åä¸€å¹…æ¼«ç”»ä½œå“ï¼šâ€œçŒ«å“ºé¼ â€ã€‚\n1991å¹´å†¬ï¼Œå¼ ä¹å¹³å†³å®šå°†ã€Šä¸‰æ¯›ä»å†›è®°ã€‹åŸç¨¿æçŒ®ç»™ä¸Šæµ·ç¾æœ¯é¦†ã€‚\n1992å¹´1æœˆ23æ—¥ï¼Œåœ¨ä¸Šæµ·åä¸œåŒ»é™¢å› å¸å…¥æ€§è‚ºç‚ç—…æƒ…æ¶åŒ–ã€‚\n1992å¹´9æœˆ27æ—¥ä¸‹åˆ6æ—¶ï¼Œå¼ ä¹å¹³åœ¨ä¸Šæµ·åä¸œåŒ»é™¢ä¸ä¸–é•¿è¾ï¼Œäº«å¹´82å²ã€‚\n', 'book_intro': 'ã€Šä¸‰æ¯›æµæµªè®°ã€‹æ‰€æè¿°çš„ä¸‰æ¯›æ‰€ç”Ÿæ´»çš„é‚£ä¸ªæ—¶ä»£ï¼Œå·²ç»æˆä¸ºäº†è¿‡å»ï¼Œä½†æ˜¯äº†è§£è¿‡å»ï¼Œäº†è§£å†å²ï¼Œå´æ˜¯æ¯ä¸ªäººéƒ½å¿…é¡»å®Œæˆçš„ä¸€ä»½ç­”å·ã€‚å› ä¸ºäº†è§£è¿‡å»ï¼Œäº†è§£å†å²å¯ä»¥è®©æˆé•¿çš„è„šæ­¥æ›´æ²‰ç€ã€æ›´åšå®ï¼Œå¯ä»¥è®©è§†é‡æ›´å®½å¹¿ï¼Œå¿ƒèƒ¸æ›´åšå¤§ã€‚åœ¨ä¸€ä¸ªäººæˆé•¿çš„è¿‡ç¨‹ä¸­ï¼Œé™¤äº†æ–°é²œçš„ç©ºæ°”ï¼Œç¿çƒ‚çš„é˜³å…‰ä»¥å¤–ï¼Œæ›´éœ€è¦çš„å†·é™çš„æ€è€ƒï¼Œä»¥åŠå¿ƒçµçš„æ„ŸåŠ¨å’Œéœ‡æ’¼ï¼Œè€Œ ... (90 characters truncated) ... å’Œççˆ±ã€‚\nã€Šä¸‰æ¯›æµæµªè®°ã€‹ä¸ºä»€ä¹ˆç»ä¹…ä¸è¡°ï¼Ÿå› ä¸ºå®ƒæœ‰ç›Šäºäººä»¬çš„å¿ƒçµã€‚æŸ¯çµå…ˆç”Ÿåœ¨é¦™æ¸¯ç‰ˆåºè¨€ä¸­å†™é“ï¼šâ€œã€Šä¸‰æ¯›æµæµªè®°ã€‹æ˜¯ä¸€éƒ¨å¾ˆæœ‰è¶£å‘³çš„å°äººä¹¦ï¼Œä¹Ÿæ˜¯ä¸€éƒ¨ç»™æˆäººçœ‹çš„è­¦ä¸–ä¹¦ã€‚ä¸‰æ¯›èº«ä¸Šï¼ŒèƒŒè´Ÿç€æ²‰é‡çš„å†å²é˜´å½±ï¼Œä¹Ÿå¸¦äº†æ·±åˆ»çš„å†å²å¯ç¤ºï¼Œå‘ä¸–ç•Œå‘¼å”¤å’Œå¹³ï¼Œå‘¼å”¤å…¬æ­£ï¼Œå‘¼å”¤ä»æ…ˆï¼Œå‘¼å”¤åŒæƒ…ï¼Œå‘¼å”¤äººé“ï¼Œå‘¼å”¤æ–‡æ˜ï¼â€\næ‰€...\n', 'content': '', 'tags': ['æ¼«ç”»', 'ä¸‰æ¯›', 'å¼ ä¹å¹³', 'ç«¥å¹´', 'ä¸­å›½æ¼«ç”»', 'ç»å…¸', 'ç»˜æœ¬', 'ä¸­å›½'], 'picture': None}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:32:31] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) é”™è¯¯:  é‡å¤é”®è¿åå”¯ä¸€çº¦æŸ"book_pkey"
DETAIL:  é”®å€¼"(id)=(1000134)" å·²ç»å­˜åœ¨

[SQL: INSERT INTO book (id, title, author, publisher, original_title, translator, pub_year, pages, price, currency_unit, binding, isbn, author_intro, book_intro, content, tags, picture) VALUES (%(id)s, %(title)s, %(author)s, %(publisher)s, %(original_title)s, %(translator)s, %(pub_year)s, %(pages)s, %(price)s, %(currency_unit)s, %(binding)s, %(isbn)s, %(author_intro)s, %(book_intro)s, %(content)s, %(tags)s, %(picture)s)]
[parameters: {'id': '1000134', 'title': 'ä¸‰æ¯›æµæµªè®°å…¨é›†', 'author': 'å¼ ä¹å¹³', 'publisher': 'å°‘å¹´å„¿ç«¥å‡ºç‰ˆç¤¾', 'original_title': None, 'translator': None, 'pub_year': '2001-8-1', 'pages': 261, 'price': 3000, 'currency_unit': 'å…ƒ', 'binding': 'å¹³è£…(æ— ç›˜)', 'isbn': '9787532446674', 'author_intro': 'å¼ ä¹å¹³ï¼Œæ˜¯ä¸­å›½å½“ä»£æœ€æ°å‡ºçš„æ¼«ç”»å®¶ä¹‹ä¸€ã€‚1910å¹´11æœˆ10æ—¥å‡ºç”Ÿäºæµ™æ±Ÿçœæµ·ç›å¿æµ·å¡˜ä¹¡é»„åºµå¤´æ‘ã€‚çˆ¶äº²æ˜¯ä½ä¹¡æ‘æ•™å¸ˆã€‚æ¯äº²æ“…é•¿åˆºç»£ã€å‰ªçº¸ï¼Œæ˜¯å¼ ä¹å¹³æœ€æ—©çš„ç¾æœ¯å¯è’™è€…ã€‚\n1923å¹´ï¼Œåœ¨å°å­¦è€å¸ˆçš„æŒ‡å¯¼ä¸‹ï¼Œå°‘å¹´å¼ ä¹å¹³åˆ›ä½œäº†å¹³ç”Ÿç¬¬ä¸€å¼ æ¼«ç”»ã€Šä¸€è±•è´Ÿäº”åƒå…ƒã€‹ï¼Œè®½åˆºå†›é˜€æ›¹é”Ÿè´¿é€‰ï¼Œåœ¨å½“åœ°åå™ªä¸€æ—¶ã€‚\n1927å¹´åœ¨å®¶ä¹¡å ... (1770 characters truncated) ... æƒ…â€å¾æ–‡ç‰¹ç­‰å¥–ã€‚\n1991å¹´4æœˆ4æ—¥ï¼Œåœ¨ã€Šè§£æ”¾æ—¥æŠ¥ã€‹ä¸Šå‘è¡¨æœ€åä¸€å¹…æ¼«ç”»ä½œå“ï¼šâ€œçŒ«å“ºé¼ â€ã€‚\n1991å¹´å†¬ï¼Œå¼ ä¹å¹³å†³å®šå°†ã€Šä¸‰æ¯›ä»å†›è®°ã€‹åŸç¨¿æçŒ®ç»™ä¸Šæµ·ç¾æœ¯é¦†ã€‚\n1992å¹´1æœˆ23æ—¥ï¼Œåœ¨ä¸Šæµ·åä¸œåŒ»é™¢å› å¸å…¥æ€§è‚ºç‚ç—…æƒ…æ¶åŒ–ã€‚\n1992å¹´9æœˆ27æ—¥ä¸‹åˆ6æ—¶ï¼Œå¼ ä¹å¹³åœ¨ä¸Šæµ·åä¸œåŒ»é™¢ä¸ä¸–é•¿è¾ï¼Œäº«å¹´82å²ã€‚\n', 'book_intro': 'ã€Šä¸‰æ¯›æµæµªè®°ã€‹æ‰€æè¿°çš„ä¸‰æ¯›æ‰€ç”Ÿæ´»çš„é‚£ä¸ªæ—¶ä»£ï¼Œå·²ç»æˆä¸ºäº†è¿‡å»ï¼Œä½†æ˜¯äº†è§£è¿‡å»ï¼Œäº†è§£å†å²ï¼Œå´æ˜¯æ¯ä¸ªäººéƒ½å¿…é¡»å®Œæˆçš„ä¸€ä»½ç­”å·ã€‚å› ä¸ºäº†è§£è¿‡å»ï¼Œäº†è§£å†å²å¯ä»¥è®©æˆé•¿çš„è„šæ­¥æ›´æ²‰ç€ã€æ›´åšå®ï¼Œå¯ä»¥è®©è§†é‡æ›´å®½å¹¿ï¼Œå¿ƒèƒ¸æ›´åšå¤§ã€‚åœ¨ä¸€ä¸ªäººæˆé•¿çš„è¿‡ç¨‹ä¸­ï¼Œé™¤äº†æ–°é²œçš„ç©ºæ°”ï¼Œç¿çƒ‚çš„é˜³å…‰ä»¥å¤–ï¼Œæ›´éœ€è¦çš„å†·é™çš„æ€è€ƒï¼Œä»¥åŠå¿ƒçµçš„æ„ŸåŠ¨å’Œéœ‡æ’¼ï¼Œè€Œ ... (90 characters truncated) ... å’Œççˆ±ã€‚\nã€Šä¸‰æ¯›æµæµªè®°ã€‹ä¸ºä»€ä¹ˆç»ä¹…ä¸è¡°ï¼Ÿå› ä¸ºå®ƒæœ‰ç›Šäºäººä»¬çš„å¿ƒçµã€‚æŸ¯çµå…ˆç”Ÿåœ¨é¦™æ¸¯ç‰ˆåºè¨€ä¸­å†™é“ï¼šâ€œã€Šä¸‰æ¯›æµæµªè®°ã€‹æ˜¯ä¸€éƒ¨å¾ˆæœ‰è¶£å‘³çš„å°äººä¹¦ï¼Œä¹Ÿæ˜¯ä¸€éƒ¨ç»™æˆäººçœ‹çš„è­¦ä¸–ä¹¦ã€‚ä¸‰æ¯›èº«ä¸Šï¼ŒèƒŒè´Ÿç€æ²‰é‡çš„å†å²é˜´å½±ï¼Œä¹Ÿå¸¦äº†æ·±åˆ»çš„å†å²å¯ç¤ºï¼Œå‘ä¸–ç•Œå‘¼å”¤å’Œå¹³ï¼Œå‘¼å”¤å…¬æ­£ï¼Œå‘¼å”¤ä»æ…ˆï¼Œå‘¼å”¤åŒæƒ…ï¼Œå‘¼å”¤äººé“ï¼Œå‘¼å”¤æ–‡æ˜ï¼â€\næ‰€...\n', 'content': '', 'tags': ['æ¼«ç”»', 'ä¸‰æ¯›', 'å¼ ä¹å¹³', 'ç«¥å¹´', 'ä¸­å›½æ¼«ç”»', 'ç»å…¸', 'ç»˜æœ¬', 'ä¸­å›½'], 'picture': None}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:32:31] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) é”™è¯¯:  é‡å¤é”®è¿åå”¯ä¸€çº¦æŸ"book_pkey"
DETAIL:  é”®å€¼"(id)=(1000134)" å·²ç»å­˜åœ¨

[SQL: INSERT INTO book (id, title, author, publisher, original_title, translator, pub_year, pages, price, currency_unit, binding, isbn, author_intro, book_intro, content, tags, picture) VALUES (%(id)s, %(title)s, %(author)s, %(publisher)s, %(original_title)s, %(translator)s, %(pub_year)s, %(pages)s, %(price)s, %(currency_unit)s, %(binding)s, %(isbn)s, %(author_intro)s, %(book_intro)s, %(content)s, %(tags)s, %(picture)s)]
[parameters: {'id': '1000134', 'title': 'ä¸‰æ¯›æµæµªè®°å…¨é›†', 'author': 'å¼ ä¹å¹³', 'publisher': 'å°‘å¹´å„¿ç«¥å‡ºç‰ˆç¤¾', 'original_title': None, 'translator': None, 'pub_year': '2001-8-1', 'pages': 261, 'price': 3000, 'currency_unit': 'å…ƒ', 'binding': 'å¹³è£…(æ— ç›˜)', 'isbn': '9787532446674', 'author_intro': 'å¼ ä¹å¹³ï¼Œæ˜¯ä¸­å›½å½“ä»£æœ€æ°å‡ºçš„æ¼«ç”»å®¶ä¹‹ä¸€ã€‚1910å¹´11æœˆ10æ—¥å‡ºç”Ÿäºæµ™æ±Ÿçœæµ·ç›å¿æµ·å¡˜ä¹¡é»„åºµå¤´æ‘ã€‚çˆ¶äº²æ˜¯ä½ä¹¡æ‘æ•™å¸ˆã€‚æ¯äº²æ“…é•¿åˆºç»£ã€å‰ªçº¸ï¼Œæ˜¯å¼ ä¹å¹³æœ€æ—©çš„ç¾æœ¯å¯è’™è€…ã€‚\n1923å¹´ï¼Œåœ¨å°å­¦è€å¸ˆçš„æŒ‡å¯¼ä¸‹ï¼Œå°‘å¹´å¼ ä¹å¹³åˆ›ä½œäº†å¹³ç”Ÿç¬¬ä¸€å¼ æ¼«ç”»ã€Šä¸€è±•è´Ÿäº”åƒå…ƒã€‹ï¼Œè®½åˆºå†›é˜€æ›¹é”Ÿè´¿é€‰ï¼Œåœ¨å½“åœ°åå™ªä¸€æ—¶ã€‚\n1927å¹´åœ¨å®¶ä¹¡å ... (1770 characters truncated) ... æƒ…â€å¾æ–‡ç‰¹ç­‰å¥–ã€‚\n1991å¹´4æœˆ4æ—¥ï¼Œåœ¨ã€Šè§£æ”¾æ—¥æŠ¥ã€‹ä¸Šå‘è¡¨æœ€åä¸€å¹…æ¼«ç”»ä½œå“ï¼šâ€œçŒ«å“ºé¼ â€ã€‚\n1991å¹´å†¬ï¼Œå¼ ä¹å¹³å†³å®šå°†ã€Šä¸‰æ¯›ä»å†›è®°ã€‹åŸç¨¿æçŒ®ç»™ä¸Šæµ·ç¾æœ¯é¦†ã€‚\n1992å¹´1æœˆ23æ—¥ï¼Œåœ¨ä¸Šæµ·åä¸œåŒ»é™¢å› å¸å…¥æ€§è‚ºç‚ç—…æƒ…æ¶åŒ–ã€‚\n1992å¹´9æœˆ27æ—¥ä¸‹åˆ6æ—¶ï¼Œå¼ ä¹å¹³åœ¨ä¸Šæµ·åä¸œåŒ»é™¢ä¸ä¸–é•¿è¾ï¼Œäº«å¹´82å²ã€‚\n', 'book_intro': 'ã€Šä¸‰æ¯›æµæµªè®°ã€‹æ‰€æè¿°çš„ä¸‰æ¯›æ‰€ç”Ÿæ´»çš„é‚£ä¸ªæ—¶ä»£ï¼Œå·²ç»æˆä¸ºäº†è¿‡å»ï¼Œä½†æ˜¯äº†è§£è¿‡å»ï¼Œäº†è§£å†å²ï¼Œå´æ˜¯æ¯ä¸ªäººéƒ½å¿…é¡»å®Œæˆçš„ä¸€ä»½ç­”å·ã€‚å› ä¸ºäº†è§£è¿‡å»ï¼Œäº†è§£å†å²å¯ä»¥è®©æˆé•¿çš„è„šæ­¥æ›´æ²‰ç€ã€æ›´åšå®ï¼Œå¯ä»¥è®©è§†é‡æ›´å®½å¹¿ï¼Œå¿ƒèƒ¸æ›´åšå¤§ã€‚åœ¨ä¸€ä¸ªäººæˆé•¿çš„è¿‡ç¨‹ä¸­ï¼Œé™¤äº†æ–°é²œçš„ç©ºæ°”ï¼Œç¿çƒ‚çš„é˜³å…‰ä»¥å¤–ï¼Œæ›´éœ€è¦çš„å†·é™çš„æ€è€ƒï¼Œä»¥åŠå¿ƒçµçš„æ„ŸåŠ¨å’Œéœ‡æ’¼ï¼Œè€Œ ... (90 characters truncated) ... å’Œççˆ±ã€‚\nã€Šä¸‰æ¯›æµæµªè®°ã€‹ä¸ºä»€ä¹ˆç»ä¹…ä¸è¡°ï¼Ÿå› ä¸ºå®ƒæœ‰ç›Šäºäººä»¬çš„å¿ƒçµã€‚æŸ¯çµå…ˆç”Ÿåœ¨é¦™æ¸¯ç‰ˆåºè¨€ä¸­å†™é“ï¼šâ€œã€Šä¸‰æ¯›æµæµªè®°ã€‹æ˜¯ä¸€éƒ¨å¾ˆæœ‰è¶£å‘³çš„å°äººä¹¦ï¼Œä¹Ÿæ˜¯ä¸€éƒ¨ç»™æˆäººçœ‹çš„è­¦ä¸–ä¹¦ã€‚ä¸‰æ¯›èº«ä¸Šï¼ŒèƒŒè´Ÿç€æ²‰é‡çš„å†å²é˜´å½±ï¼Œä¹Ÿå¸¦äº†æ·±åˆ»çš„å†å²å¯ç¤ºï¼Œå‘ä¸–ç•Œå‘¼å”¤å’Œå¹³ï¼Œå‘¼å”¤å…¬æ­£ï¼Œå‘¼å”¤ä»æ…ˆï¼Œå‘¼å”¤åŒæƒ…ï¼Œå‘¼å”¤äººé“ï¼Œå‘¼å”¤æ–‡æ˜ï¼â€\næ‰€...\n', 'content': '', 'tags': ['æ¼«ç”»', 'ä¸‰æ¯›', 'å¼ ä¹å¹³', 'ç«¥å¹´', 'ä¸­å›½æ¼«ç”»', 'ç»å…¸', 'ç»˜æœ¬', 'ä¸­å›½'], 'picture': None}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:32:31] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) é”™è¯¯:  é‡å¤é”®è¿åå”¯ä¸€çº¦æŸ"book_pkey"
DETAIL:  é”®å€¼"(id)=(1000134)" å·²ç»å­˜åœ¨

[SQL: INSERT INTO book (id, title, author, publisher, original_title, translator, pub_year, pages, price, currency_unit, binding, isbn, author_intro, book_intro, content, tags, picture) VALUES (%(id)s, %(title)s, %(author)s, %(publisher)s, %(original_title)s, %(translator)s, %(pub_year)s, %(pages)s, %(price)s, %(currency_unit)s, %(binding)s, %(isbn)s, %(author_intro)s, %(book_intro)s, %(content)s, %(tags)s, %(picture)s)]
[parameters: {'id': '1000134', 'title': 'ä¸‰æ¯›æµæµªè®°å…¨é›†', 'author': 'å¼ ä¹å¹³', 'publisher': 'å°‘å¹´å„¿ç«¥å‡ºç‰ˆç¤¾', 'original_title': None, 'translator': None, 'pub_year': '2001-8-1', 'pages': 261, 'price': 3000, 'currency_unit': 'å…ƒ', 'binding': 'å¹³è£…(æ— ç›˜)', 'isbn': '9787532446674', 'author_intro': 'å¼ ä¹å¹³ï¼Œæ˜¯ä¸­å›½å½“ä»£æœ€æ°å‡ºçš„æ¼«ç”»å®¶ä¹‹ä¸€ã€‚1910å¹´11æœˆ10æ—¥å‡ºç”Ÿäºæµ™æ±Ÿçœæµ·ç›å¿æµ·å¡˜ä¹¡é»„åºµå¤´æ‘ã€‚çˆ¶äº²æ˜¯ä½ä¹¡æ‘æ•™å¸ˆã€‚æ¯äº²æ“…é•¿åˆºç»£ã€å‰ªçº¸ï¼Œæ˜¯å¼ ä¹å¹³æœ€æ—©çš„ç¾æœ¯å¯è’™è€…ã€‚\n1923å¹´ï¼Œåœ¨å°å­¦è€å¸ˆçš„æŒ‡å¯¼ä¸‹ï¼Œå°‘å¹´å¼ ä¹å¹³åˆ›ä½œäº†å¹³ç”Ÿç¬¬ä¸€å¼ æ¼«ç”»ã€Šä¸€è±•è´Ÿäº”åƒå…ƒã€‹ï¼Œè®½åˆºå†›é˜€æ›¹é”Ÿè´¿é€‰ï¼Œåœ¨å½“åœ°åå™ªä¸€æ—¶ã€‚\n1927å¹´åœ¨å®¶ä¹¡å ... (1770 characters truncated) ... æƒ…â€å¾æ–‡ç‰¹ç­‰å¥–ã€‚\n1991å¹´4æœˆ4æ—¥ï¼Œåœ¨ã€Šè§£æ”¾æ—¥æŠ¥ã€‹ä¸Šå‘è¡¨æœ€åä¸€å¹…æ¼«ç”»ä½œå“ï¼šâ€œçŒ«å“ºé¼ â€ã€‚\n1991å¹´å†¬ï¼Œå¼ ä¹å¹³å†³å®šå°†ã€Šä¸‰æ¯›ä»å†›è®°ã€‹åŸç¨¿æçŒ®ç»™ä¸Šæµ·ç¾æœ¯é¦†ã€‚\n1992å¹´1æœˆ23æ—¥ï¼Œåœ¨ä¸Šæµ·åä¸œåŒ»é™¢å› å¸å…¥æ€§è‚ºç‚ç—…æƒ…æ¶åŒ–ã€‚\n1992å¹´9æœˆ27æ—¥ä¸‹åˆ6æ—¶ï¼Œå¼ ä¹å¹³åœ¨ä¸Šæµ·åä¸œåŒ»é™¢ä¸ä¸–é•¿è¾ï¼Œäº«å¹´82å²ã€‚\n', 'book_intro': 'ã€Šä¸‰æ¯›æµæµªè®°ã€‹æ‰€æè¿°çš„ä¸‰æ¯›æ‰€ç”Ÿæ´»çš„é‚£ä¸ªæ—¶ä»£ï¼Œå·²ç»æˆä¸ºäº†è¿‡å»ï¼Œä½†æ˜¯äº†è§£è¿‡å»ï¼Œäº†è§£å†å²ï¼Œå´æ˜¯æ¯ä¸ªäººéƒ½å¿…é¡»å®Œæˆçš„ä¸€ä»½ç­”å·ã€‚å› ä¸ºäº†è§£è¿‡å»ï¼Œäº†è§£å†å²å¯ä»¥è®©æˆé•¿çš„è„šæ­¥æ›´æ²‰ç€ã€æ›´åšå®ï¼Œå¯ä»¥è®©è§†é‡æ›´å®½å¹¿ï¼Œå¿ƒèƒ¸æ›´åšå¤§ã€‚åœ¨ä¸€ä¸ªäººæˆé•¿çš„è¿‡ç¨‹ä¸­ï¼Œé™¤äº†æ–°é²œçš„ç©ºæ°”ï¼Œç¿çƒ‚çš„é˜³å…‰ä»¥å¤–ï¼Œæ›´éœ€è¦çš„å†·é™çš„æ€è€ƒï¼Œä»¥åŠå¿ƒçµçš„æ„ŸåŠ¨å’Œéœ‡æ’¼ï¼Œè€Œ ... (90 characters truncated) ... å’Œççˆ±ã€‚\nã€Šä¸‰æ¯›æµæµªè®°ã€‹ä¸ºä»€ä¹ˆç»ä¹…ä¸è¡°ï¼Ÿå› ä¸ºå®ƒæœ‰ç›Šäºäººä»¬çš„å¿ƒçµã€‚æŸ¯çµå…ˆç”Ÿåœ¨é¦™æ¸¯ç‰ˆåºè¨€ä¸­å†™é“ï¼šâ€œã€Šä¸‰æ¯›æµæµªè®°ã€‹æ˜¯ä¸€éƒ¨å¾ˆæœ‰è¶£å‘³çš„å°äººä¹¦ï¼Œä¹Ÿæ˜¯ä¸€éƒ¨ç»™æˆäººçœ‹çš„è­¦ä¸–ä¹¦ã€‚ä¸‰æ¯›èº«ä¸Šï¼ŒèƒŒè´Ÿç€æ²‰é‡çš„å†å²é˜´å½±ï¼Œä¹Ÿå¸¦äº†æ·±åˆ»çš„å†å²å¯ç¤ºï¼Œå‘ä¸–ç•Œå‘¼å”¤å’Œå¹³ï¼Œå‘¼å”¤å…¬æ­£ï¼Œå‘¼å”¤ä»æ…ˆï¼Œå‘¼å”¤åŒæƒ…ï¼Œå‘¼å”¤äººé“ï¼Œå‘¼å”¤æ–‡æ˜ï¼â€\næ‰€...\n', 'content': '', 'tags': ['æ¼«ç”»', 'ä¸‰æ¯›', 'å¼ ä¹å¹³', 'ç«¥å¹´', 'ä¸­å›½æ¼«ç”»', 'ç»å…¸', 'ç»˜æœ¬', 'ä¸­å›½'], 'picture': None}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:32:31] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) é”™è¯¯:  é‡å¤é”®è¿åå”¯ä¸€çº¦æŸ"book_pkey"
DETAIL:  é”®å€¼"(id)=(1000134)" å·²ç»å­˜åœ¨

[SQL: INSERT INTO book (id, title, author, publisher, original_title, translator, pub_year, pages, price, currency_unit, binding, isbn, author_intro, book_intro, content, tags, picture) VALUES (%(id)s, %(title)s, %(author)s, %(publisher)s, %(original_title)s, %(translator)s, %(pub_year)s, %(pages)s, %(price)s, %(currency_unit)s, %(binding)s, %(isbn)s, %(author_intro)s, %(book_intro)s, %(content)s, %(tags)s, %(picture)s)]
[parameters: {'id': '1000134', 'title': 'ä¸‰æ¯›æµæµªè®°å…¨é›†', 'author': 'å¼ ä¹å¹³', 'publisher': 'å°‘å¹´å„¿ç«¥å‡ºç‰ˆç¤¾', 'original_title': None, 'translator': None, 'pub_year': '2001-8-1', 'pages': 261, 'price': 3000, 'currency_unit': 'å…ƒ', 'binding': 'å¹³è£…(æ— ç›˜)', 'isbn': '9787532446674', 'author_intro': 'å¼ ä¹å¹³ï¼Œæ˜¯ä¸­å›½å½“ä»£æœ€æ°å‡ºçš„æ¼«ç”»å®¶ä¹‹ä¸€ã€‚1910å¹´11æœˆ10æ—¥å‡ºç”Ÿäºæµ™æ±Ÿçœæµ·ç›å¿æµ·å¡˜ä¹¡é»„åºµå¤´æ‘ã€‚çˆ¶äº²æ˜¯ä½ä¹¡æ‘æ•™å¸ˆã€‚æ¯äº²æ“…é•¿åˆºç»£ã€å‰ªçº¸ï¼Œæ˜¯å¼ ä¹å¹³æœ€æ—©çš„ç¾æœ¯å¯è’™è€…ã€‚\n1923å¹´ï¼Œåœ¨å°å­¦è€å¸ˆçš„æŒ‡å¯¼ä¸‹ï¼Œå°‘å¹´å¼ ä¹å¹³åˆ›ä½œäº†å¹³ç”Ÿç¬¬ä¸€å¼ æ¼«ç”»ã€Šä¸€è±•è´Ÿäº”åƒå…ƒã€‹ï¼Œè®½åˆºå†›é˜€æ›¹é”Ÿè´¿é€‰ï¼Œåœ¨å½“åœ°åå™ªä¸€æ—¶ã€‚\n1927å¹´åœ¨å®¶ä¹¡å ... (1770 characters truncated) ... æƒ…â€å¾æ–‡ç‰¹ç­‰å¥–ã€‚\n1991å¹´4æœˆ4æ—¥ï¼Œåœ¨ã€Šè§£æ”¾æ—¥æŠ¥ã€‹ä¸Šå‘è¡¨æœ€åä¸€å¹…æ¼«ç”»ä½œå“ï¼šâ€œçŒ«å“ºé¼ â€ã€‚\n1991å¹´å†¬ï¼Œå¼ ä¹å¹³å†³å®šå°†ã€Šä¸‰æ¯›ä»å†›è®°ã€‹åŸç¨¿æçŒ®ç»™ä¸Šæµ·ç¾æœ¯é¦†ã€‚\n1992å¹´1æœˆ23æ—¥ï¼Œåœ¨ä¸Šæµ·åä¸œåŒ»é™¢å› å¸å…¥æ€§è‚ºç‚ç—…æƒ…æ¶åŒ–ã€‚\n1992å¹´9æœˆ27æ—¥ä¸‹åˆ6æ—¶ï¼Œå¼ ä¹å¹³åœ¨ä¸Šæµ·åä¸œåŒ»é™¢ä¸ä¸–é•¿è¾ï¼Œäº«å¹´82å²ã€‚\n', 'book_intro': 'ã€Šä¸‰æ¯›æµæµªè®°ã€‹æ‰€æè¿°çš„ä¸‰æ¯›æ‰€ç”Ÿæ´»çš„é‚£ä¸ªæ—¶ä»£ï¼Œå·²ç»æˆä¸ºäº†è¿‡å»ï¼Œä½†æ˜¯äº†è§£è¿‡å»ï¼Œäº†è§£å†å²ï¼Œå´æ˜¯æ¯ä¸ªäººéƒ½å¿…é¡»å®Œæˆçš„ä¸€ä»½ç­”å·ã€‚å› ä¸ºäº†è§£è¿‡å»ï¼Œäº†è§£å†å²å¯ä»¥è®©æˆé•¿çš„è„šæ­¥æ›´æ²‰ç€ã€æ›´åšå®ï¼Œå¯ä»¥è®©è§†é‡æ›´å®½å¹¿ï¼Œå¿ƒèƒ¸æ›´åšå¤§ã€‚åœ¨ä¸€ä¸ªäººæˆé•¿çš„è¿‡ç¨‹ä¸­ï¼Œé™¤äº†æ–°é²œçš„ç©ºæ°”ï¼Œç¿çƒ‚çš„é˜³å…‰ä»¥å¤–ï¼Œæ›´éœ€è¦çš„å†·é™çš„æ€è€ƒï¼Œä»¥åŠå¿ƒçµçš„æ„ŸåŠ¨å’Œéœ‡æ’¼ï¼Œè€Œ ... (90 characters truncated) ... å’Œççˆ±ã€‚\nã€Šä¸‰æ¯›æµæµªè®°ã€‹ä¸ºä»€ä¹ˆç»ä¹…ä¸è¡°ï¼Ÿå› ä¸ºå®ƒæœ‰ç›Šäºäººä»¬çš„å¿ƒçµã€‚æŸ¯çµå…ˆç”Ÿåœ¨é¦™æ¸¯ç‰ˆåºè¨€ä¸­å†™é“ï¼šâ€œã€Šä¸‰æ¯›æµæµªè®°ã€‹æ˜¯ä¸€éƒ¨å¾ˆæœ‰è¶£å‘³çš„å°äººä¹¦ï¼Œä¹Ÿæ˜¯ä¸€éƒ¨ç»™æˆäººçœ‹çš„è­¦ä¸–ä¹¦ã€‚ä¸‰æ¯›èº«ä¸Šï¼ŒèƒŒè´Ÿç€æ²‰é‡çš„å†å²é˜´å½±ï¼Œä¹Ÿå¸¦äº†æ·±åˆ»çš„å†å²å¯ç¤ºï¼Œå‘ä¸–ç•Œå‘¼å”¤å’Œå¹³ï¼Œå‘¼å”¤å…¬æ­£ï¼Œå‘¼å”¤ä»æ…ˆï¼Œå‘¼å”¤åŒæƒ…ï¼Œå‘¼å”¤äººé“ï¼Œå‘¼å”¤æ–‡æ˜ï¼â€\næ‰€...\n', 'content': '', 'tags': ['æ¼«ç”»', 'ä¸‰æ¯›', 'å¼ ä¹å¹³', 'ç«¥å¹´', 'ä¸­å›½æ¼«ç”»', 'ç»å…¸', 'ç»˜æœ¬', 'ä¸­å›½'], 'picture': None}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:32:31] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) é”™è¯¯:  é‡å¤é”®è¿åå”¯ä¸€çº¦æŸ"book_pkey"
DETAIL:  é”®å€¼"(id)=(1000134)" å·²ç»å­˜åœ¨

[SQL: INSERT INTO book (id, title, author, publisher, original_title, translator, pub_year, pages, price, currency_unit, binding, isbn, author_intro, book_intro, content, tags, picture) VALUES (%(id)s, %(title)s, %(author)s, %(publisher)s, %(original_title)s, %(translator)s, %(pub_year)s, %(pages)s, %(price)s, %(currency_unit)s, %(binding)s, %(isbn)s, %(author_intro)s, %(book_intro)s, %(content)s, %(tags)s, %(picture)s)]
[parameters: {'id': '1000134', 'title': 'ä¸‰æ¯›æµæµªè®°å…¨é›†', 'author': 'å¼ ä¹å¹³', 'publisher': 'å°‘å¹´å„¿ç«¥å‡ºç‰ˆç¤¾', 'original_title': None, 'translator': None, 'pub_year': '2001-8-1', 'pages': 261, 'price': 3000, 'currency_unit': 'å…ƒ', 'binding': 'å¹³è£…(æ— ç›˜)', 'isbn': '9787532446674', 'author_intro': 'å¼ ä¹å¹³ï¼Œæ˜¯ä¸­å›½å½“ä»£æœ€æ°å‡ºçš„æ¼«ç”»å®¶ä¹‹ä¸€ã€‚1910å¹´11æœˆ10æ—¥å‡ºç”Ÿäºæµ™æ±Ÿçœæµ·ç›å¿æµ·å¡˜ä¹¡é»„åºµå¤´æ‘ã€‚çˆ¶äº²æ˜¯ä½ä¹¡æ‘æ•™å¸ˆã€‚æ¯äº²æ“…é•¿åˆºç»£ã€å‰ªçº¸ï¼Œæ˜¯å¼ ä¹å¹³æœ€æ—©çš„ç¾æœ¯å¯è’™è€…ã€‚\n1923å¹´ï¼Œåœ¨å°å­¦è€å¸ˆçš„æŒ‡å¯¼ä¸‹ï¼Œå°‘å¹´å¼ ä¹å¹³åˆ›ä½œäº†å¹³ç”Ÿç¬¬ä¸€å¼ æ¼«ç”»ã€Šä¸€è±•è´Ÿäº”åƒå…ƒã€‹ï¼Œè®½åˆºå†›é˜€æ›¹é”Ÿè´¿é€‰ï¼Œåœ¨å½“åœ°åå™ªä¸€æ—¶ã€‚\n1927å¹´åœ¨å®¶ä¹¡å ... (1770 characters truncated) ... æƒ…â€å¾æ–‡ç‰¹ç­‰å¥–ã€‚\n1991å¹´4æœˆ4æ—¥ï¼Œåœ¨ã€Šè§£æ”¾æ—¥æŠ¥ã€‹ä¸Šå‘è¡¨æœ€åä¸€å¹…æ¼«ç”»ä½œå“ï¼šâ€œçŒ«å“ºé¼ â€ã€‚\n1991å¹´å†¬ï¼Œå¼ ä¹å¹³å†³å®šå°†ã€Šä¸‰æ¯›ä»å†›è®°ã€‹åŸç¨¿æçŒ®ç»™ä¸Šæµ·ç¾æœ¯é¦†ã€‚\n1992å¹´1æœˆ23æ—¥ï¼Œåœ¨ä¸Šæµ·åä¸œåŒ»é™¢å› å¸å…¥æ€§è‚ºç‚ç—…æƒ…æ¶åŒ–ã€‚\n1992å¹´9æœˆ27æ—¥ä¸‹åˆ6æ—¶ï¼Œå¼ ä¹å¹³åœ¨ä¸Šæµ·åä¸œåŒ»é™¢ä¸ä¸–é•¿è¾ï¼Œäº«å¹´82å²ã€‚\n', 'book_intro': 'ã€Šä¸‰æ¯›æµæµªè®°ã€‹æ‰€æè¿°çš„ä¸‰æ¯›æ‰€ç”Ÿæ´»çš„é‚£ä¸ªæ—¶ä»£ï¼Œå·²ç»æˆä¸ºäº†è¿‡å»ï¼Œä½†æ˜¯äº†è§£è¿‡å»ï¼Œäº†è§£å†å²ï¼Œå´æ˜¯æ¯ä¸ªäººéƒ½å¿…é¡»å®Œæˆçš„ä¸€ä»½ç­”å·ã€‚å› ä¸ºäº†è§£è¿‡å»ï¼Œäº†è§£å†å²å¯ä»¥è®©æˆé•¿çš„è„šæ­¥æ›´æ²‰ç€ã€æ›´åšå®ï¼Œå¯ä»¥è®©è§†é‡æ›´å®½å¹¿ï¼Œå¿ƒèƒ¸æ›´åšå¤§ã€‚åœ¨ä¸€ä¸ªäººæˆé•¿çš„è¿‡ç¨‹ä¸­ï¼Œé™¤äº†æ–°é²œçš„ç©ºæ°”ï¼Œç¿çƒ‚çš„é˜³å…‰ä»¥å¤–ï¼Œæ›´éœ€è¦çš„å†·é™çš„æ€è€ƒï¼Œä»¥åŠå¿ƒçµçš„æ„ŸåŠ¨å’Œéœ‡æ’¼ï¼Œè€Œ ... (90 characters truncated) ... å’Œççˆ±ã€‚\nã€Šä¸‰æ¯›æµæµªè®°ã€‹ä¸ºä»€ä¹ˆç»ä¹…ä¸è¡°ï¼Ÿå› ä¸ºå®ƒæœ‰ç›Šäºäººä»¬çš„å¿ƒçµã€‚æŸ¯çµå…ˆç”Ÿåœ¨é¦™æ¸¯ç‰ˆåºè¨€ä¸­å†™é“ï¼šâ€œã€Šä¸‰æ¯›æµæµªè®°ã€‹æ˜¯ä¸€éƒ¨å¾ˆæœ‰è¶£å‘³çš„å°äººä¹¦ï¼Œä¹Ÿæ˜¯ä¸€éƒ¨ç»™æˆäººçœ‹çš„è­¦ä¸–ä¹¦ã€‚ä¸‰æ¯›èº«ä¸Šï¼ŒèƒŒè´Ÿç€æ²‰é‡çš„å†å²é˜´å½±ï¼Œä¹Ÿå¸¦äº†æ·±åˆ»çš„å†å²å¯ç¤ºï¼Œå‘ä¸–ç•Œå‘¼å”¤å’Œå¹³ï¼Œå‘¼å”¤å…¬æ­£ï¼Œå‘¼å”¤ä»æ…ˆï¼Œå‘¼å”¤åŒæƒ…ï¼Œå‘¼å”¤äººé“ï¼Œå‘¼å”¤æ–‡æ˜ï¼â€\næ‰€...\n', 'content': '', 'tags': ['æ¼«ç”»', 'ä¸‰æ¯›', 'å¼ ä¹å¹³', 'ç«¥å¹´', 'ä¸­å›½æ¼«ç”»', 'ç»å…¸', 'ç»˜æœ¬', 'ä¸­å›½'], 'picture': None}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:32:31] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) é”™è¯¯:  é‡å¤é”®è¿åå”¯ä¸€çº¦æŸ"book_pkey"
DETAIL:  é”®å€¼"(id)=(1000134)" å·²ç»å­˜åœ¨

[SQL: INSERT INTO book (id, title, author, publisher, original_title, translator, pub_year, pages, price, currency_unit, binding, isbn, author_intro, book_intro, content, tags, picture) VALUES (%(id)s, %(title)s, %(author)s, %(publisher)s, %(original_title)s, %(translator)s, %(pub_year)s, %(pages)s, %(price)s, %(currency_unit)s, %(binding)s, %(isbn)s, %(author_intro)s, %(book_intro)s, %(content)s, %(tags)s, %(picture)s)]
[parameters: {'id': '1000134', 'title': 'ä¸‰æ¯›æµæµªè®°å…¨é›†', 'author': 'å¼ ä¹å¹³', 'publisher': 'å°‘å¹´å„¿ç«¥å‡ºç‰ˆç¤¾', 'original_title': None, 'translator': None, 'pub_year': '2001-8-1', 'pages': 261, 'price': 3000, 'currency_unit': 'å…ƒ', 'binding': 'å¹³è£…(æ— ç›˜)', 'isbn': '9787532446674', 'author_intro': 'å¼ ä¹å¹³ï¼Œæ˜¯ä¸­å›½å½“ä»£æœ€æ°å‡ºçš„æ¼«ç”»å®¶ä¹‹ä¸€ã€‚1910å¹´11æœˆ10æ—¥å‡ºç”Ÿäºæµ™æ±Ÿçœæµ·ç›å¿æµ·å¡˜ä¹¡é»„åºµå¤´æ‘ã€‚çˆ¶äº²æ˜¯ä½ä¹¡æ‘æ•™å¸ˆã€‚æ¯äº²æ“…é•¿åˆºç»£ã€å‰ªçº¸ï¼Œæ˜¯å¼ ä¹å¹³æœ€æ—©çš„ç¾æœ¯å¯è’™è€…ã€‚\n1923å¹´ï¼Œåœ¨å°å­¦è€å¸ˆçš„æŒ‡å¯¼ä¸‹ï¼Œå°‘å¹´å¼ ä¹å¹³åˆ›ä½œäº†å¹³ç”Ÿç¬¬ä¸€å¼ æ¼«ç”»ã€Šä¸€è±•è´Ÿäº”åƒå…ƒã€‹ï¼Œè®½åˆºå†›é˜€æ›¹é”Ÿè´¿é€‰ï¼Œåœ¨å½“åœ°åå™ªä¸€æ—¶ã€‚\n1927å¹´åœ¨å®¶ä¹¡å ... (1770 characters truncated) ... æƒ…â€å¾æ–‡ç‰¹ç­‰å¥–ã€‚\n1991å¹´4æœˆ4æ—¥ï¼Œåœ¨ã€Šè§£æ”¾æ—¥æŠ¥ã€‹ä¸Šå‘è¡¨æœ€åä¸€å¹…æ¼«ç”»ä½œå“ï¼šâ€œçŒ«å“ºé¼ â€ã€‚\n1991å¹´å†¬ï¼Œå¼ ä¹å¹³å†³å®šå°†ã€Šä¸‰æ¯›ä»å†›è®°ã€‹åŸç¨¿æçŒ®ç»™ä¸Šæµ·ç¾æœ¯é¦†ã€‚\n1992å¹´1æœˆ23æ—¥ï¼Œåœ¨ä¸Šæµ·åä¸œåŒ»é™¢å› å¸å…¥æ€§è‚ºç‚ç—…æƒ…æ¶åŒ–ã€‚\n1992å¹´9æœˆ27æ—¥ä¸‹åˆ6æ—¶ï¼Œå¼ ä¹å¹³åœ¨ä¸Šæµ·åä¸œåŒ»é™¢ä¸ä¸–é•¿è¾ï¼Œäº«å¹´82å²ã€‚\n', 'book_intro': 'ã€Šä¸‰æ¯›æµæµªè®°ã€‹æ‰€æè¿°çš„ä¸‰æ¯›æ‰€ç”Ÿæ´»çš„é‚£ä¸ªæ—¶ä»£ï¼Œå·²ç»æˆä¸ºäº†è¿‡å»ï¼Œä½†æ˜¯äº†è§£è¿‡å»ï¼Œäº†è§£å†å²ï¼Œå´æ˜¯æ¯ä¸ªäººéƒ½å¿…é¡»å®Œæˆçš„ä¸€ä»½ç­”å·ã€‚å› ä¸ºäº†è§£è¿‡å»ï¼Œäº†è§£å†å²å¯ä»¥è®©æˆé•¿çš„è„šæ­¥æ›´æ²‰ç€ã€æ›´åšå®ï¼Œå¯ä»¥è®©è§†é‡æ›´å®½å¹¿ï¼Œå¿ƒèƒ¸æ›´åšå¤§ã€‚åœ¨ä¸€ä¸ªäººæˆé•¿çš„è¿‡ç¨‹ä¸­ï¼Œé™¤äº†æ–°é²œçš„ç©ºæ°”ï¼Œç¿çƒ‚çš„é˜³å…‰ä»¥å¤–ï¼Œæ›´éœ€è¦çš„å†·é™çš„æ€è€ƒï¼Œä»¥åŠå¿ƒçµçš„æ„ŸåŠ¨å’Œéœ‡æ’¼ï¼Œè€Œ ... (90 characters truncated) ... å’Œççˆ±ã€‚\nã€Šä¸‰æ¯›æµæµªè®°ã€‹ä¸ºä»€ä¹ˆç»ä¹…ä¸è¡°ï¼Ÿå› ä¸ºå®ƒæœ‰ç›Šäºäººä»¬çš„å¿ƒçµã€‚æŸ¯çµå…ˆç”Ÿåœ¨é¦™æ¸¯ç‰ˆåºè¨€ä¸­å†™é“ï¼šâ€œã€Šä¸‰æ¯›æµæµªè®°ã€‹æ˜¯ä¸€éƒ¨å¾ˆæœ‰è¶£å‘³çš„å°äººä¹¦ï¼Œä¹Ÿæ˜¯ä¸€éƒ¨ç»™æˆäººçœ‹çš„è­¦ä¸–ä¹¦ã€‚ä¸‰æ¯›èº«ä¸Šï¼ŒèƒŒè´Ÿç€æ²‰é‡çš„å†å²é˜´å½±ï¼Œä¹Ÿå¸¦äº†æ·±åˆ»çš„å†å²å¯ç¤ºï¼Œå‘ä¸–ç•Œå‘¼å”¤å’Œå¹³ï¼Œå‘¼å”¤å…¬æ­£ï¼Œå‘¼å”¤ä»æ…ˆï¼Œå‘¼å”¤åŒæƒ…ï¼Œå‘¼å”¤äººé“ï¼Œå‘¼å”¤æ–‡æ˜ï¼â€\næ‰€...\n', 'content': '', 'tags': ['æ¼«ç”»', 'ä¸‰æ¯›', 'å¼ ä¹å¹³', 'ç«¥å¹´', 'ä¸­å›½æ¼«ç”»', 'ç»å…¸', 'ç»˜æœ¬', 'ä¸­å›½'], 'picture': None}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:32:31] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) é”™è¯¯:  é‡å¤é”®è¿åå”¯ä¸€çº¦æŸ"book_pkey"
DETAIL:  é”®å€¼"(id)=(1000134)" å·²ç»å­˜åœ¨

[SQL: INSERT INTO book (id, title, author, publisher, original_title, translator, pub_year, pages, price, currency_unit, binding, isbn, author_intro, book_intro, content, tags, picture) VALUES (%(id)s, %(title)s, %(author)s, %(publisher)s, %(original_title)s, %(translator)s, %(pub_year)s, %(pages)s, %(price)s, %(currency_unit)s, %(binding)s, %(isbn)s, %(author_intro)s, %(book_intro)s, %(content)s, %(tags)s, %(picture)s)]
[parameters: {'id': '1000134', 'title': 'ä¸‰æ¯›æµæµªè®°å…¨é›†', 'author': 'å¼ ä¹å¹³', 'publisher': 'å°‘å¹´å„¿ç«¥å‡ºç‰ˆç¤¾', 'original_title': None, 'translator': None, 'pub_year': '2001-8-1', 'pages': 261, 'price': 3000, 'currency_unit': 'å…ƒ', 'binding': 'å¹³è£…(æ— ç›˜)', 'isbn': '9787532446674', 'author_intro': 'å¼ ä¹å¹³ï¼Œæ˜¯ä¸­å›½å½“ä»£æœ€æ°å‡ºçš„æ¼«ç”»å®¶ä¹‹ä¸€ã€‚1910å¹´11æœˆ10æ—¥å‡ºç”Ÿäºæµ™æ±Ÿçœæµ·ç›å¿æµ·å¡˜ä¹¡é»„åºµå¤´æ‘ã€‚çˆ¶äº²æ˜¯ä½ä¹¡æ‘æ•™å¸ˆã€‚æ¯äº²æ“…é•¿åˆºç»£ã€å‰ªçº¸ï¼Œæ˜¯å¼ ä¹å¹³æœ€æ—©çš„ç¾æœ¯å¯è’™è€…ã€‚\n1923å¹´ï¼Œåœ¨å°å­¦è€å¸ˆçš„æŒ‡å¯¼ä¸‹ï¼Œå°‘å¹´å¼ ä¹å¹³åˆ›ä½œäº†å¹³ç”Ÿç¬¬ä¸€å¼ æ¼«ç”»ã€Šä¸€è±•è´Ÿäº”åƒå…ƒã€‹ï¼Œè®½åˆºå†›é˜€æ›¹é”Ÿè´¿é€‰ï¼Œåœ¨å½“åœ°åå™ªä¸€æ—¶ã€‚\n1927å¹´åœ¨å®¶ä¹¡å ... (1770 characters truncated) ... æƒ…â€å¾æ–‡ç‰¹ç­‰å¥–ã€‚\n1991å¹´4æœˆ4æ—¥ï¼Œåœ¨ã€Šè§£æ”¾æ—¥æŠ¥ã€‹ä¸Šå‘è¡¨æœ€åä¸€å¹…æ¼«ç”»ä½œå“ï¼šâ€œçŒ«å“ºé¼ â€ã€‚\n1991å¹´å†¬ï¼Œå¼ ä¹å¹³å†³å®šå°†ã€Šä¸‰æ¯›ä»å†›è®°ã€‹åŸç¨¿æçŒ®ç»™ä¸Šæµ·ç¾æœ¯é¦†ã€‚\n1992å¹´1æœˆ23æ—¥ï¼Œåœ¨ä¸Šæµ·åä¸œåŒ»é™¢å› å¸å…¥æ€§è‚ºç‚ç—…æƒ…æ¶åŒ–ã€‚\n1992å¹´9æœˆ27æ—¥ä¸‹åˆ6æ—¶ï¼Œå¼ ä¹å¹³åœ¨ä¸Šæµ·åä¸œåŒ»é™¢ä¸ä¸–é•¿è¾ï¼Œäº«å¹´82å²ã€‚\n', 'book_intro': 'ã€Šä¸‰æ¯›æµæµªè®°ã€‹æ‰€æè¿°çš„ä¸‰æ¯›æ‰€ç”Ÿæ´»çš„é‚£ä¸ªæ—¶ä»£ï¼Œå·²ç»æˆä¸ºäº†è¿‡å»ï¼Œä½†æ˜¯äº†è§£è¿‡å»ï¼Œäº†è§£å†å²ï¼Œå´æ˜¯æ¯ä¸ªäººéƒ½å¿…é¡»å®Œæˆçš„ä¸€ä»½ç­”å·ã€‚å› ä¸ºäº†è§£è¿‡å»ï¼Œäº†è§£å†å²å¯ä»¥è®©æˆé•¿çš„è„šæ­¥æ›´æ²‰ç€ã€æ›´åšå®ï¼Œå¯ä»¥è®©è§†é‡æ›´å®½å¹¿ï¼Œå¿ƒèƒ¸æ›´åšå¤§ã€‚åœ¨ä¸€ä¸ªäººæˆé•¿çš„è¿‡ç¨‹ä¸­ï¼Œé™¤äº†æ–°é²œçš„ç©ºæ°”ï¼Œç¿çƒ‚çš„é˜³å…‰ä»¥å¤–ï¼Œæ›´éœ€è¦çš„å†·é™çš„æ€è€ƒï¼Œä»¥åŠå¿ƒçµçš„æ„ŸåŠ¨å’Œéœ‡æ’¼ï¼Œè€Œ ... (90 characters truncated) ... å’Œççˆ±ã€‚\nã€Šä¸‰æ¯›æµæµªè®°ã€‹ä¸ºä»€ä¹ˆç»ä¹…ä¸è¡°ï¼Ÿå› ä¸ºå®ƒæœ‰ç›Šäºäººä»¬çš„å¿ƒçµã€‚æŸ¯çµå…ˆç”Ÿåœ¨é¦™æ¸¯ç‰ˆåºè¨€ä¸­å†™é“ï¼šâ€œã€Šä¸‰æ¯›æµæµªè®°ã€‹æ˜¯ä¸€éƒ¨å¾ˆæœ‰è¶£å‘³çš„å°äººä¹¦ï¼Œä¹Ÿæ˜¯ä¸€éƒ¨ç»™æˆäººçœ‹çš„è­¦ä¸–ä¹¦ã€‚ä¸‰æ¯›èº«ä¸Šï¼ŒèƒŒè´Ÿç€æ²‰é‡çš„å†å²é˜´å½±ï¼Œä¹Ÿå¸¦äº†æ·±åˆ»çš„å†å²å¯ç¤ºï¼Œå‘ä¸–ç•Œå‘¼å”¤å’Œå¹³ï¼Œå‘¼å”¤å…¬æ­£ï¼Œå‘¼å”¤ä»æ…ˆï¼Œå‘¼å”¤åŒæƒ…ï¼Œå‘¼å”¤äººé“ï¼Œå‘¼å”¤æ–‡æ˜ï¼â€\næ‰€...\n', 'content': '', 'tags': ['æ¼«ç”»', 'ä¸‰æ¯›', 'å¼ ä¹å¹³', 'ç«¥å¹´', 'ä¸­å›½æ¼«ç”»', 'ç»å…¸', 'ç»˜æœ¬', 'ä¸­å›½'], 'picture': None}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:32:31] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) é”™è¯¯:  é‡å¤é”®è¿åå”¯ä¸€çº¦æŸ"book_pkey"
DETAIL:  é”®å€¼"(id)=(1000134)" å·²ç»å­˜åœ¨

[SQL: INSERT INTO book (id, title, author, publisher, original_title, translator, pub_year, pages, price, currency_unit, binding, isbn, author_intro, book_intro, content, tags, picture) VALUES (%(id)s, %(title)s, %(author)s, %(publisher)s, %(original_title)s, %(translator)s, %(pub_year)s, %(pages)s, %(price)s, %(currency_unit)s, %(binding)s, %(isbn)s, %(author_intro)s, %(book_intro)s, %(content)s, %(tags)s, %(picture)s)]
[parameters: {'id': '1000134', 'title': 'ä¸‰æ¯›æµæµªè®°å…¨é›†', 'author': 'å¼ ä¹å¹³', 'publisher': 'å°‘å¹´å„¿ç«¥å‡ºç‰ˆç¤¾', 'original_title': None, 'translator': None, 'pub_year': '2001-8-1', 'pages': 261, 'price': 3000, 'currency_unit': 'å…ƒ', 'binding': 'å¹³è£…(æ— ç›˜)', 'isbn': '9787532446674', 'author_intro': 'å¼ ä¹å¹³ï¼Œæ˜¯ä¸­å›½å½“ä»£æœ€æ°å‡ºçš„æ¼«ç”»å®¶ä¹‹ä¸€ã€‚1910å¹´11æœˆ10æ—¥å‡ºç”Ÿäºæµ™æ±Ÿçœæµ·ç›å¿æµ·å¡˜ä¹¡é»„åºµå¤´æ‘ã€‚çˆ¶äº²æ˜¯ä½ä¹¡æ‘æ•™å¸ˆã€‚æ¯äº²æ“…é•¿åˆºç»£ã€å‰ªçº¸ï¼Œæ˜¯å¼ ä¹å¹³æœ€æ—©çš„ç¾æœ¯å¯è’™è€…ã€‚\n1923å¹´ï¼Œåœ¨å°å­¦è€å¸ˆçš„æŒ‡å¯¼ä¸‹ï¼Œå°‘å¹´å¼ ä¹å¹³åˆ›ä½œäº†å¹³ç”Ÿç¬¬ä¸€å¼ æ¼«ç”»ã€Šä¸€è±•è´Ÿäº”åƒå…ƒã€‹ï¼Œè®½åˆºå†›é˜€æ›¹é”Ÿè´¿é€‰ï¼Œåœ¨å½“åœ°åå™ªä¸€æ—¶ã€‚\n1927å¹´åœ¨å®¶ä¹¡å ... (1770 characters truncated) ... æƒ…â€å¾æ–‡ç‰¹ç­‰å¥–ã€‚\n1991å¹´4æœˆ4æ—¥ï¼Œåœ¨ã€Šè§£æ”¾æ—¥æŠ¥ã€‹ä¸Šå‘è¡¨æœ€åä¸€å¹…æ¼«ç”»ä½œå“ï¼šâ€œçŒ«å“ºé¼ â€ã€‚\n1991å¹´å†¬ï¼Œå¼ ä¹å¹³å†³å®šå°†ã€Šä¸‰æ¯›ä»å†›è®°ã€‹åŸç¨¿æçŒ®ç»™ä¸Šæµ·ç¾æœ¯é¦†ã€‚\n1992å¹´1æœˆ23æ—¥ï¼Œåœ¨ä¸Šæµ·åä¸œåŒ»é™¢å› å¸å…¥æ€§è‚ºç‚ç—…æƒ…æ¶åŒ–ã€‚\n1992å¹´9æœˆ27æ—¥ä¸‹åˆ6æ—¶ï¼Œå¼ ä¹å¹³åœ¨ä¸Šæµ·åä¸œåŒ»é™¢ä¸ä¸–é•¿è¾ï¼Œäº«å¹´82å²ã€‚\n', 'book_intro': 'ã€Šä¸‰æ¯›æµæµªè®°ã€‹æ‰€æè¿°çš„ä¸‰æ¯›æ‰€ç”Ÿæ´»çš„é‚£ä¸ªæ—¶ä»£ï¼Œå·²ç»æˆä¸ºäº†è¿‡å»ï¼Œä½†æ˜¯äº†è§£è¿‡å»ï¼Œäº†è§£å†å²ï¼Œå´æ˜¯æ¯ä¸ªäººéƒ½å¿…é¡»å®Œæˆçš„ä¸€ä»½ç­”å·ã€‚å› ä¸ºäº†è§£è¿‡å»ï¼Œäº†è§£å†å²å¯ä»¥è®©æˆé•¿çš„è„šæ­¥æ›´æ²‰ç€ã€æ›´åšå®ï¼Œå¯ä»¥è®©è§†é‡æ›´å®½å¹¿ï¼Œå¿ƒèƒ¸æ›´åšå¤§ã€‚åœ¨ä¸€ä¸ªäººæˆé•¿çš„è¿‡ç¨‹ä¸­ï¼Œé™¤äº†æ–°é²œçš„ç©ºæ°”ï¼Œç¿çƒ‚çš„é˜³å…‰ä»¥å¤–ï¼Œæ›´éœ€è¦çš„å†·é™çš„æ€è€ƒï¼Œä»¥åŠå¿ƒçµçš„æ„ŸåŠ¨å’Œéœ‡æ’¼ï¼Œè€Œ ... (90 characters truncated) ... å’Œççˆ±ã€‚\nã€Šä¸‰æ¯›æµæµªè®°ã€‹ä¸ºä»€ä¹ˆç»ä¹…ä¸è¡°ï¼Ÿå› ä¸ºå®ƒæœ‰ç›Šäºäººä»¬çš„å¿ƒçµã€‚æŸ¯çµå…ˆç”Ÿåœ¨é¦™æ¸¯ç‰ˆåºè¨€ä¸­å†™é“ï¼šâ€œã€Šä¸‰æ¯›æµæµªè®°ã€‹æ˜¯ä¸€éƒ¨å¾ˆæœ‰è¶£å‘³çš„å°äººä¹¦ï¼Œä¹Ÿæ˜¯ä¸€éƒ¨ç»™æˆäººçœ‹çš„è­¦ä¸–ä¹¦ã€‚ä¸‰æ¯›èº«ä¸Šï¼ŒèƒŒè´Ÿç€æ²‰é‡çš„å†å²é˜´å½±ï¼Œä¹Ÿå¸¦äº†æ·±åˆ»çš„å†å²å¯ç¤ºï¼Œå‘ä¸–ç•Œå‘¼å”¤å’Œå¹³ï¼Œå‘¼å”¤å…¬æ­£ï¼Œå‘¼å”¤ä»æ…ˆï¼Œå‘¼å”¤åŒæƒ…ï¼Œå‘¼å”¤äººé“ï¼Œå‘¼å”¤æ–‡æ˜ï¼â€\næ‰€...\n', 'content': '', 'tags': ['æ¼«ç”»', 'ä¸‰æ¯›', 'å¼ ä¹å¹³', 'ç«¥å¹´', 'ä¸­å›½æ¼«ç”»', 'ç»å…¸', 'ç»˜æœ¬', 'ä¸­å›½'], 'picture': None}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:32:31] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) é”™è¯¯:  é‡å¤é”®è¿åå”¯ä¸€çº¦æŸ"book_pkey"
DETAIL:  é”®å€¼"(id)=(1000134)" å·²ç»å­˜åœ¨

[SQL: INSERT INTO book (id, title, author, publisher, original_title, translator, pub_year, pages, price, currency_unit, binding, isbn, author_intro, book_intro, content, tags, picture) VALUES (%(id)s, %(title)s, %(author)s, %(publisher)s, %(original_title)s, %(translator)s, %(pub_year)s, %(pages)s, %(price)s, %(currency_unit)s, %(binding)s, %(isbn)s, %(author_intro)s, %(book_intro)s, %(content)s, %(tags)s, %(picture)s)]
[parameters: {'id': '1000134', 'title': 'ä¸‰æ¯›æµæµªè®°å…¨é›†', 'author': 'å¼ ä¹å¹³', 'publisher': 'å°‘å¹´å„¿ç«¥å‡ºç‰ˆç¤¾', 'original_title': None, 'translator': None, 'pub_year': '2001-8-1', 'pages': 261, 'price': 3000, 'currency_unit': 'å…ƒ', 'binding': 'å¹³è£…(æ— ç›˜)', 'isbn': '9787532446674', 'author_intro': 'å¼ ä¹å¹³ï¼Œæ˜¯ä¸­å›½å½“ä»£æœ€æ°å‡ºçš„æ¼«ç”»å®¶ä¹‹ä¸€ã€‚1910å¹´11æœˆ10æ—¥å‡ºç”Ÿäºæµ™æ±Ÿçœæµ·ç›å¿æµ·å¡˜ä¹¡é»„åºµå¤´æ‘ã€‚çˆ¶äº²æ˜¯ä½ä¹¡æ‘æ•™å¸ˆã€‚æ¯äº²æ“…é•¿åˆºç»£ã€å‰ªçº¸ï¼Œæ˜¯å¼ ä¹å¹³æœ€æ—©çš„ç¾æœ¯å¯è’™è€…ã€‚\n1923å¹´ï¼Œåœ¨å°å­¦è€å¸ˆçš„æŒ‡å¯¼ä¸‹ï¼Œå°‘å¹´å¼ ä¹å¹³åˆ›ä½œäº†å¹³ç”Ÿç¬¬ä¸€å¼ æ¼«ç”»ã€Šä¸€è±•è´Ÿäº”åƒå…ƒã€‹ï¼Œè®½åˆºå†›é˜€æ›¹é”Ÿè´¿é€‰ï¼Œåœ¨å½“åœ°åå™ªä¸€æ—¶ã€‚\n1927å¹´åœ¨å®¶ä¹¡å ... (1770 characters truncated) ... æƒ…â€å¾æ–‡ç‰¹ç­‰å¥–ã€‚\n1991å¹´4æœˆ4æ—¥ï¼Œåœ¨ã€Šè§£æ”¾æ—¥æŠ¥ã€‹ä¸Šå‘è¡¨æœ€åä¸€å¹…æ¼«ç”»ä½œå“ï¼šâ€œçŒ«å“ºé¼ â€ã€‚\n1991å¹´å†¬ï¼Œå¼ ä¹å¹³å†³å®šå°†ã€Šä¸‰æ¯›ä»å†›è®°ã€‹åŸç¨¿æçŒ®ç»™ä¸Šæµ·ç¾æœ¯é¦†ã€‚\n1992å¹´1æœˆ23æ—¥ï¼Œåœ¨ä¸Šæµ·åä¸œåŒ»é™¢å› å¸å…¥æ€§è‚ºç‚ç—…æƒ…æ¶åŒ–ã€‚\n1992å¹´9æœˆ27æ—¥ä¸‹åˆ6æ—¶ï¼Œå¼ ä¹å¹³åœ¨ä¸Šæµ·åä¸œåŒ»é™¢ä¸ä¸–é•¿è¾ï¼Œäº«å¹´82å²ã€‚\n', 'book_intro': 'ã€Šä¸‰æ¯›æµæµªè®°ã€‹æ‰€æè¿°çš„ä¸‰æ¯›æ‰€ç”Ÿæ´»çš„é‚£ä¸ªæ—¶ä»£ï¼Œå·²ç»æˆä¸ºäº†è¿‡å»ï¼Œä½†æ˜¯äº†è§£è¿‡å»ï¼Œäº†è§£å†å²ï¼Œå´æ˜¯æ¯ä¸ªäººéƒ½å¿…é¡»å®Œæˆçš„ä¸€ä»½ç­”å·ã€‚å› ä¸ºäº†è§£è¿‡å»ï¼Œäº†è§£å†å²å¯ä»¥è®©æˆé•¿çš„è„šæ­¥æ›´æ²‰ç€ã€æ›´åšå®ï¼Œå¯ä»¥è®©è§†é‡æ›´å®½å¹¿ï¼Œå¿ƒèƒ¸æ›´åšå¤§ã€‚åœ¨ä¸€ä¸ªäººæˆé•¿çš„è¿‡ç¨‹ä¸­ï¼Œé™¤äº†æ–°é²œçš„ç©ºæ°”ï¼Œç¿çƒ‚çš„é˜³å…‰ä»¥å¤–ï¼Œæ›´éœ€è¦çš„å†·é™çš„æ€è€ƒï¼Œä»¥åŠå¿ƒçµçš„æ„ŸåŠ¨å’Œéœ‡æ’¼ï¼Œè€Œ ... (90 characters truncated) ... å’Œççˆ±ã€‚\nã€Šä¸‰æ¯›æµæµªè®°ã€‹ä¸ºä»€ä¹ˆç»ä¹…ä¸è¡°ï¼Ÿå› ä¸ºå®ƒæœ‰ç›Šäºäººä»¬çš„å¿ƒçµã€‚æŸ¯çµå…ˆç”Ÿåœ¨é¦™æ¸¯ç‰ˆåºè¨€ä¸­å†™é“ï¼šâ€œã€Šä¸‰æ¯›æµæµªè®°ã€‹æ˜¯ä¸€éƒ¨å¾ˆæœ‰è¶£å‘³çš„å°äººä¹¦ï¼Œä¹Ÿæ˜¯ä¸€éƒ¨ç»™æˆäººçœ‹çš„è­¦ä¸–ä¹¦ã€‚ä¸‰æ¯›èº«ä¸Šï¼ŒèƒŒè´Ÿç€æ²‰é‡çš„å†å²é˜´å½±ï¼Œä¹Ÿå¸¦äº†æ·±åˆ»çš„å†å²å¯ç¤ºï¼Œå‘ä¸–ç•Œå‘¼å”¤å’Œå¹³ï¼Œå‘¼å”¤å…¬æ­£ï¼Œå‘¼å”¤ä»æ…ˆï¼Œå‘¼å”¤åŒæƒ…ï¼Œå‘¼å”¤äººé“ï¼Œå‘¼å”¤æ–‡æ˜ï¼â€\næ‰€...\n', 'content': '', 'tags': ['æ¼«ç”»', 'ä¸‰æ¯›', 'å¼ ä¹å¹³', 'ç«¥å¹´', 'ä¸­å›½æ¼«ç”»', 'ç»å…¸', 'ç»˜æœ¬', 'ä¸­å›½'], 'picture': None}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:32:31] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) é”™è¯¯:  é‡å¤é”®è¿åå”¯ä¸€çº¦æŸ"book_pkey"
DETAIL:  é”®å€¼"(id)=(1000134)" å·²ç»å­˜åœ¨

[SQL: INSERT INTO book (id, title, author, publisher, original_title, translator, pub_year, pages, price, currency_unit, binding, isbn, author_intro, book_intro, content, tags, picture) VALUES (%(id)s, %(title)s, %(author)s, %(publisher)s, %(original_title)s, %(translator)s, %(pub_year)s, %(pages)s, %(price)s, %(currency_unit)s, %(binding)s, %(isbn)s, %(author_intro)s, %(book_intro)s, %(content)s, %(tags)s, %(picture)s)]
[parameters: {'id': '1000134', 'title': 'ä¸‰æ¯›æµæµªè®°å…¨é›†', 'author': 'å¼ ä¹å¹³', 'publisher': 'å°‘å¹´å„¿ç«¥å‡ºç‰ˆç¤¾', 'original_title': None, 'translator': None, 'pub_year': '2001-8-1', 'pages': 261, 'price': 3000, 'currency_unit': 'å…ƒ', 'binding': 'å¹³è£…(æ— ç›˜)', 'isbn': '9787532446674', 'author_intro': 'å¼ ä¹å¹³ï¼Œæ˜¯ä¸­å›½å½“ä»£æœ€æ°å‡ºçš„æ¼«ç”»å®¶ä¹‹ä¸€ã€‚1910å¹´11æœˆ10æ—¥å‡ºç”Ÿäºæµ™æ±Ÿçœæµ·ç›å¿æµ·å¡˜ä¹¡é»„åºµå¤´æ‘ã€‚çˆ¶äº²æ˜¯ä½ä¹¡æ‘æ•™å¸ˆã€‚æ¯äº²æ“…é•¿åˆºç»£ã€å‰ªçº¸ï¼Œæ˜¯å¼ ä¹å¹³æœ€æ—©çš„ç¾æœ¯å¯è’™è€…ã€‚\n1923å¹´ï¼Œåœ¨å°å­¦è€å¸ˆçš„æŒ‡å¯¼ä¸‹ï¼Œå°‘å¹´å¼ ä¹å¹³åˆ›ä½œäº†å¹³ç”Ÿç¬¬ä¸€å¼ æ¼«ç”»ã€Šä¸€è±•è´Ÿäº”åƒå…ƒã€‹ï¼Œè®½åˆºå†›é˜€æ›¹é”Ÿè´¿é€‰ï¼Œåœ¨å½“åœ°åå™ªä¸€æ—¶ã€‚\n1927å¹´åœ¨å®¶ä¹¡å ... (1770 characters truncated) ... æƒ…â€å¾æ–‡ç‰¹ç­‰å¥–ã€‚\n1991å¹´4æœˆ4æ—¥ï¼Œåœ¨ã€Šè§£æ”¾æ—¥æŠ¥ã€‹ä¸Šå‘è¡¨æœ€åä¸€å¹…æ¼«ç”»ä½œå“ï¼šâ€œçŒ«å“ºé¼ â€ã€‚\n1991å¹´å†¬ï¼Œå¼ ä¹å¹³å†³å®šå°†ã€Šä¸‰æ¯›ä»å†›è®°ã€‹åŸç¨¿æçŒ®ç»™ä¸Šæµ·ç¾æœ¯é¦†ã€‚\n1992å¹´1æœˆ23æ—¥ï¼Œåœ¨ä¸Šæµ·åä¸œåŒ»é™¢å› å¸å…¥æ€§è‚ºç‚ç—…æƒ…æ¶åŒ–ã€‚\n1992å¹´9æœˆ27æ—¥ä¸‹åˆ6æ—¶ï¼Œå¼ ä¹å¹³åœ¨ä¸Šæµ·åä¸œåŒ»é™¢ä¸ä¸–é•¿è¾ï¼Œäº«å¹´82å²ã€‚\n', 'book_intro': 'ã€Šä¸‰æ¯›æµæµªè®°ã€‹æ‰€æè¿°çš„ä¸‰æ¯›æ‰€ç”Ÿæ´»çš„é‚£ä¸ªæ—¶ä»£ï¼Œå·²ç»æˆä¸ºäº†è¿‡å»ï¼Œä½†æ˜¯äº†è§£è¿‡å»ï¼Œäº†è§£å†å²ï¼Œå´æ˜¯æ¯ä¸ªäººéƒ½å¿…é¡»å®Œæˆçš„ä¸€ä»½ç­”å·ã€‚å› ä¸ºäº†è§£è¿‡å»ï¼Œäº†è§£å†å²å¯ä»¥è®©æˆé•¿çš„è„šæ­¥æ›´æ²‰ç€ã€æ›´åšå®ï¼Œå¯ä»¥è®©è§†é‡æ›´å®½å¹¿ï¼Œå¿ƒèƒ¸æ›´åšå¤§ã€‚åœ¨ä¸€ä¸ªäººæˆé•¿çš„è¿‡ç¨‹ä¸­ï¼Œé™¤äº†æ–°é²œçš„ç©ºæ°”ï¼Œç¿çƒ‚çš„é˜³å…‰ä»¥å¤–ï¼Œæ›´éœ€è¦çš„å†·é™çš„æ€è€ƒï¼Œä»¥åŠå¿ƒçµçš„æ„ŸåŠ¨å’Œéœ‡æ’¼ï¼Œè€Œ ... (90 characters truncated) ... å’Œççˆ±ã€‚\nã€Šä¸‰æ¯›æµæµªè®°ã€‹ä¸ºä»€ä¹ˆç»ä¹…ä¸è¡°ï¼Ÿå› ä¸ºå®ƒæœ‰ç›Šäºäººä»¬çš„å¿ƒçµã€‚æŸ¯çµå…ˆç”Ÿåœ¨é¦™æ¸¯ç‰ˆåºè¨€ä¸­å†™é“ï¼šâ€œã€Šä¸‰æ¯›æµæµªè®°ã€‹æ˜¯ä¸€éƒ¨å¾ˆæœ‰è¶£å‘³çš„å°äººä¹¦ï¼Œä¹Ÿæ˜¯ä¸€éƒ¨ç»™æˆäººçœ‹çš„è­¦ä¸–ä¹¦ã€‚ä¸‰æ¯›èº«ä¸Šï¼ŒèƒŒè´Ÿç€æ²‰é‡çš„å†å²é˜´å½±ï¼Œä¹Ÿå¸¦äº†æ·±åˆ»çš„å†å²å¯ç¤ºï¼Œå‘ä¸–ç•Œå‘¼å”¤å’Œå¹³ï¼Œå‘¼å”¤å…¬æ­£ï¼Œå‘¼å”¤ä»æ…ˆï¼Œå‘¼å”¤åŒæƒ…ï¼Œå‘¼å”¤äººé“ï¼Œå‘¼å”¤æ–‡æ˜ï¼â€\næ‰€...\n', 'content': '', 'tags': ['æ¼«ç”»', 'ä¸‰æ¯›', 'å¼ ä¹å¹³', 'ç«¥å¹´', 'ä¸­å›½æ¼«ç”»', 'ç»å…¸', 'ç»˜æœ¬', 'ä¸­å›½'], 'picture': None}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:32:31] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) é”™è¯¯:  é‡å¤é”®è¿åå”¯ä¸€çº¦æŸ"book_pkey"
DETAIL:  é”®å€¼"(id)=(1000134)" å·²ç»å­˜åœ¨

[SQL: INSERT INTO book (id, title, author, publisher, original_title, translator, pub_year, pages, price, currency_unit, binding, isbn, author_intro, book_intro, content, tags, picture) VALUES (%(id)s, %(title)s, %(author)s, %(publisher)s, %(original_title)s, %(translator)s, %(pub_year)s, %(pages)s, %(price)s, %(currency_unit)s, %(binding)s, %(isbn)s, %(author_intro)s, %(book_intro)s, %(content)s, %(tags)s, %(picture)s)]
[parameters: {'id': '1000134', 'title': 'ä¸‰æ¯›æµæµªè®°å…¨é›†', 'author': 'å¼ ä¹å¹³', 'publisher': 'å°‘å¹´å„¿ç«¥å‡ºç‰ˆç¤¾', 'original_title': None, 'translator': None, 'pub_year': '2001-8-1', 'pages': 261, 'price': 3000, 'currency_unit': 'å…ƒ', 'binding': 'å¹³è£…(æ— ç›˜)', 'isbn': '9787532446674', 'author_intro': 'å¼ ä¹å¹³ï¼Œæ˜¯ä¸­å›½å½“ä»£æœ€æ°å‡ºçš„æ¼«ç”»å®¶ä¹‹ä¸€ã€‚1910å¹´11æœˆ10æ—¥å‡ºç”Ÿäºæµ™æ±Ÿçœæµ·ç›å¿æµ·å¡˜ä¹¡é»„åºµå¤´æ‘ã€‚çˆ¶äº²æ˜¯ä½ä¹¡æ‘æ•™å¸ˆã€‚æ¯äº²æ“…é•¿åˆºç»£ã€å‰ªçº¸ï¼Œæ˜¯å¼ ä¹å¹³æœ€æ—©çš„ç¾æœ¯å¯è’™è€…ã€‚\n1923å¹´ï¼Œåœ¨å°å­¦è€å¸ˆçš„æŒ‡å¯¼ä¸‹ï¼Œå°‘å¹´å¼ ä¹å¹³åˆ›ä½œäº†å¹³ç”Ÿç¬¬ä¸€å¼ æ¼«ç”»ã€Šä¸€è±•è´Ÿäº”åƒå…ƒã€‹ï¼Œè®½åˆºå†›é˜€æ›¹é”Ÿè´¿é€‰ï¼Œåœ¨å½“åœ°åå™ªä¸€æ—¶ã€‚\n1927å¹´åœ¨å®¶ä¹¡å ... (1770 characters truncated) ... æƒ…â€å¾æ–‡ç‰¹ç­‰å¥–ã€‚\n1991å¹´4æœˆ4æ—¥ï¼Œåœ¨ã€Šè§£æ”¾æ—¥æŠ¥ã€‹ä¸Šå‘è¡¨æœ€åä¸€å¹…æ¼«ç”»ä½œå“ï¼šâ€œçŒ«å“ºé¼ â€ã€‚\n1991å¹´å†¬ï¼Œå¼ ä¹å¹³å†³å®šå°†ã€Šä¸‰æ¯›ä»å†›è®°ã€‹åŸç¨¿æçŒ®ç»™ä¸Šæµ·ç¾æœ¯é¦†ã€‚\n1992å¹´1æœˆ23æ—¥ï¼Œåœ¨ä¸Šæµ·åä¸œåŒ»é™¢å› å¸å…¥æ€§è‚ºç‚ç—…æƒ…æ¶åŒ–ã€‚\n1992å¹´9æœˆ27æ—¥ä¸‹åˆ6æ—¶ï¼Œå¼ ä¹å¹³åœ¨ä¸Šæµ·åä¸œåŒ»é™¢ä¸ä¸–é•¿è¾ï¼Œäº«å¹´82å²ã€‚\n', 'book_intro': 'ã€Šä¸‰æ¯›æµæµªè®°ã€‹æ‰€æè¿°çš„ä¸‰æ¯›æ‰€ç”Ÿæ´»çš„é‚£ä¸ªæ—¶ä»£ï¼Œå·²ç»æˆä¸ºäº†è¿‡å»ï¼Œä½†æ˜¯äº†è§£è¿‡å»ï¼Œäº†è§£å†å²ï¼Œå´æ˜¯æ¯ä¸ªäººéƒ½å¿…é¡»å®Œæˆçš„ä¸€ä»½ç­”å·ã€‚å› ä¸ºäº†è§£è¿‡å»ï¼Œäº†è§£å†å²å¯ä»¥è®©æˆé•¿çš„è„šæ­¥æ›´æ²‰ç€ã€æ›´åšå®ï¼Œå¯ä»¥è®©è§†é‡æ›´å®½å¹¿ï¼Œå¿ƒèƒ¸æ›´åšå¤§ã€‚åœ¨ä¸€ä¸ªäººæˆé•¿çš„è¿‡ç¨‹ä¸­ï¼Œé™¤äº†æ–°é²œçš„ç©ºæ°”ï¼Œç¿çƒ‚çš„é˜³å…‰ä»¥å¤–ï¼Œæ›´éœ€è¦çš„å†·é™çš„æ€è€ƒï¼Œä»¥åŠå¿ƒçµçš„æ„ŸåŠ¨å’Œéœ‡æ’¼ï¼Œè€Œ ... (90 characters truncated) ... å’Œççˆ±ã€‚\nã€Šä¸‰æ¯›æµæµªè®°ã€‹ä¸ºä»€ä¹ˆç»ä¹…ä¸è¡°ï¼Ÿå› ä¸ºå®ƒæœ‰ç›Šäºäººä»¬çš„å¿ƒçµã€‚æŸ¯çµå…ˆç”Ÿåœ¨é¦™æ¸¯ç‰ˆåºè¨€ä¸­å†™é“ï¼šâ€œã€Šä¸‰æ¯›æµæµªè®°ã€‹æ˜¯ä¸€éƒ¨å¾ˆæœ‰è¶£å‘³çš„å°äººä¹¦ï¼Œä¹Ÿæ˜¯ä¸€éƒ¨ç»™æˆäººçœ‹çš„è­¦ä¸–ä¹¦ã€‚ä¸‰æ¯›èº«ä¸Šï¼ŒèƒŒè´Ÿç€æ²‰é‡çš„å†å²é˜´å½±ï¼Œä¹Ÿå¸¦äº†æ·±åˆ»çš„å†å²å¯ç¤ºï¼Œå‘ä¸–ç•Œå‘¼å”¤å’Œå¹³ï¼Œå‘¼å”¤å…¬æ­£ï¼Œå‘¼å”¤ä»æ…ˆï¼Œå‘¼å”¤åŒæƒ…ï¼Œå‘¼å”¤äººé“ï¼Œå‘¼å”¤æ–‡æ˜ï¼â€\næ‰€...\n', 'content': '', 'tags': ['æ¼«ç”»', 'ä¸‰æ¯›', 'å¼ ä¹å¹³', 'ç«¥å¹´', 'ä¸­å›½æ¼«ç”»', 'ç»å…¸', 'ç»˜æœ¬', 'ä¸­å›½'], 'picture': None}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:32:31] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) é”™è¯¯:  é‡å¤é”®è¿åå”¯ä¸€çº¦æŸ"book_pkey"
DETAIL:  é”®å€¼"(id)=(1000134)" å·²ç»å­˜åœ¨

[SQL: INSERT INTO book (id, title, author, publisher, original_title, translator, pub_year, pages, price, currency_unit, binding, isbn, author_intro, book_intro, content, tags, picture) VALUES (%(id)s, %(title)s, %(author)s, %(publisher)s, %(original_title)s, %(translator)s, %(pub_year)s, %(pages)s, %(price)s, %(currency_unit)s, %(binding)s, %(isbn)s, %(author_intro)s, %(book_intro)s, %(content)s, %(tags)s, %(picture)s)]
[parameters: {'id': '1000134', 'title': 'ä¸‰æ¯›æµæµªè®°å…¨é›†', 'author': 'å¼ ä¹å¹³', 'publisher': 'å°‘å¹´å„¿ç«¥å‡ºç‰ˆç¤¾', 'original_title': None, 'translator': None, 'pub_year': '2001-8-1', 'pages': 261, 'price': 3000, 'currency_unit': 'å…ƒ', 'binding': 'å¹³è£…(æ— ç›˜)', 'isbn': '9787532446674', 'author_intro': 'å¼ ä¹å¹³ï¼Œæ˜¯ä¸­å›½å½“ä»£æœ€æ°å‡ºçš„æ¼«ç”»å®¶ä¹‹ä¸€ã€‚1910å¹´11æœˆ10æ—¥å‡ºç”Ÿäºæµ™æ±Ÿçœæµ·ç›å¿æµ·å¡˜ä¹¡é»„åºµå¤´æ‘ã€‚çˆ¶äº²æ˜¯ä½ä¹¡æ‘æ•™å¸ˆã€‚æ¯äº²æ“…é•¿åˆºç»£ã€å‰ªçº¸ï¼Œæ˜¯å¼ ä¹å¹³æœ€æ—©çš„ç¾æœ¯å¯è’™è€…ã€‚\n1923å¹´ï¼Œåœ¨å°å­¦è€å¸ˆçš„æŒ‡å¯¼ä¸‹ï¼Œå°‘å¹´å¼ ä¹å¹³åˆ›ä½œäº†å¹³ç”Ÿç¬¬ä¸€å¼ æ¼«ç”»ã€Šä¸€è±•è´Ÿäº”åƒå…ƒã€‹ï¼Œè®½åˆºå†›é˜€æ›¹é”Ÿè´¿é€‰ï¼Œåœ¨å½“åœ°åå™ªä¸€æ—¶ã€‚\n1927å¹´åœ¨å®¶ä¹¡å ... (1770 characters truncated) ... æƒ…â€å¾æ–‡ç‰¹ç­‰å¥–ã€‚\n1991å¹´4æœˆ4æ—¥ï¼Œåœ¨ã€Šè§£æ”¾æ—¥æŠ¥ã€‹ä¸Šå‘è¡¨æœ€åä¸€å¹…æ¼«ç”»ä½œå“ï¼šâ€œçŒ«å“ºé¼ â€ã€‚\n1991å¹´å†¬ï¼Œå¼ ä¹å¹³å†³å®šå°†ã€Šä¸‰æ¯›ä»å†›è®°ã€‹åŸç¨¿æçŒ®ç»™ä¸Šæµ·ç¾æœ¯é¦†ã€‚\n1992å¹´1æœˆ23æ—¥ï¼Œåœ¨ä¸Šæµ·åä¸œåŒ»é™¢å› å¸å…¥æ€§è‚ºç‚ç—…æƒ…æ¶åŒ–ã€‚\n1992å¹´9æœˆ27æ—¥ä¸‹åˆ6æ—¶ï¼Œå¼ ä¹å¹³åœ¨ä¸Šæµ·åä¸œåŒ»é™¢ä¸ä¸–é•¿è¾ï¼Œäº«å¹´82å²ã€‚\n', 'book_intro': 'ã€Šä¸‰æ¯›æµæµªè®°ã€‹æ‰€æè¿°çš„ä¸‰æ¯›æ‰€ç”Ÿæ´»çš„é‚£ä¸ªæ—¶ä»£ï¼Œå·²ç»æˆä¸ºäº†è¿‡å»ï¼Œä½†æ˜¯äº†è§£è¿‡å»ï¼Œäº†è§£å†å²ï¼Œå´æ˜¯æ¯ä¸ªäººéƒ½å¿…é¡»å®Œæˆçš„ä¸€ä»½ç­”å·ã€‚å› ä¸ºäº†è§£è¿‡å»ï¼Œäº†è§£å†å²å¯ä»¥è®©æˆé•¿çš„è„šæ­¥æ›´æ²‰ç€ã€æ›´åšå®ï¼Œå¯ä»¥è®©è§†é‡æ›´å®½å¹¿ï¼Œå¿ƒèƒ¸æ›´åšå¤§ã€‚åœ¨ä¸€ä¸ªäººæˆé•¿çš„è¿‡ç¨‹ä¸­ï¼Œé™¤äº†æ–°é²œçš„ç©ºæ°”ï¼Œç¿çƒ‚çš„é˜³å…‰ä»¥å¤–ï¼Œæ›´éœ€è¦çš„å†·é™çš„æ€è€ƒï¼Œä»¥åŠå¿ƒçµçš„æ„ŸåŠ¨å’Œéœ‡æ’¼ï¼Œè€Œ ... (90 characters truncated) ... å’Œççˆ±ã€‚\nã€Šä¸‰æ¯›æµæµªè®°ã€‹ä¸ºä»€ä¹ˆç»ä¹…ä¸è¡°ï¼Ÿå› ä¸ºå®ƒæœ‰ç›Šäºäººä»¬çš„å¿ƒçµã€‚æŸ¯çµå…ˆç”Ÿåœ¨é¦™æ¸¯ç‰ˆåºè¨€ä¸­å†™é“ï¼šâ€œã€Šä¸‰æ¯›æµæµªè®°ã€‹æ˜¯ä¸€éƒ¨å¾ˆæœ‰è¶£å‘³çš„å°äººä¹¦ï¼Œä¹Ÿæ˜¯ä¸€éƒ¨ç»™æˆäººçœ‹çš„è­¦ä¸–ä¹¦ã€‚ä¸‰æ¯›èº«ä¸Šï¼ŒèƒŒè´Ÿç€æ²‰é‡çš„å†å²é˜´å½±ï¼Œä¹Ÿå¸¦äº†æ·±åˆ»çš„å†å²å¯ç¤ºï¼Œå‘ä¸–ç•Œå‘¼å”¤å’Œå¹³ï¼Œå‘¼å”¤å…¬æ­£ï¼Œå‘¼å”¤ä»æ…ˆï¼Œå‘¼å”¤åŒæƒ…ï¼Œå‘¼å”¤äººé“ï¼Œå‘¼å”¤æ–‡æ˜ï¼â€\næ‰€...\n', 'content': '', 'tags': ['æ¼«ç”»', 'ä¸‰æ¯›', 'å¼ ä¹å¹³', 'ç«¥å¹´', 'ä¸­å›½æ¼«ç”»', 'ç»å…¸', 'ç»˜æœ¬', 'ä¸­å›½'], 'picture': None}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:32:31] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) é”™è¯¯:  é‡å¤é”®è¿åå”¯ä¸€çº¦æŸ"book_pkey"
DETAIL:  é”®å€¼"(id)=(1000134)" å·²ç»å­˜åœ¨

[SQL: INSERT INTO book (id, title, author, publisher, original_title, translator, pub_year, pages, price, currency_unit, binding, isbn, author_intro, book_intro, content, tags, picture) VALUES (%(id)s, %(title)s, %(author)s, %(publisher)s, %(original_title)s, %(translator)s, %(pub_year)s, %(pages)s, %(price)s, %(currency_unit)s, %(binding)s, %(isbn)s, %(author_intro)s, %(book_intro)s, %(content)s, %(tags)s, %(picture)s)]
[parameters: {'id': '1000134', 'title': 'ä¸‰æ¯›æµæµªè®°å…¨é›†', 'author': 'å¼ ä¹å¹³', 'publisher': 'å°‘å¹´å„¿ç«¥å‡ºç‰ˆç¤¾', 'original_title': None, 'translator': None, 'pub_year': '2001-8-1', 'pages': 261, 'price': 3000, 'currency_unit': 'å…ƒ', 'binding': 'å¹³è£…(æ— ç›˜)', 'isbn': '9787532446674', 'author_intro': 'å¼ ä¹å¹³ï¼Œæ˜¯ä¸­å›½å½“ä»£æœ€æ°å‡ºçš„æ¼«ç”»å®¶ä¹‹ä¸€ã€‚1910å¹´11æœˆ10æ—¥å‡ºç”Ÿäºæµ™æ±Ÿçœæµ·ç›å¿æµ·å¡˜ä¹¡é»„åºµå¤´æ‘ã€‚çˆ¶äº²æ˜¯ä½ä¹¡æ‘æ•™å¸ˆã€‚æ¯äº²æ“…é•¿åˆºç»£ã€å‰ªçº¸ï¼Œæ˜¯å¼ ä¹å¹³æœ€æ—©çš„ç¾æœ¯å¯è’™è€…ã€‚\n1923å¹´ï¼Œåœ¨å°å­¦è€å¸ˆçš„æŒ‡å¯¼ä¸‹ï¼Œå°‘å¹´å¼ ä¹å¹³åˆ›ä½œäº†å¹³ç”Ÿç¬¬ä¸€å¼ æ¼«ç”»ã€Šä¸€è±•è´Ÿäº”åƒå…ƒã€‹ï¼Œè®½åˆºå†›é˜€æ›¹é”Ÿè´¿é€‰ï¼Œåœ¨å½“åœ°åå™ªä¸€æ—¶ã€‚\n1927å¹´åœ¨å®¶ä¹¡å ... (1770 characters truncated) ... æƒ…â€å¾æ–‡ç‰¹ç­‰å¥–ã€‚\n1991å¹´4æœˆ4æ—¥ï¼Œåœ¨ã€Šè§£æ”¾æ—¥æŠ¥ã€‹ä¸Šå‘è¡¨æœ€åä¸€å¹…æ¼«ç”»ä½œå“ï¼šâ€œçŒ«å“ºé¼ â€ã€‚\n1991å¹´å†¬ï¼Œå¼ ä¹å¹³å†³å®šå°†ã€Šä¸‰æ¯›ä»å†›è®°ã€‹åŸç¨¿æçŒ®ç»™ä¸Šæµ·ç¾æœ¯é¦†ã€‚\n1992å¹´1æœˆ23æ—¥ï¼Œåœ¨ä¸Šæµ·åä¸œåŒ»é™¢å› å¸å…¥æ€§è‚ºç‚ç—…æƒ…æ¶åŒ–ã€‚\n1992å¹´9æœˆ27æ—¥ä¸‹åˆ6æ—¶ï¼Œå¼ ä¹å¹³åœ¨ä¸Šæµ·åä¸œåŒ»é™¢ä¸ä¸–é•¿è¾ï¼Œäº«å¹´82å²ã€‚\n', 'book_intro': 'ã€Šä¸‰æ¯›æµæµªè®°ã€‹æ‰€æè¿°çš„ä¸‰æ¯›æ‰€ç”Ÿæ´»çš„é‚£ä¸ªæ—¶ä»£ï¼Œå·²ç»æˆä¸ºäº†è¿‡å»ï¼Œä½†æ˜¯äº†è§£è¿‡å»ï¼Œäº†è§£å†å²ï¼Œå´æ˜¯æ¯ä¸ªäººéƒ½å¿…é¡»å®Œæˆçš„ä¸€ä»½ç­”å·ã€‚å› ä¸ºäº†è§£è¿‡å»ï¼Œäº†è§£å†å²å¯ä»¥è®©æˆé•¿çš„è„šæ­¥æ›´æ²‰ç€ã€æ›´åšå®ï¼Œå¯ä»¥è®©è§†é‡æ›´å®½å¹¿ï¼Œå¿ƒèƒ¸æ›´åšå¤§ã€‚åœ¨ä¸€ä¸ªäººæˆé•¿çš„è¿‡ç¨‹ä¸­ï¼Œé™¤äº†æ–°é²œçš„ç©ºæ°”ï¼Œç¿çƒ‚çš„é˜³å…‰ä»¥å¤–ï¼Œæ›´éœ€è¦çš„å†·é™çš„æ€è€ƒï¼Œä»¥åŠå¿ƒçµçš„æ„ŸåŠ¨å’Œéœ‡æ’¼ï¼Œè€Œ ... (90 characters truncated) ... å’Œççˆ±ã€‚\nã€Šä¸‰æ¯›æµæµªè®°ã€‹ä¸ºä»€ä¹ˆç»ä¹…ä¸è¡°ï¼Ÿå› ä¸ºå®ƒæœ‰ç›Šäºäººä»¬çš„å¿ƒçµã€‚æŸ¯çµå…ˆç”Ÿåœ¨é¦™æ¸¯ç‰ˆåºè¨€ä¸­å†™é“ï¼šâ€œã€Šä¸‰æ¯›æµæµªè®°ã€‹æ˜¯ä¸€éƒ¨å¾ˆæœ‰è¶£å‘³çš„å°äººä¹¦ï¼Œä¹Ÿæ˜¯ä¸€éƒ¨ç»™æˆäººçœ‹çš„è­¦ä¸–ä¹¦ã€‚ä¸‰æ¯›èº«ä¸Šï¼ŒèƒŒè´Ÿç€æ²‰é‡çš„å†å²é˜´å½±ï¼Œä¹Ÿå¸¦äº†æ·±åˆ»çš„å†å²å¯ç¤ºï¼Œå‘ä¸–ç•Œå‘¼å”¤å’Œå¹³ï¼Œå‘¼å”¤å…¬æ­£ï¼Œå‘¼å”¤ä»æ…ˆï¼Œå‘¼å”¤åŒæƒ…ï¼Œå‘¼å”¤äººé“ï¼Œå‘¼å”¤æ–‡æ˜ï¼â€\næ‰€...\n', 'content': '', 'tags': ['æ¼«ç”»', 'ä¸‰æ¯›', 'å¼ ä¹å¹³', 'ç«¥å¹´', 'ä¸­å›½æ¼«ç”»', 'ç»å…¸', 'ç»˜æœ¬', 'ä¸­å›½'], 'picture': None}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:32:31] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) é”™è¯¯:  é‡å¤é”®è¿åå”¯ä¸€çº¦æŸ"book_pkey"
DETAIL:  é”®å€¼"(id)=(1000134)" å·²ç»å­˜åœ¨

[SQL: INSERT INTO book (id, title, author, publisher, original_title, translator, pub_year, pages, price, currency_unit, binding, isbn, author_intro, book_intro, content, tags, picture) VALUES (%(id)s, %(title)s, %(author)s, %(publisher)s, %(original_title)s, %(translator)s, %(pub_year)s, %(pages)s, %(price)s, %(currency_unit)s, %(binding)s, %(isbn)s, %(author_intro)s, %(book_intro)s, %(content)s, %(tags)s, %(picture)s)]
[parameters: {'id': '1000134', 'title': 'ä¸‰æ¯›æµæµªè®°å…¨é›†', 'author': 'å¼ ä¹å¹³', 'publisher': 'å°‘å¹´å„¿ç«¥å‡ºç‰ˆç¤¾', 'original_title': None, 'translator': None, 'pub_year': '2001-8-1', 'pages': 261, 'price': 3000, 'currency_unit': 'å…ƒ', 'binding': 'å¹³è£…(æ— ç›˜)', 'isbn': '9787532446674', 'author_intro': 'å¼ ä¹å¹³ï¼Œæ˜¯ä¸­å›½å½“ä»£æœ€æ°å‡ºçš„æ¼«ç”»å®¶ä¹‹ä¸€ã€‚1910å¹´11æœˆ10æ—¥å‡ºç”Ÿäºæµ™æ±Ÿçœæµ·ç›å¿æµ·å¡˜ä¹¡é»„åºµå¤´æ‘ã€‚çˆ¶äº²æ˜¯ä½ä¹¡æ‘æ•™å¸ˆã€‚æ¯äº²æ“…é•¿åˆºç»£ã€å‰ªçº¸ï¼Œæ˜¯å¼ ä¹å¹³æœ€æ—©çš„ç¾æœ¯å¯è’™è€…ã€‚\n1923å¹´ï¼Œåœ¨å°å­¦è€å¸ˆçš„æŒ‡å¯¼ä¸‹ï¼Œå°‘å¹´å¼ ä¹å¹³åˆ›ä½œäº†å¹³ç”Ÿç¬¬ä¸€å¼ æ¼«ç”»ã€Šä¸€è±•è´Ÿäº”åƒå…ƒã€‹ï¼Œè®½åˆºå†›é˜€æ›¹é”Ÿè´¿é€‰ï¼Œåœ¨å½“åœ°åå™ªä¸€æ—¶ã€‚\n1927å¹´åœ¨å®¶ä¹¡å ... (1770 characters truncated) ... æƒ…â€å¾æ–‡ç‰¹ç­‰å¥–ã€‚\n1991å¹´4æœˆ4æ—¥ï¼Œåœ¨ã€Šè§£æ”¾æ—¥æŠ¥ã€‹ä¸Šå‘è¡¨æœ€åä¸€å¹…æ¼«ç”»ä½œå“ï¼šâ€œçŒ«å“ºé¼ â€ã€‚\n1991å¹´å†¬ï¼Œå¼ ä¹å¹³å†³å®šå°†ã€Šä¸‰æ¯›ä»å†›è®°ã€‹åŸç¨¿æçŒ®ç»™ä¸Šæµ·ç¾æœ¯é¦†ã€‚\n1992å¹´1æœˆ23æ—¥ï¼Œåœ¨ä¸Šæµ·åä¸œåŒ»é™¢å› å¸å…¥æ€§è‚ºç‚ç—…æƒ…æ¶åŒ–ã€‚\n1992å¹´9æœˆ27æ—¥ä¸‹åˆ6æ—¶ï¼Œå¼ ä¹å¹³åœ¨ä¸Šæµ·åä¸œåŒ»é™¢ä¸ä¸–é•¿è¾ï¼Œäº«å¹´82å²ã€‚\n', 'book_intro': 'ã€Šä¸‰æ¯›æµæµªè®°ã€‹æ‰€æè¿°çš„ä¸‰æ¯›æ‰€ç”Ÿæ´»çš„é‚£ä¸ªæ—¶ä»£ï¼Œå·²ç»æˆä¸ºäº†è¿‡å»ï¼Œä½†æ˜¯äº†è§£è¿‡å»ï¼Œäº†è§£å†å²ï¼Œå´æ˜¯æ¯ä¸ªäººéƒ½å¿…é¡»å®Œæˆçš„ä¸€ä»½ç­”å·ã€‚å› ä¸ºäº†è§£è¿‡å»ï¼Œäº†è§£å†å²å¯ä»¥è®©æˆé•¿çš„è„šæ­¥æ›´æ²‰ç€ã€æ›´åšå®ï¼Œå¯ä»¥è®©è§†é‡æ›´å®½å¹¿ï¼Œå¿ƒèƒ¸æ›´åšå¤§ã€‚åœ¨ä¸€ä¸ªäººæˆé•¿çš„è¿‡ç¨‹ä¸­ï¼Œé™¤äº†æ–°é²œçš„ç©ºæ°”ï¼Œç¿çƒ‚çš„é˜³å…‰ä»¥å¤–ï¼Œæ›´éœ€è¦çš„å†·é™çš„æ€è€ƒï¼Œä»¥åŠå¿ƒçµçš„æ„ŸåŠ¨å’Œéœ‡æ’¼ï¼Œè€Œ ... (90 characters truncated) ... å’Œççˆ±ã€‚\nã€Šä¸‰æ¯›æµæµªè®°ã€‹ä¸ºä»€ä¹ˆç»ä¹…ä¸è¡°ï¼Ÿå› ä¸ºå®ƒæœ‰ç›Šäºäººä»¬çš„å¿ƒçµã€‚æŸ¯çµå…ˆç”Ÿåœ¨é¦™æ¸¯ç‰ˆåºè¨€ä¸­å†™é“ï¼šâ€œã€Šä¸‰æ¯›æµæµªè®°ã€‹æ˜¯ä¸€éƒ¨å¾ˆæœ‰è¶£å‘³çš„å°äººä¹¦ï¼Œä¹Ÿæ˜¯ä¸€éƒ¨ç»™æˆäººçœ‹çš„è­¦ä¸–ä¹¦ã€‚ä¸‰æ¯›èº«ä¸Šï¼ŒèƒŒè´Ÿç€æ²‰é‡çš„å†å²é˜´å½±ï¼Œä¹Ÿå¸¦äº†æ·±åˆ»çš„å†å²å¯ç¤ºï¼Œå‘ä¸–ç•Œå‘¼å”¤å’Œå¹³ï¼Œå‘¼å”¤å…¬æ­£ï¼Œå‘¼å”¤ä»æ…ˆï¼Œå‘¼å”¤åŒæƒ…ï¼Œå‘¼å”¤äººé“ï¼Œå‘¼å”¤æ–‡æ˜ï¼â€\næ‰€...\n', 'content': '', 'tags': ['æ¼«ç”»', 'ä¸‰æ¯›', 'å¼ ä¹å¹³', 'ç«¥å¹´', 'ä¸­å›½æ¼«ç”»', 'ç»å…¸', 'ç»˜æœ¬', 'ä¸­å›½'], 'picture': None}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:32:31] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) é”™è¯¯:  é‡å¤é”®è¿åå”¯ä¸€çº¦æŸ"book_pkey"
DETAIL:  é”®å€¼"(id)=(1000134)" å·²ç»å­˜åœ¨

[SQL: INSERT INTO book (id, title, author, publisher, original_title, translator, pub_year, pages, price, currency_unit, binding, isbn, author_intro, book_intro, content, tags, picture) VALUES (%(id)s, %(title)s, %(author)s, %(publisher)s, %(original_title)s, %(translator)s, %(pub_year)s, %(pages)s, %(price)s, %(currency_unit)s, %(binding)s, %(isbn)s, %(author_intro)s, %(book_intro)s, %(content)s, %(tags)s, %(picture)s)]
[parameters: {'id': '1000134', 'title': 'ä¸‰æ¯›æµæµªè®°å…¨é›†', 'author': 'å¼ ä¹å¹³', 'publisher': 'å°‘å¹´å„¿ç«¥å‡ºç‰ˆç¤¾', 'original_title': None, 'translator': None, 'pub_year': '2001-8-1', 'pages': 261, 'price': 3000, 'currency_unit': 'å…ƒ', 'binding': 'å¹³è£…(æ— ç›˜)', 'isbn': '9787532446674', 'author_intro': 'å¼ ä¹å¹³ï¼Œæ˜¯ä¸­å›½å½“ä»£æœ€æ°å‡ºçš„æ¼«ç”»å®¶ä¹‹ä¸€ã€‚1910å¹´11æœˆ10æ—¥å‡ºç”Ÿäºæµ™æ±Ÿçœæµ·ç›å¿æµ·å¡˜ä¹¡é»„åºµå¤´æ‘ã€‚çˆ¶äº²æ˜¯ä½ä¹¡æ‘æ•™å¸ˆã€‚æ¯äº²æ“…é•¿åˆºç»£ã€å‰ªçº¸ï¼Œæ˜¯å¼ ä¹å¹³æœ€æ—©çš„ç¾æœ¯å¯è’™è€…ã€‚\n1923å¹´ï¼Œåœ¨å°å­¦è€å¸ˆçš„æŒ‡å¯¼ä¸‹ï¼Œå°‘å¹´å¼ ä¹å¹³åˆ›ä½œäº†å¹³ç”Ÿç¬¬ä¸€å¼ æ¼«ç”»ã€Šä¸€è±•è´Ÿäº”åƒå…ƒã€‹ï¼Œè®½åˆºå†›é˜€æ›¹é”Ÿè´¿é€‰ï¼Œåœ¨å½“åœ°åå™ªä¸€æ—¶ã€‚\n1927å¹´åœ¨å®¶ä¹¡å ... (1770 characters truncated) ... æƒ…â€å¾æ–‡ç‰¹ç­‰å¥–ã€‚\n1991å¹´4æœˆ4æ—¥ï¼Œåœ¨ã€Šè§£æ”¾æ—¥æŠ¥ã€‹ä¸Šå‘è¡¨æœ€åä¸€å¹…æ¼«ç”»ä½œå“ï¼šâ€œçŒ«å“ºé¼ â€ã€‚\n1991å¹´å†¬ï¼Œå¼ ä¹å¹³å†³å®šå°†ã€Šä¸‰æ¯›ä»å†›è®°ã€‹åŸç¨¿æçŒ®ç»™ä¸Šæµ·ç¾æœ¯é¦†ã€‚\n1992å¹´1æœˆ23æ—¥ï¼Œåœ¨ä¸Šæµ·åä¸œåŒ»é™¢å› å¸å…¥æ€§è‚ºç‚ç—…æƒ…æ¶åŒ–ã€‚\n1992å¹´9æœˆ27æ—¥ä¸‹åˆ6æ—¶ï¼Œå¼ ä¹å¹³åœ¨ä¸Šæµ·åä¸œåŒ»é™¢ä¸ä¸–é•¿è¾ï¼Œäº«å¹´82å²ã€‚\n', 'book_intro': 'ã€Šä¸‰æ¯›æµæµªè®°ã€‹æ‰€æè¿°çš„ä¸‰æ¯›æ‰€ç”Ÿæ´»çš„é‚£ä¸ªæ—¶ä»£ï¼Œå·²ç»æˆä¸ºäº†è¿‡å»ï¼Œä½†æ˜¯äº†è§£è¿‡å»ï¼Œäº†è§£å†å²ï¼Œå´æ˜¯æ¯ä¸ªäººéƒ½å¿…é¡»å®Œæˆçš„ä¸€ä»½ç­”å·ã€‚å› ä¸ºäº†è§£è¿‡å»ï¼Œäº†è§£å†å²å¯ä»¥è®©æˆé•¿çš„è„šæ­¥æ›´æ²‰ç€ã€æ›´åšå®ï¼Œå¯ä»¥è®©è§†é‡æ›´å®½å¹¿ï¼Œå¿ƒèƒ¸æ›´åšå¤§ã€‚åœ¨ä¸€ä¸ªäººæˆé•¿çš„è¿‡ç¨‹ä¸­ï¼Œé™¤äº†æ–°é²œçš„ç©ºæ°”ï¼Œç¿çƒ‚çš„é˜³å…‰ä»¥å¤–ï¼Œæ›´éœ€è¦çš„å†·é™çš„æ€è€ƒï¼Œä»¥åŠå¿ƒçµçš„æ„ŸåŠ¨å’Œéœ‡æ’¼ï¼Œè€Œ ... (90 characters truncated) ... å’Œççˆ±ã€‚\nã€Šä¸‰æ¯›æµæµªè®°ã€‹ä¸ºä»€ä¹ˆç»ä¹…ä¸è¡°ï¼Ÿå› ä¸ºå®ƒæœ‰ç›Šäºäººä»¬çš„å¿ƒçµã€‚æŸ¯çµå…ˆç”Ÿåœ¨é¦™æ¸¯ç‰ˆåºè¨€ä¸­å†™é“ï¼šâ€œã€Šä¸‰æ¯›æµæµªè®°ã€‹æ˜¯ä¸€éƒ¨å¾ˆæœ‰è¶£å‘³çš„å°äººä¹¦ï¼Œä¹Ÿæ˜¯ä¸€éƒ¨ç»™æˆäººçœ‹çš„è­¦ä¸–ä¹¦ã€‚ä¸‰æ¯›èº«ä¸Šï¼ŒèƒŒè´Ÿç€æ²‰é‡çš„å†å²é˜´å½±ï¼Œä¹Ÿå¸¦äº†æ·±åˆ»çš„å†å²å¯ç¤ºï¼Œå‘ä¸–ç•Œå‘¼å”¤å’Œå¹³ï¼Œå‘¼å”¤å…¬æ­£ï¼Œå‘¼å”¤ä»æ…ˆï¼Œå‘¼å”¤åŒæƒ…ï¼Œå‘¼å”¤äººé“ï¼Œå‘¼å”¤æ–‡æ˜ï¼â€\næ‰€...\n', 'content': '', 'tags': ['æ¼«ç”»', 'ä¸‰æ¯›', 'å¼ ä¹å¹³', 'ç«¥å¹´', 'ä¸­å›½æ¼«ç”»', 'ç»å…¸', 'ç»˜æœ¬', 'ä¸­å›½'], 'picture': None}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:32:31] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) é”™è¯¯:  é‡å¤é”®è¿åå”¯ä¸€çº¦æŸ"book_pkey"
DETAIL:  é”®å€¼"(id)=(1000134)" å·²ç»å­˜åœ¨

[SQL: INSERT INTO book (id, title, author, publisher, original_title, translator, pub_year, pages, price, currency_unit, binding, isbn, author_intro, book_intro, content, tags, picture) VALUES (%(id)s, %(title)s, %(author)s, %(publisher)s, %(original_title)s, %(translator)s, %(pub_year)s, %(pages)s, %(price)s, %(currency_unit)s, %(binding)s, %(isbn)s, %(author_intro)s, %(book_intro)s, %(content)s, %(tags)s, %(picture)s)]
[parameters: {'id': '1000134', 'title': 'ä¸‰æ¯›æµæµªè®°å…¨é›†', 'author': 'å¼ ä¹å¹³', 'publisher': 'å°‘å¹´å„¿ç«¥å‡ºç‰ˆç¤¾', 'original_title': None, 'translator': None, 'pub_year': '2001-8-1', 'pages': 261, 'price': 3000, 'currency_unit': 'å…ƒ', 'binding': 'å¹³è£…(æ— ç›˜)', 'isbn': '9787532446674', 'author_intro': 'å¼ ä¹å¹³ï¼Œæ˜¯ä¸­å›½å½“ä»£æœ€æ°å‡ºçš„æ¼«ç”»å®¶ä¹‹ä¸€ã€‚1910å¹´11æœˆ10æ—¥å‡ºç”Ÿäºæµ™æ±Ÿçœæµ·ç›å¿æµ·å¡˜ä¹¡é»„åºµå¤´æ‘ã€‚çˆ¶äº²æ˜¯ä½ä¹¡æ‘æ•™å¸ˆã€‚æ¯äº²æ“…é•¿åˆºç»£ã€å‰ªçº¸ï¼Œæ˜¯å¼ ä¹å¹³æœ€æ—©çš„ç¾æœ¯å¯è’™è€…ã€‚\n1923å¹´ï¼Œåœ¨å°å­¦è€å¸ˆçš„æŒ‡å¯¼ä¸‹ï¼Œå°‘å¹´å¼ ä¹å¹³åˆ›ä½œäº†å¹³ç”Ÿç¬¬ä¸€å¼ æ¼«ç”»ã€Šä¸€è±•è´Ÿäº”åƒå…ƒã€‹ï¼Œè®½åˆºå†›é˜€æ›¹é”Ÿè´¿é€‰ï¼Œåœ¨å½“åœ°åå™ªä¸€æ—¶ã€‚\n1927å¹´åœ¨å®¶ä¹¡å ... (1770 characters truncated) ... æƒ…â€å¾æ–‡ç‰¹ç­‰å¥–ã€‚\n1991å¹´4æœˆ4æ—¥ï¼Œåœ¨ã€Šè§£æ”¾æ—¥æŠ¥ã€‹ä¸Šå‘è¡¨æœ€åä¸€å¹…æ¼«ç”»ä½œå“ï¼šâ€œçŒ«å“ºé¼ â€ã€‚\n1991å¹´å†¬ï¼Œå¼ ä¹å¹³å†³å®šå°†ã€Šä¸‰æ¯›ä»å†›è®°ã€‹åŸç¨¿æçŒ®ç»™ä¸Šæµ·ç¾æœ¯é¦†ã€‚\n1992å¹´1æœˆ23æ—¥ï¼Œåœ¨ä¸Šæµ·åä¸œåŒ»é™¢å› å¸å…¥æ€§è‚ºç‚ç—…æƒ…æ¶åŒ–ã€‚\n1992å¹´9æœˆ27æ—¥ä¸‹åˆ6æ—¶ï¼Œå¼ ä¹å¹³åœ¨ä¸Šæµ·åä¸œåŒ»é™¢ä¸ä¸–é•¿è¾ï¼Œäº«å¹´82å²ã€‚\n', 'book_intro': 'ã€Šä¸‰æ¯›æµæµªè®°ã€‹æ‰€æè¿°çš„ä¸‰æ¯›æ‰€ç”Ÿæ´»çš„é‚£ä¸ªæ—¶ä»£ï¼Œå·²ç»æˆä¸ºäº†è¿‡å»ï¼Œä½†æ˜¯äº†è§£è¿‡å»ï¼Œäº†è§£å†å²ï¼Œå´æ˜¯æ¯ä¸ªäººéƒ½å¿…é¡»å®Œæˆçš„ä¸€ä»½ç­”å·ã€‚å› ä¸ºäº†è§£è¿‡å»ï¼Œäº†è§£å†å²å¯ä»¥è®©æˆé•¿çš„è„šæ­¥æ›´æ²‰ç€ã€æ›´åšå®ï¼Œå¯ä»¥è®©è§†é‡æ›´å®½å¹¿ï¼Œå¿ƒèƒ¸æ›´åšå¤§ã€‚åœ¨ä¸€ä¸ªäººæˆé•¿çš„è¿‡ç¨‹ä¸­ï¼Œé™¤äº†æ–°é²œçš„ç©ºæ°”ï¼Œç¿çƒ‚çš„é˜³å…‰ä»¥å¤–ï¼Œæ›´éœ€è¦çš„å†·é™çš„æ€è€ƒï¼Œä»¥åŠå¿ƒçµçš„æ„ŸåŠ¨å’Œéœ‡æ’¼ï¼Œè€Œ ... (90 characters truncated) ... å’Œççˆ±ã€‚\nã€Šä¸‰æ¯›æµæµªè®°ã€‹ä¸ºä»€ä¹ˆç»ä¹…ä¸è¡°ï¼Ÿå› ä¸ºå®ƒæœ‰ç›Šäºäººä»¬çš„å¿ƒçµã€‚æŸ¯çµå…ˆç”Ÿåœ¨é¦™æ¸¯ç‰ˆåºè¨€ä¸­å†™é“ï¼šâ€œã€Šä¸‰æ¯›æµæµªè®°ã€‹æ˜¯ä¸€éƒ¨å¾ˆæœ‰è¶£å‘³çš„å°äººä¹¦ï¼Œä¹Ÿæ˜¯ä¸€éƒ¨ç»™æˆäººçœ‹çš„è­¦ä¸–ä¹¦ã€‚ä¸‰æ¯›èº«ä¸Šï¼ŒèƒŒè´Ÿç€æ²‰é‡çš„å†å²é˜´å½±ï¼Œä¹Ÿå¸¦äº†æ·±åˆ»çš„å†å²å¯ç¤ºï¼Œå‘ä¸–ç•Œå‘¼å”¤å’Œå¹³ï¼Œå‘¼å”¤å…¬æ­£ï¼Œå‘¼å”¤ä»æ…ˆï¼Œå‘¼å”¤åŒæƒ…ï¼Œå‘¼å”¤äººé“ï¼Œå‘¼å”¤æ–‡æ˜ï¼â€\næ‰€...\n', 'content': '', 'tags': ['æ¼«ç”»', 'ä¸‰æ¯›', 'å¼ ä¹å¹³', 'ç«¥å¹´', 'ä¸­å›½æ¼«ç”»', 'ç»å…¸', 'ç»˜æœ¬', 'ä¸­å›½'], 'picture': None}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:32:31] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) é”™è¯¯:  é‡å¤é”®è¿åå”¯ä¸€çº¦æŸ"book_pkey"
DETAIL:  é”®å€¼"(id)=(1000134)" å·²ç»å­˜åœ¨

[SQL: INSERT INTO book (id, title, author, publisher, original_title, translator, pub_year, pages, price, currency_unit, binding, isbn, author_intro, book_intro, content, tags, picture) VALUES (%(id)s, %(title)s, %(author)s, %(publisher)s, %(original_title)s, %(translator)s, %(pub_year)s, %(pages)s, %(price)s, %(currency_unit)s, %(binding)s, %(isbn)s, %(author_intro)s, %(book_intro)s, %(content)s, %(tags)s, %(picture)s)]
[parameters: {'id': '1000134', 'title': 'ä¸‰æ¯›æµæµªè®°å…¨é›†', 'author': 'å¼ ä¹å¹³', 'publisher': 'å°‘å¹´å„¿ç«¥å‡ºç‰ˆç¤¾', 'original_title': None, 'translator': None, 'pub_year': '2001-8-1', 'pages': 261, 'price': 3000, 'currency_unit': 'å…ƒ', 'binding': 'å¹³è£…(æ— ç›˜)', 'isbn': '9787532446674', 'author_intro': 'å¼ ä¹å¹³ï¼Œæ˜¯ä¸­å›½å½“ä»£æœ€æ°å‡ºçš„æ¼«ç”»å®¶ä¹‹ä¸€ã€‚1910å¹´11æœˆ10æ—¥å‡ºç”Ÿäºæµ™æ±Ÿçœæµ·ç›å¿æµ·å¡˜ä¹¡é»„åºµå¤´æ‘ã€‚çˆ¶äº²æ˜¯ä½ä¹¡æ‘æ•™å¸ˆã€‚æ¯äº²æ“…é•¿åˆºç»£ã€å‰ªçº¸ï¼Œæ˜¯å¼ ä¹å¹³æœ€æ—©çš„ç¾æœ¯å¯è’™è€…ã€‚\n1923å¹´ï¼Œåœ¨å°å­¦è€å¸ˆçš„æŒ‡å¯¼ä¸‹ï¼Œå°‘å¹´å¼ ä¹å¹³åˆ›ä½œäº†å¹³ç”Ÿç¬¬ä¸€å¼ æ¼«ç”»ã€Šä¸€è±•è´Ÿäº”åƒå…ƒã€‹ï¼Œè®½åˆºå†›é˜€æ›¹é”Ÿè´¿é€‰ï¼Œåœ¨å½“åœ°åå™ªä¸€æ—¶ã€‚\n1927å¹´åœ¨å®¶ä¹¡å ... (1770 characters truncated) ... æƒ…â€å¾æ–‡ç‰¹ç­‰å¥–ã€‚\n1991å¹´4æœˆ4æ—¥ï¼Œåœ¨ã€Šè§£æ”¾æ—¥æŠ¥ã€‹ä¸Šå‘è¡¨æœ€åä¸€å¹…æ¼«ç”»ä½œå“ï¼šâ€œçŒ«å“ºé¼ â€ã€‚\n1991å¹´å†¬ï¼Œå¼ ä¹å¹³å†³å®šå°†ã€Šä¸‰æ¯›ä»å†›è®°ã€‹åŸç¨¿æçŒ®ç»™ä¸Šæµ·ç¾æœ¯é¦†ã€‚\n1992å¹´1æœˆ23æ—¥ï¼Œåœ¨ä¸Šæµ·åä¸œåŒ»é™¢å› å¸å…¥æ€§è‚ºç‚ç—…æƒ…æ¶åŒ–ã€‚\n1992å¹´9æœˆ27æ—¥ä¸‹åˆ6æ—¶ï¼Œå¼ ä¹å¹³åœ¨ä¸Šæµ·åä¸œåŒ»é™¢ä¸ä¸–é•¿è¾ï¼Œäº«å¹´82å²ã€‚\n', 'book_intro': 'ã€Šä¸‰æ¯›æµæµªè®°ã€‹æ‰€æè¿°çš„ä¸‰æ¯›æ‰€ç”Ÿæ´»çš„é‚£ä¸ªæ—¶ä»£ï¼Œå·²ç»æˆä¸ºäº†è¿‡å»ï¼Œä½†æ˜¯äº†è§£è¿‡å»ï¼Œäº†è§£å†å²ï¼Œå´æ˜¯æ¯ä¸ªäººéƒ½å¿…é¡»å®Œæˆçš„ä¸€ä»½ç­”å·ã€‚å› ä¸ºäº†è§£è¿‡å»ï¼Œäº†è§£å†å²å¯ä»¥è®©æˆé•¿çš„è„šæ­¥æ›´æ²‰ç€ã€æ›´åšå®ï¼Œå¯ä»¥è®©è§†é‡æ›´å®½å¹¿ï¼Œå¿ƒèƒ¸æ›´åšå¤§ã€‚åœ¨ä¸€ä¸ªäººæˆé•¿çš„è¿‡ç¨‹ä¸­ï¼Œé™¤äº†æ–°é²œçš„ç©ºæ°”ï¼Œç¿çƒ‚çš„é˜³å…‰ä»¥å¤–ï¼Œæ›´éœ€è¦çš„å†·é™çš„æ€è€ƒï¼Œä»¥åŠå¿ƒçµçš„æ„ŸåŠ¨å’Œéœ‡æ’¼ï¼Œè€Œ ... (90 characters truncated) ... å’Œççˆ±ã€‚\nã€Šä¸‰æ¯›æµæµªè®°ã€‹ä¸ºä»€ä¹ˆç»ä¹…ä¸è¡°ï¼Ÿå› ä¸ºå®ƒæœ‰ç›Šäºäººä»¬çš„å¿ƒçµã€‚æŸ¯çµå…ˆç”Ÿåœ¨é¦™æ¸¯ç‰ˆåºè¨€ä¸­å†™é“ï¼šâ€œã€Šä¸‰æ¯›æµæµªè®°ã€‹æ˜¯ä¸€éƒ¨å¾ˆæœ‰è¶£å‘³çš„å°äººä¹¦ï¼Œä¹Ÿæ˜¯ä¸€éƒ¨ç»™æˆäººçœ‹çš„è­¦ä¸–ä¹¦ã€‚ä¸‰æ¯›èº«ä¸Šï¼ŒèƒŒè´Ÿç€æ²‰é‡çš„å†å²é˜´å½±ï¼Œä¹Ÿå¸¦äº†æ·±åˆ»çš„å†å²å¯ç¤ºï¼Œå‘ä¸–ç•Œå‘¼å”¤å’Œå¹³ï¼Œå‘¼å”¤å…¬æ­£ï¼Œå‘¼å”¤ä»æ…ˆï¼Œå‘¼å”¤åŒæƒ…ï¼Œå‘¼å”¤äººé“ï¼Œå‘¼å”¤æ–‡æ˜ï¼â€\næ‰€...\n', 'content': '', 'tags': ['æ¼«ç”»', 'ä¸‰æ¯›', 'å¼ ä¹å¹³', 'ç«¥å¹´', 'ä¸­å›½æ¼«ç”»', 'ç»å…¸', 'ç»˜æœ¬', 'ä¸­å›½'], 'picture': None}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:32:31] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) é”™è¯¯:  é‡å¤é”®è¿åå”¯ä¸€çº¦æŸ"book_pkey"
DETAIL:  é”®å€¼"(id)=(1000134)" å·²ç»å­˜åœ¨

[SQL: INSERT INTO book (id, title, author, publisher, original_title, translator, pub_year, pages, price, currency_unit, binding, isbn, author_intro, book_intro, content, tags, picture) VALUES (%(id)s, %(title)s, %(author)s, %(publisher)s, %(original_title)s, %(translator)s, %(pub_year)s, %(pages)s, %(price)s, %(currency_unit)s, %(binding)s, %(isbn)s, %(author_intro)s, %(book_intro)s, %(content)s, %(tags)s, %(picture)s)]
[parameters: {'id': '1000134', 'title': 'ä¸‰æ¯›æµæµªè®°å…¨é›†', 'author': 'å¼ ä¹å¹³', 'publisher': 'å°‘å¹´å„¿ç«¥å‡ºç‰ˆç¤¾', 'original_title': None, 'translator': None, 'pub_year': '2001-8-1', 'pages': 261, 'price': 3000, 'currency_unit': 'å…ƒ', 'binding': 'å¹³è£…(æ— ç›˜)', 'isbn': '9787532446674', 'author_intro': 'å¼ ä¹å¹³ï¼Œæ˜¯ä¸­å›½å½“ä»£æœ€æ°å‡ºçš„æ¼«ç”»å®¶ä¹‹ä¸€ã€‚1910å¹´11æœˆ10æ—¥å‡ºç”Ÿäºæµ™æ±Ÿçœæµ·ç›å¿æµ·å¡˜ä¹¡é»„åºµå¤´æ‘ã€‚çˆ¶äº²æ˜¯ä½ä¹¡æ‘æ•™å¸ˆã€‚æ¯äº²æ“…é•¿åˆºç»£ã€å‰ªçº¸ï¼Œæ˜¯å¼ ä¹å¹³æœ€æ—©çš„ç¾æœ¯å¯è’™è€…ã€‚\n1923å¹´ï¼Œåœ¨å°å­¦è€å¸ˆçš„æŒ‡å¯¼ä¸‹ï¼Œå°‘å¹´å¼ ä¹å¹³åˆ›ä½œäº†å¹³ç”Ÿç¬¬ä¸€å¼ æ¼«ç”»ã€Šä¸€è±•è´Ÿäº”åƒå…ƒã€‹ï¼Œè®½åˆºå†›é˜€æ›¹é”Ÿè´¿é€‰ï¼Œåœ¨å½“åœ°åå™ªä¸€æ—¶ã€‚\n1927å¹´åœ¨å®¶ä¹¡å ... (1770 characters truncated) ... æƒ…â€å¾æ–‡ç‰¹ç­‰å¥–ã€‚\n1991å¹´4æœˆ4æ—¥ï¼Œåœ¨ã€Šè§£æ”¾æ—¥æŠ¥ã€‹ä¸Šå‘è¡¨æœ€åä¸€å¹…æ¼«ç”»ä½œå“ï¼šâ€œçŒ«å“ºé¼ â€ã€‚\n1991å¹´å†¬ï¼Œå¼ ä¹å¹³å†³å®šå°†ã€Šä¸‰æ¯›ä»å†›è®°ã€‹åŸç¨¿æçŒ®ç»™ä¸Šæµ·ç¾æœ¯é¦†ã€‚\n1992å¹´1æœˆ23æ—¥ï¼Œåœ¨ä¸Šæµ·åä¸œåŒ»é™¢å› å¸å…¥æ€§è‚ºç‚ç—…æƒ…æ¶åŒ–ã€‚\n1992å¹´9æœˆ27æ—¥ä¸‹åˆ6æ—¶ï¼Œå¼ ä¹å¹³åœ¨ä¸Šæµ·åä¸œåŒ»é™¢ä¸ä¸–é•¿è¾ï¼Œäº«å¹´82å²ã€‚\n', 'book_intro': 'ã€Šä¸‰æ¯›æµæµªè®°ã€‹æ‰€æè¿°çš„ä¸‰æ¯›æ‰€ç”Ÿæ´»çš„é‚£ä¸ªæ—¶ä»£ï¼Œå·²ç»æˆä¸ºäº†è¿‡å»ï¼Œä½†æ˜¯äº†è§£è¿‡å»ï¼Œäº†è§£å†å²ï¼Œå´æ˜¯æ¯ä¸ªäººéƒ½å¿…é¡»å®Œæˆçš„ä¸€ä»½ç­”å·ã€‚å› ä¸ºäº†è§£è¿‡å»ï¼Œäº†è§£å†å²å¯ä»¥è®©æˆé•¿çš„è„šæ­¥æ›´æ²‰ç€ã€æ›´åšå®ï¼Œå¯ä»¥è®©è§†é‡æ›´å®½å¹¿ï¼Œå¿ƒèƒ¸æ›´åšå¤§ã€‚åœ¨ä¸€ä¸ªäººæˆé•¿çš„è¿‡ç¨‹ä¸­ï¼Œé™¤äº†æ–°é²œçš„ç©ºæ°”ï¼Œç¿çƒ‚çš„é˜³å…‰ä»¥å¤–ï¼Œæ›´éœ€è¦çš„å†·é™çš„æ€è€ƒï¼Œä»¥åŠå¿ƒçµçš„æ„ŸåŠ¨å’Œéœ‡æ’¼ï¼Œè€Œ ... (90 characters truncated) ... å’Œççˆ±ã€‚\nã€Šä¸‰æ¯›æµæµªè®°ã€‹ä¸ºä»€ä¹ˆç»ä¹…ä¸è¡°ï¼Ÿå› ä¸ºå®ƒæœ‰ç›Šäºäººä»¬çš„å¿ƒçµã€‚æŸ¯çµå…ˆç”Ÿåœ¨é¦™æ¸¯ç‰ˆåºè¨€ä¸­å†™é“ï¼šâ€œã€Šä¸‰æ¯›æµæµªè®°ã€‹æ˜¯ä¸€éƒ¨å¾ˆæœ‰è¶£å‘³çš„å°äººä¹¦ï¼Œä¹Ÿæ˜¯ä¸€éƒ¨ç»™æˆäººçœ‹çš„è­¦ä¸–ä¹¦ã€‚ä¸‰æ¯›èº«ä¸Šï¼ŒèƒŒè´Ÿç€æ²‰é‡çš„å†å²é˜´å½±ï¼Œä¹Ÿå¸¦äº†æ·±åˆ»çš„å†å²å¯ç¤ºï¼Œå‘ä¸–ç•Œå‘¼å”¤å’Œå¹³ï¼Œå‘¼å”¤å…¬æ­£ï¼Œå‘¼å”¤ä»æ…ˆï¼Œå‘¼å”¤åŒæƒ…ï¼Œå‘¼å”¤äººé“ï¼Œå‘¼å”¤æ–‡æ˜ï¼â€\næ‰€...\n', 'content': '', 'tags': ['æ¼«ç”»', 'ä¸‰æ¯›', 'å¼ ä¹å¹³', 'ç«¥å¹´', 'ä¸­å›½æ¼«ç”»', 'ç»å…¸', 'ç»˜æœ¬', 'ä¸­å›½'], 'picture': None}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:32:31] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) é”™è¯¯:  é‡å¤é”®è¿åå”¯ä¸€çº¦æŸ"book_pkey"
DETAIL:  é”®å€¼"(id)=(1000134)" å·²ç»å­˜åœ¨

[SQL: INSERT INTO book (id, title, author, publisher, original_title, translator, pub_year, pages, price, currency_unit, binding, isbn, author_intro, book_intro, content, tags, picture) VALUES (%(id)s, %(title)s, %(author)s, %(publisher)s, %(original_title)s, %(translator)s, %(pub_year)s, %(pages)s, %(price)s, %(currency_unit)s, %(binding)s, %(isbn)s, %(author_intro)s, %(book_intro)s, %(content)s, %(tags)s, %(picture)s)]
[parameters: {'id': '1000134', 'title': 'ä¸‰æ¯›æµæµªè®°å…¨é›†', 'author': 'å¼ ä¹å¹³', 'publisher': 'å°‘å¹´å„¿ç«¥å‡ºç‰ˆç¤¾', 'original_title': None, 'translator': None, 'pub_year': '2001-8-1', 'pages': 261, 'price': 3000, 'currency_unit': 'å…ƒ', 'binding': 'å¹³è£…(æ— ç›˜)', 'isbn': '9787532446674', 'author_intro': 'å¼ ä¹å¹³ï¼Œæ˜¯ä¸­å›½å½“ä»£æœ€æ°å‡ºçš„æ¼«ç”»å®¶ä¹‹ä¸€ã€‚1910å¹´11æœˆ10æ—¥å‡ºç”Ÿäºæµ™æ±Ÿçœæµ·ç›å¿æµ·å¡˜ä¹¡é»„åºµå¤´æ‘ã€‚çˆ¶äº²æ˜¯ä½ä¹¡æ‘æ•™å¸ˆã€‚æ¯äº²æ“…é•¿åˆºç»£ã€å‰ªçº¸ï¼Œæ˜¯å¼ ä¹å¹³æœ€æ—©çš„ç¾æœ¯å¯è’™è€…ã€‚\n1923å¹´ï¼Œåœ¨å°å­¦è€å¸ˆçš„æŒ‡å¯¼ä¸‹ï¼Œå°‘å¹´å¼ ä¹å¹³åˆ›ä½œäº†å¹³ç”Ÿç¬¬ä¸€å¼ æ¼«ç”»ã€Šä¸€è±•è´Ÿäº”åƒå…ƒã€‹ï¼Œè®½åˆºå†›é˜€æ›¹é”Ÿè´¿é€‰ï¼Œåœ¨å½“åœ°åå™ªä¸€æ—¶ã€‚\n1927å¹´åœ¨å®¶ä¹¡å ... (1770 characters truncated) ... æƒ…â€å¾æ–‡ç‰¹ç­‰å¥–ã€‚\n1991å¹´4æœˆ4æ—¥ï¼Œåœ¨ã€Šè§£æ”¾æ—¥æŠ¥ã€‹ä¸Šå‘è¡¨æœ€åä¸€å¹…æ¼«ç”»ä½œå“ï¼šâ€œçŒ«å“ºé¼ â€ã€‚\n1991å¹´å†¬ï¼Œå¼ ä¹å¹³å†³å®šå°†ã€Šä¸‰æ¯›ä»å†›è®°ã€‹åŸç¨¿æçŒ®ç»™ä¸Šæµ·ç¾æœ¯é¦†ã€‚\n1992å¹´1æœˆ23æ—¥ï¼Œåœ¨ä¸Šæµ·åä¸œåŒ»é™¢å› å¸å…¥æ€§è‚ºç‚ç—…æƒ…æ¶åŒ–ã€‚\n1992å¹´9æœˆ27æ—¥ä¸‹åˆ6æ—¶ï¼Œå¼ ä¹å¹³åœ¨ä¸Šæµ·åä¸œåŒ»é™¢ä¸ä¸–é•¿è¾ï¼Œäº«å¹´82å²ã€‚\n', 'book_intro': 'ã€Šä¸‰æ¯›æµæµªè®°ã€‹æ‰€æè¿°çš„ä¸‰æ¯›æ‰€ç”Ÿæ´»çš„é‚£ä¸ªæ—¶ä»£ï¼Œå·²ç»æˆä¸ºäº†è¿‡å»ï¼Œä½†æ˜¯äº†è§£è¿‡å»ï¼Œäº†è§£å†å²ï¼Œå´æ˜¯æ¯ä¸ªäººéƒ½å¿…é¡»å®Œæˆçš„ä¸€ä»½ç­”å·ã€‚å› ä¸ºäº†è§£è¿‡å»ï¼Œäº†è§£å†å²å¯ä»¥è®©æˆé•¿çš„è„šæ­¥æ›´æ²‰ç€ã€æ›´åšå®ï¼Œå¯ä»¥è®©è§†é‡æ›´å®½å¹¿ï¼Œå¿ƒèƒ¸æ›´åšå¤§ã€‚åœ¨ä¸€ä¸ªäººæˆé•¿çš„è¿‡ç¨‹ä¸­ï¼Œé™¤äº†æ–°é²œçš„ç©ºæ°”ï¼Œç¿çƒ‚çš„é˜³å…‰ä»¥å¤–ï¼Œæ›´éœ€è¦çš„å†·é™çš„æ€è€ƒï¼Œä»¥åŠå¿ƒçµçš„æ„ŸåŠ¨å’Œéœ‡æ’¼ï¼Œè€Œ ... (90 characters truncated) ... å’Œççˆ±ã€‚\nã€Šä¸‰æ¯›æµæµªè®°ã€‹ä¸ºä»€ä¹ˆç»ä¹…ä¸è¡°ï¼Ÿå› ä¸ºå®ƒæœ‰ç›Šäºäººä»¬çš„å¿ƒçµã€‚æŸ¯çµå…ˆç”Ÿåœ¨é¦™æ¸¯ç‰ˆåºè¨€ä¸­å†™é“ï¼šâ€œã€Šä¸‰æ¯›æµæµªè®°ã€‹æ˜¯ä¸€éƒ¨å¾ˆæœ‰è¶£å‘³çš„å°äººä¹¦ï¼Œä¹Ÿæ˜¯ä¸€éƒ¨ç»™æˆäººçœ‹çš„è­¦ä¸–ä¹¦ã€‚ä¸‰æ¯›èº«ä¸Šï¼ŒèƒŒè´Ÿç€æ²‰é‡çš„å†å²é˜´å½±ï¼Œä¹Ÿå¸¦äº†æ·±åˆ»çš„å†å²å¯ç¤ºï¼Œå‘ä¸–ç•Œå‘¼å”¤å’Œå¹³ï¼Œå‘¼å”¤å…¬æ­£ï¼Œå‘¼å”¤ä»æ…ˆï¼Œå‘¼å”¤åŒæƒ…ï¼Œå‘¼å”¤äººé“ï¼Œå‘¼å”¤æ–‡æ˜ï¼â€\næ‰€...\n', 'content': '', 'tags': ['æ¼«ç”»', 'ä¸‰æ¯›', 'å¼ ä¹å¹³', 'ç«¥å¹´', 'ä¸­å›½æ¼«ç”»', 'ç»å…¸', 'ç»˜æœ¬', 'ä¸­å›½'], 'picture': None}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:32:32] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) é”™è¯¯:  é‡å¤é”®è¿åå”¯ä¸€çº¦æŸ"book_pkey"
DETAIL:  é”®å€¼"(id)=(1000134)" å·²ç»å­˜åœ¨

[SQL: INSERT INTO book (id, title, author, publisher, original_title, translator, pub_year, pages, price, currency_unit, binding, isbn, author_intro, book_intro, content, tags, picture) VALUES (%(id)s, %(title)s, %(author)s, %(publisher)s, %(original_title)s, %(translator)s, %(pub_year)s, %(pages)s, %(price)s, %(currency_unit)s, %(binding)s, %(isbn)s, %(author_intro)s, %(book_intro)s, %(content)s, %(tags)s, %(picture)s)]
[parameters: {'id': '1000134', 'title': 'ä¸‰æ¯›æµæµªè®°å…¨é›†', 'author': 'å¼ ä¹å¹³', 'publisher': 'å°‘å¹´å„¿ç«¥å‡ºç‰ˆç¤¾', 'original_title': None, 'translator': None, 'pub_year': '2001-8-1', 'pages': 261, 'price': 3000, 'currency_unit': 'å…ƒ', 'binding': 'å¹³è£…(æ— ç›˜)', 'isbn': '9787532446674', 'author_intro': 'å¼ ä¹å¹³ï¼Œæ˜¯ä¸­å›½å½“ä»£æœ€æ°å‡ºçš„æ¼«ç”»å®¶ä¹‹ä¸€ã€‚1910å¹´11æœˆ10æ—¥å‡ºç”Ÿäºæµ™æ±Ÿçœæµ·ç›å¿æµ·å¡˜ä¹¡é»„åºµå¤´æ‘ã€‚çˆ¶äº²æ˜¯ä½ä¹¡æ‘æ•™å¸ˆã€‚æ¯äº²æ“…é•¿åˆºç»£ã€å‰ªçº¸ï¼Œæ˜¯å¼ ä¹å¹³æœ€æ—©çš„ç¾æœ¯å¯è’™è€…ã€‚\n1923å¹´ï¼Œåœ¨å°å­¦è€å¸ˆçš„æŒ‡å¯¼ä¸‹ï¼Œå°‘å¹´å¼ ä¹å¹³åˆ›ä½œäº†å¹³ç”Ÿç¬¬ä¸€å¼ æ¼«ç”»ã€Šä¸€è±•è´Ÿäº”åƒå…ƒã€‹ï¼Œè®½åˆºå†›é˜€æ›¹é”Ÿè´¿é€‰ï¼Œåœ¨å½“åœ°åå™ªä¸€æ—¶ã€‚\n1927å¹´åœ¨å®¶ä¹¡å ... (1770 characters truncated) ... æƒ…â€å¾æ–‡ç‰¹ç­‰å¥–ã€‚\n1991å¹´4æœˆ4æ—¥ï¼Œåœ¨ã€Šè§£æ”¾æ—¥æŠ¥ã€‹ä¸Šå‘è¡¨æœ€åä¸€å¹…æ¼«ç”»ä½œå“ï¼šâ€œçŒ«å“ºé¼ â€ã€‚\n1991å¹´å†¬ï¼Œå¼ ä¹å¹³å†³å®šå°†ã€Šä¸‰æ¯›ä»å†›è®°ã€‹åŸç¨¿æçŒ®ç»™ä¸Šæµ·ç¾æœ¯é¦†ã€‚\n1992å¹´1æœˆ23æ—¥ï¼Œåœ¨ä¸Šæµ·åä¸œåŒ»é™¢å› å¸å…¥æ€§è‚ºç‚ç—…æƒ…æ¶åŒ–ã€‚\n1992å¹´9æœˆ27æ—¥ä¸‹åˆ6æ—¶ï¼Œå¼ ä¹å¹³åœ¨ä¸Šæµ·åä¸œåŒ»é™¢ä¸ä¸–é•¿è¾ï¼Œäº«å¹´82å²ã€‚\n', 'book_intro': 'ã€Šä¸‰æ¯›æµæµªè®°ã€‹æ‰€æè¿°çš„ä¸‰æ¯›æ‰€ç”Ÿæ´»çš„é‚£ä¸ªæ—¶ä»£ï¼Œå·²ç»æˆä¸ºäº†è¿‡å»ï¼Œä½†æ˜¯äº†è§£è¿‡å»ï¼Œäº†è§£å†å²ï¼Œå´æ˜¯æ¯ä¸ªäººéƒ½å¿…é¡»å®Œæˆçš„ä¸€ä»½ç­”å·ã€‚å› ä¸ºäº†è§£è¿‡å»ï¼Œäº†è§£å†å²å¯ä»¥è®©æˆé•¿çš„è„šæ­¥æ›´æ²‰ç€ã€æ›´åšå®ï¼Œå¯ä»¥è®©è§†é‡æ›´å®½å¹¿ï¼Œå¿ƒèƒ¸æ›´åšå¤§ã€‚åœ¨ä¸€ä¸ªäººæˆé•¿çš„è¿‡ç¨‹ä¸­ï¼Œé™¤äº†æ–°é²œçš„ç©ºæ°”ï¼Œç¿çƒ‚çš„é˜³å…‰ä»¥å¤–ï¼Œæ›´éœ€è¦çš„å†·é™çš„æ€è€ƒï¼Œä»¥åŠå¿ƒçµçš„æ„ŸåŠ¨å’Œéœ‡æ’¼ï¼Œè€Œ ... (90 characters truncated) ... å’Œççˆ±ã€‚\nã€Šä¸‰æ¯›æµæµªè®°ã€‹ä¸ºä»€ä¹ˆç»ä¹…ä¸è¡°ï¼Ÿå› ä¸ºå®ƒæœ‰ç›Šäºäººä»¬çš„å¿ƒçµã€‚æŸ¯çµå…ˆç”Ÿåœ¨é¦™æ¸¯ç‰ˆåºè¨€ä¸­å†™é“ï¼šâ€œã€Šä¸‰æ¯›æµæµªè®°ã€‹æ˜¯ä¸€éƒ¨å¾ˆæœ‰è¶£å‘³çš„å°äººä¹¦ï¼Œä¹Ÿæ˜¯ä¸€éƒ¨ç»™æˆäººçœ‹çš„è­¦ä¸–ä¹¦ã€‚ä¸‰æ¯›èº«ä¸Šï¼ŒèƒŒè´Ÿç€æ²‰é‡çš„å†å²é˜´å½±ï¼Œä¹Ÿå¸¦äº†æ·±åˆ»çš„å†å²å¯ç¤ºï¼Œå‘ä¸–ç•Œå‘¼å”¤å’Œå¹³ï¼Œå‘¼å”¤å…¬æ­£ï¼Œå‘¼å”¤ä»æ…ˆï¼Œå‘¼å”¤åŒæƒ…ï¼Œå‘¼å”¤äººé“ï¼Œå‘¼å”¤æ–‡æ˜ï¼â€\næ‰€...\n', 'content': '', 'tags': ['æ¼«ç”»', 'ä¸‰æ¯›', 'å¼ ä¹å¹³', 'ç«¥å¹´', 'ä¸­å›½æ¼«ç”»', 'ç»å…¸', 'ç»˜æœ¬', 'ä¸­å›½'], 'picture': None}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:32:32] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) é”™è¯¯:  é‡å¤é”®è¿åå”¯ä¸€çº¦æŸ"book_pkey"
DETAIL:  é”®å€¼"(id)=(1000134)" å·²ç»å­˜åœ¨

[SQL: INSERT INTO book (id, title, author, publisher, original_title, translator, pub_year, pages, price, currency_unit, binding, isbn, author_intro, book_intro, content, tags, picture) VALUES (%(id)s, %(title)s, %(author)s, %(publisher)s, %(original_title)s, %(translator)s, %(pub_year)s, %(pages)s, %(price)s, %(currency_unit)s, %(binding)s, %(isbn)s, %(author_intro)s, %(book_intro)s, %(content)s, %(tags)s, %(picture)s)]
[parameters: {'id': '1000134', 'title': 'ä¸‰æ¯›æµæµªè®°å…¨é›†', 'author': 'å¼ ä¹å¹³', 'publisher': 'å°‘å¹´å„¿ç«¥å‡ºç‰ˆç¤¾', 'original_title': None, 'translator': None, 'pub_year': '2001-8-1', 'pages': 261, 'price': 3000, 'currency_unit': 'å…ƒ', 'binding': 'å¹³è£…(æ— ç›˜)', 'isbn': '9787532446674', 'author_intro': 'å¼ ä¹å¹³ï¼Œæ˜¯ä¸­å›½å½“ä»£æœ€æ°å‡ºçš„æ¼«ç”»å®¶ä¹‹ä¸€ã€‚1910å¹´11æœˆ10æ—¥å‡ºç”Ÿäºæµ™æ±Ÿçœæµ·ç›å¿æµ·å¡˜ä¹¡é»„åºµå¤´æ‘ã€‚çˆ¶äº²æ˜¯ä½ä¹¡æ‘æ•™å¸ˆã€‚æ¯äº²æ“…é•¿åˆºç»£ã€å‰ªçº¸ï¼Œæ˜¯å¼ ä¹å¹³æœ€æ—©çš„ç¾æœ¯å¯è’™è€…ã€‚\n1923å¹´ï¼Œåœ¨å°å­¦è€å¸ˆçš„æŒ‡å¯¼ä¸‹ï¼Œå°‘å¹´å¼ ä¹å¹³åˆ›ä½œäº†å¹³ç”Ÿç¬¬ä¸€å¼ æ¼«ç”»ã€Šä¸€è±•è´Ÿäº”åƒå…ƒã€‹ï¼Œè®½åˆºå†›é˜€æ›¹é”Ÿè´¿é€‰ï¼Œåœ¨å½“åœ°åå™ªä¸€æ—¶ã€‚\n1927å¹´åœ¨å®¶ä¹¡å ... (1770 characters truncated) ... æƒ…â€å¾æ–‡ç‰¹ç­‰å¥–ã€‚\n1991å¹´4æœˆ4æ—¥ï¼Œåœ¨ã€Šè§£æ”¾æ—¥æŠ¥ã€‹ä¸Šå‘è¡¨æœ€åä¸€å¹…æ¼«ç”»ä½œå“ï¼šâ€œçŒ«å“ºé¼ â€ã€‚\n1991å¹´å†¬ï¼Œå¼ ä¹å¹³å†³å®šå°†ã€Šä¸‰æ¯›ä»å†›è®°ã€‹åŸç¨¿æçŒ®ç»™ä¸Šæµ·ç¾æœ¯é¦†ã€‚\n1992å¹´1æœˆ23æ—¥ï¼Œåœ¨ä¸Šæµ·åä¸œåŒ»é™¢å› å¸å…¥æ€§è‚ºç‚ç—…æƒ…æ¶åŒ–ã€‚\n1992å¹´9æœˆ27æ—¥ä¸‹åˆ6æ—¶ï¼Œå¼ ä¹å¹³åœ¨ä¸Šæµ·åä¸œåŒ»é™¢ä¸ä¸–é•¿è¾ï¼Œäº«å¹´82å²ã€‚\n', 'book_intro': 'ã€Šä¸‰æ¯›æµæµªè®°ã€‹æ‰€æè¿°çš„ä¸‰æ¯›æ‰€ç”Ÿæ´»çš„é‚£ä¸ªæ—¶ä»£ï¼Œå·²ç»æˆä¸ºäº†è¿‡å»ï¼Œä½†æ˜¯äº†è§£è¿‡å»ï¼Œäº†è§£å†å²ï¼Œå´æ˜¯æ¯ä¸ªäººéƒ½å¿…é¡»å®Œæˆçš„ä¸€ä»½ç­”å·ã€‚å› ä¸ºäº†è§£è¿‡å»ï¼Œäº†è§£å†å²å¯ä»¥è®©æˆé•¿çš„è„šæ­¥æ›´æ²‰ç€ã€æ›´åšå®ï¼Œå¯ä»¥è®©è§†é‡æ›´å®½å¹¿ï¼Œå¿ƒèƒ¸æ›´åšå¤§ã€‚åœ¨ä¸€ä¸ªäººæˆé•¿çš„è¿‡ç¨‹ä¸­ï¼Œé™¤äº†æ–°é²œçš„ç©ºæ°”ï¼Œç¿çƒ‚çš„é˜³å…‰ä»¥å¤–ï¼Œæ›´éœ€è¦çš„å†·é™çš„æ€è€ƒï¼Œä»¥åŠå¿ƒçµçš„æ„ŸåŠ¨å’Œéœ‡æ’¼ï¼Œè€Œ ... (90 characters truncated) ... å’Œççˆ±ã€‚\nã€Šä¸‰æ¯›æµæµªè®°ã€‹ä¸ºä»€ä¹ˆç»ä¹…ä¸è¡°ï¼Ÿå› ä¸ºå®ƒæœ‰ç›Šäºäººä»¬çš„å¿ƒçµã€‚æŸ¯çµå…ˆç”Ÿåœ¨é¦™æ¸¯ç‰ˆåºè¨€ä¸­å†™é“ï¼šâ€œã€Šä¸‰æ¯›æµæµªè®°ã€‹æ˜¯ä¸€éƒ¨å¾ˆæœ‰è¶£å‘³çš„å°äººä¹¦ï¼Œä¹Ÿæ˜¯ä¸€éƒ¨ç»™æˆäººçœ‹çš„è­¦ä¸–ä¹¦ã€‚ä¸‰æ¯›èº«ä¸Šï¼ŒèƒŒè´Ÿç€æ²‰é‡çš„å†å²é˜´å½±ï¼Œä¹Ÿå¸¦äº†æ·±åˆ»çš„å†å²å¯ç¤ºï¼Œå‘ä¸–ç•Œå‘¼å”¤å’Œå¹³ï¼Œå‘¼å”¤å…¬æ­£ï¼Œå‘¼å”¤ä»æ…ˆï¼Œå‘¼å”¤åŒæƒ…ï¼Œå‘¼å”¤äººé“ï¼Œå‘¼å”¤æ–‡æ˜ï¼â€\næ‰€...\n', 'content': '', 'tags': ['æ¼«ç”»', 'ä¸‰æ¯›', 'å¼ ä¹å¹³', 'ç«¥å¹´', 'ä¸­å›½æ¼«ç”»', 'ç»å…¸', 'ç»˜æœ¬', 'ä¸­å›½'], 'picture': None}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:32:32] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) é”™è¯¯:  é‡å¤é”®è¿åå”¯ä¸€çº¦æŸ"book_pkey"
DETAIL:  é”®å€¼"(id)=(1000134)" å·²ç»å­˜åœ¨

[SQL: INSERT INTO book (id, title, author, publisher, original_title, translator, pub_year, pages, price, currency_unit, binding, isbn, author_intro, book_intro, content, tags, picture) VALUES (%(id)s, %(title)s, %(author)s, %(publisher)s, %(original_title)s, %(translator)s, %(pub_year)s, %(pages)s, %(price)s, %(currency_unit)s, %(binding)s, %(isbn)s, %(author_intro)s, %(book_intro)s, %(content)s, %(tags)s, %(picture)s)]
[parameters: {'id': '1000134', 'title': 'ä¸‰æ¯›æµæµªè®°å…¨é›†', 'author': 'å¼ ä¹å¹³', 'publisher': 'å°‘å¹´å„¿ç«¥å‡ºç‰ˆç¤¾', 'original_title': None, 'translator': None, 'pub_year': '2001-8-1', 'pages': 261, 'price': 3000, 'currency_unit': 'å…ƒ', 'binding': 'å¹³è£…(æ— ç›˜)', 'isbn': '9787532446674', 'author_intro': 'å¼ ä¹å¹³ï¼Œæ˜¯ä¸­å›½å½“ä»£æœ€æ°å‡ºçš„æ¼«ç”»å®¶ä¹‹ä¸€ã€‚1910å¹´11æœˆ10æ—¥å‡ºç”Ÿäºæµ™æ±Ÿçœæµ·ç›å¿æµ·å¡˜ä¹¡é»„åºµå¤´æ‘ã€‚çˆ¶äº²æ˜¯ä½ä¹¡æ‘æ•™å¸ˆã€‚æ¯äº²æ“…é•¿åˆºç»£ã€å‰ªçº¸ï¼Œæ˜¯å¼ ä¹å¹³æœ€æ—©çš„ç¾æœ¯å¯è’™è€…ã€‚\n1923å¹´ï¼Œåœ¨å°å­¦è€å¸ˆçš„æŒ‡å¯¼ä¸‹ï¼Œå°‘å¹´å¼ ä¹å¹³åˆ›ä½œäº†å¹³ç”Ÿç¬¬ä¸€å¼ æ¼«ç”»ã€Šä¸€è±•è´Ÿäº”åƒå…ƒã€‹ï¼Œè®½åˆºå†›é˜€æ›¹é”Ÿè´¿é€‰ï¼Œåœ¨å½“åœ°åå™ªä¸€æ—¶ã€‚\n1927å¹´åœ¨å®¶ä¹¡å ... (1770 characters truncated) ... æƒ…â€å¾æ–‡ç‰¹ç­‰å¥–ã€‚\n1991å¹´4æœˆ4æ—¥ï¼Œåœ¨ã€Šè§£æ”¾æ—¥æŠ¥ã€‹ä¸Šå‘è¡¨æœ€åä¸€å¹…æ¼«ç”»ä½œå“ï¼šâ€œçŒ«å“ºé¼ â€ã€‚\n1991å¹´å†¬ï¼Œå¼ ä¹å¹³å†³å®šå°†ã€Šä¸‰æ¯›ä»å†›è®°ã€‹åŸç¨¿æçŒ®ç»™ä¸Šæµ·ç¾æœ¯é¦†ã€‚\n1992å¹´1æœˆ23æ—¥ï¼Œåœ¨ä¸Šæµ·åä¸œåŒ»é™¢å› å¸å…¥æ€§è‚ºç‚ç—…æƒ…æ¶åŒ–ã€‚\n1992å¹´9æœˆ27æ—¥ä¸‹åˆ6æ—¶ï¼Œå¼ ä¹å¹³åœ¨ä¸Šæµ·åä¸œåŒ»é™¢ä¸ä¸–é•¿è¾ï¼Œäº«å¹´82å²ã€‚\n', 'book_intro': 'ã€Šä¸‰æ¯›æµæµªè®°ã€‹æ‰€æè¿°çš„ä¸‰æ¯›æ‰€ç”Ÿæ´»çš„é‚£ä¸ªæ—¶ä»£ï¼Œå·²ç»æˆä¸ºäº†è¿‡å»ï¼Œä½†æ˜¯äº†è§£è¿‡å»ï¼Œäº†è§£å†å²ï¼Œå´æ˜¯æ¯ä¸ªäººéƒ½å¿…é¡»å®Œæˆçš„ä¸€ä»½ç­”å·ã€‚å› ä¸ºäº†è§£è¿‡å»ï¼Œäº†è§£å†å²å¯ä»¥è®©æˆé•¿çš„è„šæ­¥æ›´æ²‰ç€ã€æ›´åšå®ï¼Œå¯ä»¥è®©è§†é‡æ›´å®½å¹¿ï¼Œå¿ƒèƒ¸æ›´åšå¤§ã€‚åœ¨ä¸€ä¸ªäººæˆé•¿çš„è¿‡ç¨‹ä¸­ï¼Œé™¤äº†æ–°é²œçš„ç©ºæ°”ï¼Œç¿çƒ‚çš„é˜³å…‰ä»¥å¤–ï¼Œæ›´éœ€è¦çš„å†·é™çš„æ€è€ƒï¼Œä»¥åŠå¿ƒçµçš„æ„ŸåŠ¨å’Œéœ‡æ’¼ï¼Œè€Œ ... (90 characters truncated) ... å’Œççˆ±ã€‚\nã€Šä¸‰æ¯›æµæµªè®°ã€‹ä¸ºä»€ä¹ˆç»ä¹…ä¸è¡°ï¼Ÿå› ä¸ºå®ƒæœ‰ç›Šäºäººä»¬çš„å¿ƒçµã€‚æŸ¯çµå…ˆç”Ÿåœ¨é¦™æ¸¯ç‰ˆåºè¨€ä¸­å†™é“ï¼šâ€œã€Šä¸‰æ¯›æµæµªè®°ã€‹æ˜¯ä¸€éƒ¨å¾ˆæœ‰è¶£å‘³çš„å°äººä¹¦ï¼Œä¹Ÿæ˜¯ä¸€éƒ¨ç»™æˆäººçœ‹çš„è­¦ä¸–ä¹¦ã€‚ä¸‰æ¯›èº«ä¸Šï¼ŒèƒŒè´Ÿç€æ²‰é‡çš„å†å²é˜´å½±ï¼Œä¹Ÿå¸¦äº†æ·±åˆ»çš„å†å²å¯ç¤ºï¼Œå‘ä¸–ç•Œå‘¼å”¤å’Œå¹³ï¼Œå‘¼å”¤å…¬æ­£ï¼Œå‘¼å”¤ä»æ…ˆï¼Œå‘¼å”¤åŒæƒ…ï¼Œå‘¼å”¤äººé“ï¼Œå‘¼å”¤æ–‡æ˜ï¼â€\næ‰€...\n', 'content': '', 'tags': ['æ¼«ç”»', 'ä¸‰æ¯›', 'å¼ ä¹å¹³', 'ç«¥å¹´', 'ä¸­å›½æ¼«ç”»', 'ç»å…¸', 'ç»˜æœ¬', 'ä¸­å›½'], 'picture': None}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:32:32] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) é”™è¯¯:  é‡å¤é”®è¿åå”¯ä¸€çº¦æŸ"book_pkey"
DETAIL:  é”®å€¼"(id)=(1000134)" å·²ç»å­˜åœ¨

[SQL: INSERT INTO book (id, title, author, publisher, original_title, translator, pub_year, pages, price, currency_unit, binding, isbn, author_intro, book_intro, content, tags, picture) VALUES (%(id)s, %(title)s, %(author)s, %(publisher)s, %(original_title)s, %(translator)s, %(pub_year)s, %(pages)s, %(price)s, %(currency_unit)s, %(binding)s, %(isbn)s, %(author_intro)s, %(book_intro)s, %(content)s, %(tags)s, %(picture)s)]
[parameters: {'id': '1000134', 'title': 'ä¸‰æ¯›æµæµªè®°å…¨é›†', 'author': 'å¼ ä¹å¹³', 'publisher': 'å°‘å¹´å„¿ç«¥å‡ºç‰ˆç¤¾', 'original_title': None, 'translator': None, 'pub_year': '2001-8-1', 'pages': 261, 'price': 3000, 'currency_unit': 'å…ƒ', 'binding': 'å¹³è£…(æ— ç›˜)', 'isbn': '9787532446674', 'author_intro': 'å¼ ä¹å¹³ï¼Œæ˜¯ä¸­å›½å½“ä»£æœ€æ°å‡ºçš„æ¼«ç”»å®¶ä¹‹ä¸€ã€‚1910å¹´11æœˆ10æ—¥å‡ºç”Ÿäºæµ™æ±Ÿçœæµ·ç›å¿æµ·å¡˜ä¹¡é»„åºµå¤´æ‘ã€‚çˆ¶äº²æ˜¯ä½ä¹¡æ‘æ•™å¸ˆã€‚æ¯äº²æ“…é•¿åˆºç»£ã€å‰ªçº¸ï¼Œæ˜¯å¼ ä¹å¹³æœ€æ—©çš„ç¾æœ¯å¯è’™è€…ã€‚\n1923å¹´ï¼Œåœ¨å°å­¦è€å¸ˆçš„æŒ‡å¯¼ä¸‹ï¼Œå°‘å¹´å¼ ä¹å¹³åˆ›ä½œäº†å¹³ç”Ÿç¬¬ä¸€å¼ æ¼«ç”»ã€Šä¸€è±•è´Ÿäº”åƒå…ƒã€‹ï¼Œè®½åˆºå†›é˜€æ›¹é”Ÿè´¿é€‰ï¼Œåœ¨å½“åœ°åå™ªä¸€æ—¶ã€‚\n1927å¹´åœ¨å®¶ä¹¡å ... (1770 characters truncated) ... æƒ…â€å¾æ–‡ç‰¹ç­‰å¥–ã€‚\n1991å¹´4æœˆ4æ—¥ï¼Œåœ¨ã€Šè§£æ”¾æ—¥æŠ¥ã€‹ä¸Šå‘è¡¨æœ€åä¸€å¹…æ¼«ç”»ä½œå“ï¼šâ€œçŒ«å“ºé¼ â€ã€‚\n1991å¹´å†¬ï¼Œå¼ ä¹å¹³å†³å®šå°†ã€Šä¸‰æ¯›ä»å†›è®°ã€‹åŸç¨¿æçŒ®ç»™ä¸Šæµ·ç¾æœ¯é¦†ã€‚\n1992å¹´1æœˆ23æ—¥ï¼Œåœ¨ä¸Šæµ·åä¸œåŒ»é™¢å› å¸å…¥æ€§è‚ºç‚ç—…æƒ…æ¶åŒ–ã€‚\n1992å¹´9æœˆ27æ—¥ä¸‹åˆ6æ—¶ï¼Œå¼ ä¹å¹³åœ¨ä¸Šæµ·åä¸œåŒ»é™¢ä¸ä¸–é•¿è¾ï¼Œäº«å¹´82å²ã€‚\n', 'book_intro': 'ã€Šä¸‰æ¯›æµæµªè®°ã€‹æ‰€æè¿°çš„ä¸‰æ¯›æ‰€ç”Ÿæ´»çš„é‚£ä¸ªæ—¶ä»£ï¼Œå·²ç»æˆä¸ºäº†è¿‡å»ï¼Œä½†æ˜¯äº†è§£è¿‡å»ï¼Œäº†è§£å†å²ï¼Œå´æ˜¯æ¯ä¸ªäººéƒ½å¿…é¡»å®Œæˆçš„ä¸€ä»½ç­”å·ã€‚å› ä¸ºäº†è§£è¿‡å»ï¼Œäº†è§£å†å²å¯ä»¥è®©æˆé•¿çš„è„šæ­¥æ›´æ²‰ç€ã€æ›´åšå®ï¼Œå¯ä»¥è®©è§†é‡æ›´å®½å¹¿ï¼Œå¿ƒèƒ¸æ›´åšå¤§ã€‚åœ¨ä¸€ä¸ªäººæˆé•¿çš„è¿‡ç¨‹ä¸­ï¼Œé™¤äº†æ–°é²œçš„ç©ºæ°”ï¼Œç¿çƒ‚çš„é˜³å…‰ä»¥å¤–ï¼Œæ›´éœ€è¦çš„å†·é™çš„æ€è€ƒï¼Œä»¥åŠå¿ƒçµçš„æ„ŸåŠ¨å’Œéœ‡æ’¼ï¼Œè€Œ ... (90 characters truncated) ... å’Œççˆ±ã€‚\nã€Šä¸‰æ¯›æµæµªè®°ã€‹ä¸ºä»€ä¹ˆç»ä¹…ä¸è¡°ï¼Ÿå› ä¸ºå®ƒæœ‰ç›Šäºäººä»¬çš„å¿ƒçµã€‚æŸ¯çµå…ˆç”Ÿåœ¨é¦™æ¸¯ç‰ˆåºè¨€ä¸­å†™é“ï¼šâ€œã€Šä¸‰æ¯›æµæµªè®°ã€‹æ˜¯ä¸€éƒ¨å¾ˆæœ‰è¶£å‘³çš„å°äººä¹¦ï¼Œä¹Ÿæ˜¯ä¸€éƒ¨ç»™æˆäººçœ‹çš„è­¦ä¸–ä¹¦ã€‚ä¸‰æ¯›èº«ä¸Šï¼ŒèƒŒè´Ÿç€æ²‰é‡çš„å†å²é˜´å½±ï¼Œä¹Ÿå¸¦äº†æ·±åˆ»çš„å†å²å¯ç¤ºï¼Œå‘ä¸–ç•Œå‘¼å”¤å’Œå¹³ï¼Œå‘¼å”¤å…¬æ­£ï¼Œå‘¼å”¤ä»æ…ˆï¼Œå‘¼å”¤åŒæƒ…ï¼Œå‘¼å”¤äººé“ï¼Œå‘¼å”¤æ–‡æ˜ï¼â€\næ‰€...\n', 'content': '', 'tags': ['æ¼«ç”»', 'ä¸‰æ¯›', 'å¼ ä¹å¹³', 'ç«¥å¹´', 'ä¸­å›½æ¼«ç”»', 'ç»å…¸', 'ç»˜æœ¬', 'ä¸­å›½'], 'picture': None}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:32:32] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
ERROR:be.serve:Exception on /auth/register [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\auth.py", line 35, in register
    code, message = u.register(user_id=user_id, password=password)
  File "D:\githubcode\2\bookstore\be\model\user.py", line 73, in register
    self.conn.commit()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\sqlalchemy\orm\session.py", line 929, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) é”™è¯¯:  é‡å¤é”®è¿åå”¯ä¸€çº¦æŸ"book_pkey"
DETAIL:  é”®å€¼"(id)=(1000134)" å·²ç»å­˜åœ¨

[SQL: INSERT INTO book (id, title, author, publisher, original_title, translator, pub_year, pages, price, currency_unit, binding, isbn, author_intro, book_intro, content, tags, picture) VALUES (%(id)s, %(title)s, %(author)s, %(publisher)s, %(original_title)s, %(translator)s, %(pub_year)s, %(pages)s, %(price)s, %(currency_unit)s, %(binding)s, %(isbn)s, %(author_intro)s, %(book_intro)s, %(content)s, %(tags)s, %(picture)s)]
[parameters: {'id': '1000134', 'title': 'ä¸‰æ¯›æµæµªè®°å…¨é›†', 'author': 'å¼ ä¹å¹³', 'publisher': 'å°‘å¹´å„¿ç«¥å‡ºç‰ˆç¤¾', 'original_title': None, 'translator': None, 'pub_year': '2001-8-1', 'pages': 261, 'price': 3000, 'currency_unit': 'å…ƒ', 'binding': 'å¹³è£…(æ— ç›˜)', 'isbn': '9787532446674', 'author_intro': 'å¼ ä¹å¹³ï¼Œæ˜¯ä¸­å›½å½“ä»£æœ€æ°å‡ºçš„æ¼«ç”»å®¶ä¹‹ä¸€ã€‚1910å¹´11æœˆ10æ—¥å‡ºç”Ÿäºæµ™æ±Ÿçœæµ·ç›å¿æµ·å¡˜ä¹¡é»„åºµå¤´æ‘ã€‚çˆ¶äº²æ˜¯ä½ä¹¡æ‘æ•™å¸ˆã€‚æ¯äº²æ“…é•¿åˆºç»£ã€å‰ªçº¸ï¼Œæ˜¯å¼ ä¹å¹³æœ€æ—©çš„ç¾æœ¯å¯è’™è€…ã€‚\n1923å¹´ï¼Œåœ¨å°å­¦è€å¸ˆçš„æŒ‡å¯¼ä¸‹ï¼Œå°‘å¹´å¼ ä¹å¹³åˆ›ä½œäº†å¹³ç”Ÿç¬¬ä¸€å¼ æ¼«ç”»ã€Šä¸€è±•è´Ÿäº”åƒå…ƒã€‹ï¼Œè®½åˆºå†›é˜€æ›¹é”Ÿè´¿é€‰ï¼Œåœ¨å½“åœ°åå™ªä¸€æ—¶ã€‚\n1927å¹´åœ¨å®¶ä¹¡å ... (1770 characters truncated) ... æƒ…â€å¾æ–‡ç‰¹ç­‰å¥–ã€‚\n1991å¹´4æœˆ4æ—¥ï¼Œåœ¨ã€Šè§£æ”¾æ—¥æŠ¥ã€‹ä¸Šå‘è¡¨æœ€åä¸€å¹…æ¼«ç”»ä½œå“ï¼šâ€œçŒ«å“ºé¼ â€ã€‚\n1991å¹´å†¬ï¼Œå¼ ä¹å¹³å†³å®šå°†ã€Šä¸‰æ¯›ä»å†›è®°ã€‹åŸç¨¿æçŒ®ç»™ä¸Šæµ·ç¾æœ¯é¦†ã€‚\n1992å¹´1æœˆ23æ—¥ï¼Œåœ¨ä¸Šæµ·åä¸œåŒ»é™¢å› å¸å…¥æ€§è‚ºç‚ç—…æƒ…æ¶åŒ–ã€‚\n1992å¹´9æœˆ27æ—¥ä¸‹åˆ6æ—¶ï¼Œå¼ ä¹å¹³åœ¨ä¸Šæµ·åä¸œåŒ»é™¢ä¸ä¸–é•¿è¾ï¼Œäº«å¹´82å²ã€‚\n', 'book_intro': 'ã€Šä¸‰æ¯›æµæµªè®°ã€‹æ‰€æè¿°çš„ä¸‰æ¯›æ‰€ç”Ÿæ´»çš„é‚£ä¸ªæ—¶ä»£ï¼Œå·²ç»æˆä¸ºäº†è¿‡å»ï¼Œä½†æ˜¯äº†è§£è¿‡å»ï¼Œäº†è§£å†å²ï¼Œå´æ˜¯æ¯ä¸ªäººéƒ½å¿…é¡»å®Œæˆçš„ä¸€ä»½ç­”å·ã€‚å› ä¸ºäº†è§£è¿‡å»ï¼Œäº†è§£å†å²å¯ä»¥è®©æˆé•¿çš„è„šæ­¥æ›´æ²‰ç€ã€æ›´åšå®ï¼Œå¯ä»¥è®©è§†é‡æ›´å®½å¹¿ï¼Œå¿ƒèƒ¸æ›´åšå¤§ã€‚åœ¨ä¸€ä¸ªäººæˆé•¿çš„è¿‡ç¨‹ä¸­ï¼Œé™¤äº†æ–°é²œçš„ç©ºæ°”ï¼Œç¿çƒ‚çš„é˜³å…‰ä»¥å¤–ï¼Œæ›´éœ€è¦çš„å†·é™çš„æ€è€ƒï¼Œä»¥åŠå¿ƒçµçš„æ„ŸåŠ¨å’Œéœ‡æ’¼ï¼Œè€Œ ... (90 characters truncated) ... å’Œççˆ±ã€‚\nã€Šä¸‰æ¯›æµæµªè®°ã€‹ä¸ºä»€ä¹ˆç»ä¹…ä¸è¡°ï¼Ÿå› ä¸ºå®ƒæœ‰ç›Šäºäººä»¬çš„å¿ƒçµã€‚æŸ¯çµå…ˆç”Ÿåœ¨é¦™æ¸¯ç‰ˆåºè¨€ä¸­å†™é“ï¼šâ€œã€Šä¸‰æ¯›æµæµªè®°ã€‹æ˜¯ä¸€éƒ¨å¾ˆæœ‰è¶£å‘³çš„å°äººä¹¦ï¼Œä¹Ÿæ˜¯ä¸€éƒ¨ç»™æˆäººçœ‹çš„è­¦ä¸–ä¹¦ã€‚ä¸‰æ¯›èº«ä¸Šï¼ŒèƒŒè´Ÿç€æ²‰é‡çš„å†å²é˜´å½±ï¼Œä¹Ÿå¸¦äº†æ·±åˆ»çš„å†å²å¯ç¤ºï¼Œå‘ä¸–ç•Œå‘¼å”¤å’Œå¹³ï¼Œå‘¼å”¤å…¬æ­£ï¼Œå‘¼å”¤ä»æ…ˆï¼Œå‘¼å”¤åŒæƒ…ï¼Œå‘¼å”¤äººé“ï¼Œå‘¼å”¤æ–‡æ˜ï¼â€\næ‰€...\n', 'content': '', 'tags': ['æ¼«ç”»', 'ä¸‰æ¯›', 'å¼ ä¹å¹³', 'ç«¥å¹´', 'ä¸­å›½æ¼«ç”»', 'ç»å…¸', 'ç»˜æœ¬', 'ä¸­å›½'], 'picture': None}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:32:32] "[35m[1mPOST /auth/register HTTP/1.1[0m" 500 -
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 11:32:32] "GET /shutdown HTTP/1.1" 200 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 12:05:47] "[35m[1mPOST /seller/add_book HTTP/1.1[0m" 511 -
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 12:06:01] "POST /auth/register HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 12:06:03] "POST /seller/create_store HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 12:06:06] "[35m[1mPOST /seller/add_book HTTP/1.1[0m" 530 -
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 12:07:08] "[35m[1mPOST /seller/add_book HTTP/1.1[0m" 530 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 12:07:14] "[35m[1mPOST /seller/add_book HTTP/1.1[0m" 530 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 12:07:52] "[35m[1mPOST /seller/add_book HTTP/1.1[0m" 530 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 12:09:00] "[35m[1mPOST /seller/add_book HTTP/1.1[0m" 530 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 12:09:38] "[35m[1mPOST /seller/add_book HTTP/1.1[0m" 530 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 12:14:44] "POST /auth/register HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 12:15:06] "[35m[1mPOST /buyer/new_order HTTP/1.1[0m" 530 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
ERROR:be.serve:Exception on /buyer/new_order [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\buyer.py", line 21, in new_order
    code, message, order_id = b.new_order(user_id, store_id, id_and_count)
ValueError: too many values to unpack (expected 3)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 12:25:18] "[35m[1mPOST /buyer/new_order HTTP/1.1[0m" 500 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
ERROR:be.serve:Exception on /buyer/new_order [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\buyer.py", line 23, in new_order
    code, message, order_id = r
ValueError: too many values to unpack (expected 3)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 12:27:08] "[35m[1mPOST /buyer/new_order HTTP/1.1[0m" 500 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 12:28:39] "[35m[1mPOST /buyer/new_order HTTP/1.1[0m" 515 -
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 12:28:57] "[35m[1mPOST /seller/add_stock_level HTTP/1.1[0m" 515 -
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 12:29:03] "[35m[1mPOST /seller/add_stock_level HTTP/1.1[0m" 515 -
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 12:29:16] "POST /seller/add_book HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 12:29:22] "POST /seller/add_stock_level HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 12:29:26] "[35m[1mPOST /buyer/new_order HTTP/1.1[0m" 530 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 14:18:14] "POST /buyer/buyer_orders HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 14:18:40] "POST /buyer/buyer_orders HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 14:20:13] "POST /buyer/buyer_orders HTTP/1.1" 200 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 14:20:20] "POST /buyer/buyer_orders HTTP/1.1" 200 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 14:21:36] "[35m[1mPOST /buyer/buyer_orders HTTP/1.1[0m" 530 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 14:21:53] "POST /buyer/buyer_orders HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 14:22:39] "POST /buyer/buyer_orders HTTP/1.1" 200 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 14:24:24] "POST /buyer/buyer_orders HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 14:28:27] "POST /seller/seller_orders HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 14:29:37] "[35m[1mPOST /buyer/new_order HTTP/1.1[0m" 511 -
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 14:30:15] "POST /auth/register HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 14:30:26] "POST /seller/create_store HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 14:30:33] "[35m[1mPOST /seller/add_book HTTP/1.1[0m" 513 -
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 14:30:39] "POST /seller/add_book HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 14:30:55] "[35m[1mPOST /seller/add_stock_level HTTP/1.1[0m" 513 -
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 14:30:59] "POST /seller/add_stock_level HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 14:31:15] "[35m[1mPOST /buyer/new_order HTTP/1.1[0m" 511 -
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 14:31:27] "POST /auth/register HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 14:31:32] "[35m[1mPOST /buyer/new_order HTTP/1.1[0m" 513 -
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 14:31:36] "POST /buyer/new_order HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 14:32:04] "POST /buyer/buyer_orders HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 14:32:16] "POST /buyer/buyer_orders HTTP/1.1" 200 -
ERROR:be.serve:Exception on /seller/seller_orders [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\seller.py", line 62, in get_seller_orders
    return jsonify({"message": message, "orders": orders}), code
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\json\__init__.py", line 348, in jsonify
    f"{dumps(data, indent=indent, separators=separators)}\n",
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\json\__init__.py", line 129, in dumps
    rv = _json.dumps(obj, **kwargs)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\json\__init__.py", line 234, in dumps
    return cls(
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\json\encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\json\encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\json\__init__.py", line 56, in default
    return super().default(o)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\json\encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type InstanceState is not JSON serializable
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 14:33:32] "[35m[1mPOST /seller/seller_orders HTTP/1.1[0m" 500 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 14:43:21] "[35m[1mPOST /seller/seller_orders HTTP/1.1[0m" 530 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
ERROR:be.serve:Exception on /seller/seller_orders [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\seller.py", line 62, in get_seller_orders
    return jsonify({"message": message, "orders": orders}), code
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\json\__init__.py", line 348, in jsonify
    f"{dumps(data, indent=indent, separators=separators)}\n",
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\json\__init__.py", line 129, in dumps
    rv = _json.dumps(obj, **kwargs)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\json\__init__.py", line 234, in dumps
    return cls(
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\json\encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\json\encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\json\__init__.py", line 56, in default
    return super().default(o)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\json\encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type InstanceState is not JSON serializable
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 14:44:09] "[35m[1mPOST /seller/seller_orders HTTP/1.1[0m" 500 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 14:48:14] "POST /seller/seller_orders HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 14:48:37] "POST /buyer/buyer_orders HTTP/1.1" 200 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 15:31:49] "[35m[1mPOST /book/search_all HTTP/1.1[0m" 530 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 15:32:56] "[35m[1mPOST /book/search_all HTTP/1.1[0m" 530 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 15:33:34] "[35m[1mPOST /book/search_all HTTP/1.1[0m" 530 -
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 15:34:19] "[35m[1mPOST /book/search_all HTTP/1.1[0m" 530 -
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 15:35:49] "[35m[1mPOST /book/search_all HTTP/1.1[0m" 530 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 15:35:56] "[35m[1mPOST /book/search_all HTTP/1.1[0m" 530 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 15:38:58] "POST /book/search_all HTTP/1.1" 200 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 18:19:07] "POST /auth/register HTTP/1.1" 200 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 18:25:45] "[35m[1mPOST /book/search_in_store HTTP/1.1[0m" 530 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 18:27:29] "[35m[1mPOST /book/search_in_store HTTP/1.1[0m" 530 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 18:31:10] "POST /book/search_in_store HTTP/1.1" 200 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 18:44:16] "POST /book/search_all HTTP/1.1" 200 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 20:13:43] "POST /book/search_all HTTP/1.1" 200 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 20:20:09] "[35m[1mPOST /book/search_all HTTP/1.1[0m" 530 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 20:22:08] "POST /book/search_all HTTP/1.1" 200 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 20:27:37] "POST /book/search_all HTTP/1.1" 200 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 20:33:09] "POST /book/search_all HTTP/1.1" 200 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 20:35:29] "POST /book/search_all HTTP/1.1" 200 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
ERROR:be.serve:Exception on /book/search_all [POST]
Traceback (most recent call last):
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 2051, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1501, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1499, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\tuzi\.conda\envs\bookstore\lib\site-packages\flask\app.py", line 1485, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\githubcode\2\bookstore\be\view\book.py", line 38, in search_all
    code, data = u.search_all(
TypeError: search_all() missing 2 required positional arguments: 'page' and 'per_page'
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 20:35:57] "[35m[1mPOST /book/search_all HTTP/1.1[0m" 500 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 20:37:54] "POST /book/search_all HTTP/1.1" 200 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 20:40:19] "POST /book/search_all HTTP/1.1" 200 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 20:40:56] "POST /book/search_all HTTP/1.1" 200 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 20:41:45] "POST /book/search_all HTTP/1.1" 200 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 20:42:07] "POST /book/search_all HTTP/1.1" 200 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 20:43:06] "POST /book/search_all HTTP/1.1" 200 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 20:44:06] "POST /book/search_all HTTP/1.1" 200 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 20:44:18] "POST /book/search_all HTTP/1.1" 200 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 20:44:28] "POST /book/search_all HTTP/1.1" 200 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 20:47:16] "POST /book/search_all HTTP/1.1" 200 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug:127.0.0.1 - - [19/Dec/2023 20:47:43] "POST /book/search_all HTTP/1.1" 200 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug:127.0.0.1 - - [20/Dec/2023 19:42:07] "POST /buyer/cancel_order HTTP/1.1" 200 -
